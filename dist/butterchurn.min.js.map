{"version":3,"file":"butterchurn.min.js","mappings":"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","sources":["webpack://butterchurn/webpack/universalModuleDefinition","webpack://butterchurn/./src/assemblyscript/presetFunctions.ts","webpack://butterchurn/./src/blankPreset.js","webpack://butterchurn/./node_modules/@assemblyscript/loader/index.js","webpack://butterchurn/./src/audio/fft.js","webpack://butterchurn/./src/audio/audioProcessor.js","webpack://butterchurn/./src/audio/audioLevels.js","webpack://butterchurn/./src/utils.js","webpack://butterchurn/./src/equations/presetEquationRunner.js","webpack://butterchurn/./src/equations/presetEquationRunnerWASM.js","webpack://butterchurn/./src/rendering/shaders/shaderUtils.js","webpack://butterchurn/./src/rendering/waves/waveUtils.js","webpack://butterchurn/./src/rendering/waves/basicWaveform.js","webpack://butterchurn/./src/rendering/waves/customWaveform.js","webpack://butterchurn/./src/rendering/shapes/customShape.js","webpack://butterchurn/./src/rendering/sprites/border.js","webpack://butterchurn/./src/rendering/sprites/darkenCenter.js","webpack://butterchurn/./src/rendering/motionVectors/motionVectors.js","webpack://butterchurn/./src/rendering/shaders/warp.js","webpack://butterchurn/./src/rendering/shaders/comp.js","webpack://butterchurn/./src/rendering/shaders/output.js","webpack://butterchurn/./src/rendering/shaders/resample.js","webpack://butterchurn/./src/rendering/shaders/blur/blurVertical.js","webpack://butterchurn/./src/rendering/shaders/blur/blurHorizontal.js","webpack://butterchurn/./src/rendering/shaders/blur/blur.js","webpack://butterchurn/./src/noise/noise.js","webpack://butterchurn/./src/image/imageTextures.js","webpack://butterchurn/./src/rendering/text/titleText.js","webpack://butterchurn/./src/rendering/blendPattern.js","webpack://butterchurn/./src/rendering/renderer.js","webpack://butterchurn/./src/visualizer.js","webpack://butterchurn/./src/index.js","webpack://butterchurn/./src/presetBase.js","webpack://butterchurn/./node_modules/ecma-proposal-math-extensions/reference-implementation/index.js","webpack://butterchurn/./node_modules/eel-wasm/dist/build/parser.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/astUtils.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/compiler.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/constants.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/emitter.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/encoding.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/envParser.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/errorUtils.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/ieee754.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/index.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/loader.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/parser.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/preProcessor.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/shims.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/utils.js","webpack://butterchurn/./node_modules/eel-wasm/dist/src/wasmFunctions.js","webpack://butterchurn/webpack/bootstrap","webpack://butterchurn/webpack/runtime/compat get default export","webpack://butterchurn/webpack/runtime/define property getters","webpack://butterchurn/webpack/runtime/hasOwnProperty shorthand","webpack://butterchurn/webpack/runtime/make namespace object","webpack://butterchurn/webpack/runtime/node module decorator","webpack://butterchurn/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"butterchurn\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"butterchurn\"] = factory();\n\telse\n\t\troot[\"butterchurn\"] = factory();\n})(self, () => {\nreturn ","\nvar data = \"AGFzbQEAAAABPQpgAABgAXwBfGACfHwBfGACf38AYAR/f39/AGAJf39/f3x8fHx8AGADf399AGABfwF/YAJ/fwF/YAF+AX8CuBWMAQNlbnYFYWJvcnQABAhwaXhlbEVxcwtwZXJQaXhlbEVxcwAADHBpeGVsVmFyUG9vbAR3YXJwA3wBDHBpeGVsVmFyUG9vbAR6b29tA3wBDHBpeGVsVmFyUG9vbAd6b29tZXhwA3wBDHBpeGVsVmFyUG9vbAJjeAN8AQxwaXhlbFZhclBvb2wCY3kDfAEMcGl4ZWxWYXJQb29sAnN4A3wBDHBpeGVsVmFyUG9vbAJzeQN8AQxwaXhlbFZhclBvb2wCZHgDfAEMcGl4ZWxWYXJQb29sAmR5A3wBDHBpeGVsVmFyUG9vbANyb3QDfAEMcGl4ZWxWYXJQb29sA3JhZAN8AQxwaXhlbFZhclBvb2wDYW5nA3wBDHBpeGVsVmFyUG9vbAF4A3wBDHBpeGVsVmFyUG9vbAF5A3wBCHFWYXJQb29sAnExA3wBCHFWYXJQb29sAnEyA3wBCHFWYXJQb29sAnEzA3wBCHFWYXJQb29sAnE0A3wBCHFWYXJQb29sAnE1A3wBCHFWYXJQb29sAnE2A3wBCHFWYXJQb29sAnE3A3wBCHFWYXJQb29sAnE4A3wBCHFWYXJQb29sAnE5A3wBCHFWYXJQb29sA3ExMAN8AQhxVmFyUG9vbANxMTEDfAEIcVZhclBvb2wDcTEyA3wBCHFWYXJQb29sA3ExMwN8AQhxVmFyUG9vbANxMTQDfAEIcVZhclBvb2wDcTE1A3wBCHFWYXJQb29sA3ExNgN8AQhxVmFyUG9vbANxMTcDfAEIcVZhclBvb2wDcTE4A3wBCHFWYXJQb29sA3ExOQN8AQhxVmFyUG9vbANxMjADfAEIcVZhclBvb2wDcTIxA3wBCHFWYXJQb29sA3EyMgN8AQhxVmFyUG9vbANxMjMDfAEIcVZhclBvb2wDcTI0A3wBCHFWYXJQb29sA3EyNQN8AQhxVmFyUG9vbANxMjYDfAEIcVZhclBvb2wDcTI3A3wBCHFWYXJQb29sA3EyOAN8AQhxVmFyUG9vbANxMjkDfAEIcVZhclBvb2wDcTMwA3wBCHFWYXJQb29sA3EzMQN8AQhxVmFyUG9vbANxMzIDfAEIdFZhclBvb2wCdDEDfAEIdFZhclBvb2wCdDIDfAEIdFZhclBvb2wCdDMDfAEIdFZhclBvb2wCdDQDfAEIdFZhclBvb2wCdDUDfAEIdFZhclBvb2wCdDYDfAEIdFZhclBvb2wCdDcDfAEIdFZhclBvb2wCdDgDfAEKc2hhcGVQb29sMAN4XzADfAEKc2hhcGVQb29sMAN5XzADfAEKc2hhcGVQb29sMAVyYWRfMAN8AQpzaGFwZVBvb2wwBWFuZ18wA3wBCnNoYXBlUG9vbDADcl8wA3wBCnNoYXBlUG9vbDADZ18wA3wBCnNoYXBlUG9vbDADYl8wA3wBCnNoYXBlUG9vbDADYV8wA3wBCnNoYXBlUG9vbDAEcjJfMAN8AQpzaGFwZVBvb2wwBGcyXzADfAEKc2hhcGVQb29sMARiMl8wA3wBCnNoYXBlUG9vbDAEYTJfMAN8AQpzaGFwZVBvb2wwCmJvcmRlcl9yXzADfAEKc2hhcGVQb29sMApib3JkZXJfZ18wA3wBCnNoYXBlUG9vbDAKYm9yZGVyX2JfMAN8AQpzaGFwZVBvb2wwCmJvcmRlcl9hXzADfAEKc2hhcGVQb29sMA50aGlja291dGxpbmVfMAN8AQpzaGFwZVBvb2wwCnRleHR1cmVkXzADfAEKc2hhcGVQb29sMAp0ZXhfem9vbV8wA3wBCnNoYXBlUG9vbDAJdGV4X2FuZ18wA3wBCnNoYXBlUG9vbDAKYWRkaXRpdmVfMAN8AQpzaGFwZVBvb2wxA3hfMQN8AQpzaGFwZVBvb2wxA3lfMQN8AQpzaGFwZVBvb2wxBXJhZF8xA3wBCnNoYXBlUG9vbDEFYW5nXzEDfAEKc2hhcGVQb29sMQNyXzEDfAEKc2hhcGVQb29sMQNnXzEDfAEKc2hhcGVQb29sMQNiXzEDfAEKc2hhcGVQb29sMQNhXzEDfAEKc2hhcGVQb29sMQRyMl8xA3wBCnNoYXBlUG9vbDEEZzJfMQN8AQpzaGFwZVBvb2wxBGIyXzEDfAEKc2hhcGVQb29sMQRhMl8xA3wBCnNoYXBlUG9vbDEKYm9yZGVyX3JfMQN8AQpzaGFwZVBvb2wxCmJvcmRlcl9nXzEDfAEKc2hhcGVQb29sMQpib3JkZXJfYl8xA3wBCnNoYXBlUG9vbDEKYm9yZGVyX2FfMQN8AQpzaGFwZVBvb2wxDnRoaWNrb3V0bGluZV8xA3wBCnNoYXBlUG9vbDEKdGV4dHVyZWRfMQN8AQpzaGFwZVBvb2wxCnRleF96b29tXzEDfAEKc2hhcGVQb29sMQl0ZXhfYW5nXzEDfAEKc2hhcGVQb29sMQphZGRpdGl2ZV8xA3wBCnNoYXBlUG9vbDIDeF8yA3wBCnNoYXBlUG9vbDIDeV8yA3wBCnNoYXBlUG9vbDIFcmFkXzIDfAEKc2hhcGVQb29sMgVhbmdfMgN8AQpzaGFwZVBvb2wyA3JfMgN8AQpzaGFwZVBvb2wyA2dfMgN8AQpzaGFwZVBvb2wyA2JfMgN8AQpzaGFwZVBvb2wyA2FfMgN8AQpzaGFwZVBvb2wyBHIyXzIDfAEKc2hhcGVQb29sMgRnMl8yA3wBCnNoYXBlUG9vbDIEYjJfMgN8AQpzaGFwZVBvb2wyBGEyXzIDfAEKc2hhcGVQb29sMgpib3JkZXJfcl8yA3wBCnNoYXBlUG9vbDIKYm9yZGVyX2dfMgN8AQpzaGFwZVBvb2wyCmJvcmRlcl9iXzIDfAEKc2hhcGVQb29sMgpib3JkZXJfYV8yA3wBCnNoYXBlUG9vbDIOdGhpY2tvdXRsaW5lXzIDfAEKc2hhcGVQb29sMgp0ZXh0dXJlZF8yA3wBCnNoYXBlUG9vbDIKdGV4X3pvb21fMgN8AQpzaGFwZVBvb2wyCXRleF9hbmdfMgN8AQpzaGFwZVBvb2wyCmFkZGl0aXZlXzIDfAEKc2hhcGVQb29sMwN4XzMDfAEKc2hhcGVQb29sMwN5XzMDfAEKc2hhcGVQb29sMwVyYWRfMwN8AQpzaGFwZVBvb2wzBWFuZ18zA3wBCnNoYXBlUG9vbDMDcl8zA3wBCnNoYXBlUG9vbDMDZ18zA3wBCnNoYXBlUG9vbDMDYl8zA3wBCnNoYXBlUG9vbDMDYV8zA3wBCnNoYXBlUG9vbDMEcjJfMwN8AQpzaGFwZVBvb2wzBGcyXzMDfAEKc2hhcGVQb29sMwRiMl8zA3wBCnNoYXBlUG9vbDMEYTJfMwN8AQpzaGFwZVBvb2wzCmJvcmRlcl9yXzMDfAEKc2hhcGVQb29sMwpib3JkZXJfZ18zA3wBCnNoYXBlUG9vbDMKYm9yZGVyX2JfMwN8AQpzaGFwZVBvb2wzCmJvcmRlcl9hXzMDfAEKc2hhcGVQb29sMw50aGlja291dGxpbmVfMwN8AQpzaGFwZVBvb2wzCnRleHR1cmVkXzMDfAEKc2hhcGVQb29sMwp0ZXhfem9vbV8zA3wBCnNoYXBlUG9vbDMJdGV4X2FuZ18zA3wBCnNoYXBlUG9vbDMKYWRkaXRpdmVfMwN8AQMZGAgDBwkBAQICAQYFAAAAAAAAAAAAAAAAAAUDAQABBuwMigF8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt/AUEAC3wBRAAAAAAAAAAAC3wBRAAAAAAAAAAAC34BQgALB9kBDwZtZW1vcnkCABJjcmVhdGVGbG9hdDMyQXJyYXkABBFydW5QaXhlbEVxdWF0aW9ucwAMBnNhdmVRcwANCXJlc3RvcmVRcwAOBnNhdmVUcwAPCXJlc3RvcmVUcwAQC3NoYXBlMF9zYXZlABEOc2hhcGUwX3Jlc3RvcmUAEgtzaGFwZTFfc2F2ZQATDnNoYXBlMV9yZXN0b3JlABQLc2hhcGUyX3NhdmUAFQ5zaGFwZTJfcmVzdG9yZQAWC3NoYXBlM19zYXZlABcOc2hhcGUzX3Jlc3RvcmUAGAgBGQraQRi0AQEGfyAAQez///8DSwRAAAsgAEEQaiICQfz///8DSwRAAAsjkAIhBiOQAkEEaiIEIAJBE2pBcHFBBGsiB2oiAj8AIgVBEHRBD2pBcHEiA0sEQCAFIAIgA2tB//8DakGAgHxxQRB2IgMgAyAFSBtAAEEASARAIANAAEEASARAAAsLCyACJJACIAYgBzYCACAEQQRrIgJBADYCBCACQQA2AgggAiABNgIMIAIgADYCECAEQRBqC7sCAQF/AkAgAUUNACAAQQA6AAAgACABakEEayICQQA6AAMgAUECTQ0AIABBADoAASAAQQA6AAIgAkEAOgACIAJBADoAASABQQZNDQAgAEEAOgADIAJBADoAACABQQhNDQAgAEEAIABrQQNxIgJqIgBBADYCACAAIAEgAmtBfHEiAmpBHGsiAUEANgIYIAJBCE0NACAAQQA2AgQgAEEANgIIIAFBADYCECABQQA2AhQgAkEYTQ0AIABBADYCDCAAQQA2AhAgAEEANgIUIABBADYCGCABQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgwgACAAQQRxQRhqIgFqIQAgAiABayEBA0AgAUEgTwRAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCABQSBrIQEgAEEgaiEADAELCwsLdwECfwJ/QQxBAxACIgFFBEBBDEECEAIhAQsgAQtBADYCACABQQA2AgQgAUEANgIIIABB/////wBLBEBBoAhB0AhBEkE5EAAACyAAQQJ0IgBBABACIgIgABADIAEoAgAaIAEgAjYCACABIAI2AgQgASAANgIIIAELuwQDAX8KfgF8IABC////////////AINCNIhClQh9IgVCBoenQQN0QYAJaiIBKQMAIQcgASkDCCEEIAEpAxAhAiAFQj+DIgVCAFIEQAJ+IAcgBYYgBELAACAFfSIDiIQhByAEIAWGIAIgA4iEIQQgAiAFhiABKQMYIAOIhAshAgsgAEL/////////B4NCgICAgICAgAiEIgVC/////w+DIgMgBEIgiCIIfiAEQv////8PgyIGIAN+IglCIIh8IQQgBiAFQiCIIgZ+IARC/////w+DfCEDIAYgCH4gBEIgiHwgA0IgiHwkkwIgBUIghyACQiCIfiIEIAlC/////w+DIANCIIZ8fCECIAIgBFStI5MCIAUgB358fCIIQgKGIAJCPoiEIgdCP4ciBUIBhyAHhSIDeSEEIAMgBIYgBSACQgKGhSIGQsAAIAR9iIQiAkL/////D4MhAyACQiCIIglCtISjiwJ+IANCorW/yAx+IANCtISjiwJ+IgpCIIh8IgtC/////w+DfCEDIAlCorW/yAx+IAtCIIh8IANCIIh8JJMCIApC/////w+DIANCIIZ8IgMgArpEhBtwUcyYOD+iIAYgBIa6RBgtRFT7ITk/oqCxIgJUrSOTAiIGQguIfLokkQIgAiAGQjWGIANCC4iEfLpEAAAAAAAA8DuiJJICI5ECQoCAgICAgIDYPCAEQjSGfSAAIAeFQoCAgICAgICAgH+DhL8iDKIkkQIjkgIgDKIkkgIgCEI+hyAFfacLlQYDAn8BfgR8IAC9IgNCIIinIgFBH3YhAiABQf////8HcSIBQfvDpP8DTQRAIAFBnsGa8gNJBEBEAAAAAAAA8D8PC0QAAAAAAADwPyAAIACiIgVEAAAAAAAA4D+iIgahIgREAAAAAAAA8D8gBKEgBqEgBSAFIAUgBUSQFcsZoAH6PqJEd1HBFmzBVr+gokRMVVVVVVWlP6CiIAUgBaIiBiAGoiAFIAVE1DiIvun6qL2iRMSxtL2e7iE+oKJErVKcgE9+kr6goqCiIABEAAAAAAAAAACioaCgDwsgAUGAgMD/B08EQCAAIAChDwsCfyADQiCIp0H/////B3EiAUH7w+SJBEkEQAJ8IAFBFHYiAiAAIABEg8jJbTBf5D+iniIFRAAAQFT7Ifk/oqEiACAFRDFjYhphtNA9oiIGoSIEvUIgiKdBFHZB/w9xa0EQSwRAAnwgBURzcAMuihmjO6IgACAAIAVEAABgGmG00D2iIgahIgChIAahoSEGIAIgACAGoSIEvUIgiKdBFHZB/w9xa0ExSwR8IAVEwUkgJZqDezmiIAAgACAFRAAAAC6KGaM7oiIGoSIAoSAGoaEhBiAAIAahBSAECwshBAsgBAskkQIgACAEoSAGoSSSAiAFqgwBC0EAIAMQBSIBayABIAIbCyECI5ECIQUjkgIhBiACQQFxBHwgBSAFoiIAIAWiIQQgBSAAIAZEAAAAAAAA4D+iIAQgACAARH3+sVfjHcc+okTVYcEZoAEqv6CiRKb4EBEREYE/oCAAIAAgAKKiIABEfNXPWjrZ5T2iROucK4rm5Vq+oKKgoqGiIAahIARESVVVVVVVxb+ioaEFRAAAAAAAAPA/IAUgBaIiAEQAAAAAAADgP6IiBKEiB0QAAAAAAADwPyAHoSAEoSAAIAAgACAARJAVyxmgAfo+okR3UcEWbMFWv6CiRExVVVVVVaU/oKIgACAAoiIEIASiIAAgAETUOIi+6fqovaJExLG0vZ7uIT6gokStUpyAT36SvqCioKIgBSAGoqGgoAsiAJogACACQQFqQQJxGwu8BAICfwN8IAAhAyAAvUIgiKdB/////wdxIgFBgIDAoARPBEAgACAAYgRAIAAPC0QYLURU+yH5PyADpg8LIAFBgIDw/gNJBEAgAUGAgIDyA0kEQCAADwtBfyECBSAAmSEAIAFBgIDM/wNJBHwgAUGAgJj/A0kEfCAAIACgRAAAAAAAAPA/oSAARAAAAAAAAABAoKMFQQEhAiAARAAAAAAAAPA/oSAARAAAAAAAAPA/oKMLBSABQYCAjoAESQR8QQIhAiAARAAAAAAAAPg/oSAARAAAAAAAAPg/okQAAAAAAADwP6CjBUEDIQJEAAAAAAAA8L8gAKMLCyEACyAAIACiIgUgBaIhBCAAIAUgBCAEIAQgBCAERBHaIuM6rZA/okTrDXYkS3upP6CiRFE90KBmDbE/oKJEbiBMxc1Ftz+gokT/gwCSJEnCP6CiRA1VVVVVVdU/oKIgBCAEIAQgBCAERC9saixEtKK/okSa/d5SLd6tv6CiRG2adK/ysLO/oKJEcRYj/sZxvL+gokTE65iZmZnJv6CioKIhBCACQQBIBEAgACAEoQ8LAkACQAJAAkACQAJAIAIOBAABAgMEC0RPu2EFZ6zdPyAEROJlLyJ/K3o8oSAAoaEhAAwEC0QYLURU+yHpPyAERAdcFDMmpoE8oSAAoaEhAAwDC0Sb9oHSC3PvPyAERL3L8HqIB3A8oSAAoaEhAAwCC0QYLURU+yH5PyAERAdcFDMmppE8oSAAoaEhAAwBCwALIAAgA6YLvgMCBX8BfkEBIAAgAGIgASABYhsEQCABIACgDwsgAL0iB0IgiKchBCAHpyEDIAG9IgenIgYgB0IgiKciBUGAgMD/A2tyRQRAIAAQBw8LIAVBHnZBAnEgBEEfdnIhAiAFQf////8HcSEFIARB/////wdxIgQgA3JFBEACQAJAAkACQCACRQ0AAkAgAkEBaw4DAQIDAAsMAwsgAA8LRBgtRFT7IQlADwtEGC1EVPshCcAPCwsCQCAFIAZyRQ0AIAVBgIDA/wdGBEBE0iEzf3zZAkBEGC1EVPsh6T8gAkECcRtEGC1EVPshCUBEAAAAAAAAAAAgAkECcRsgBEGAgMD/B0YbIgCaIAAgAkEBcRsPC0EBIARBgIDA/wdGIAQgBUGAgIAgaksbDQAgBSAEQYCAgCBqS0EAIAJBAnEbBHxEAAAAAAAAAAAFIAAgAaOZEAcLIQACQAJAAkACQCACIgMEQCADQQFrDgMBAgMECyAADwsgAJoPC0QYLURU+yEJQCAARAdcFDMmpqE8oaEPCyAARAdcFDMmpqE8oUQYLURU+yEJQKEPCwALRBgtRFT7Ifm/RBgtRFT7Ifk/IAJBAXEbC4ESAwl/AX4IfAJAAkACQAJAIAGZRAAAAAAAAABAZQRAIAFEAAAAAAAAAEBhDQEgAUQAAAAAAADgP2EEQCAAn5lEAAAAAAAA8H8gAEQAAAAAAADw/2IbDwsgAUQAAAAAAADwv2ENAiABRAAAAAAAAPA/YQRAIAAPCyABRAAAAAAAAAAAYQRARAAAAAAAAPA/DwsLIAC9IgunIQcgC0IgiKciBkH/////B3EhBCABvSILQiCIpyIDQf////8HcSIFIAunIghyRQRARAAAAAAAAPA/DwtBASAIQQAgBUGAgMD/B0YbQQEgBUGAgMD/B0tBASAHQQAgBEGAgMD/B0YbIARBgIDA/wdKGxsbBEAgACABoA8LIAZBAEgEfyAFQYCAgJoETwR/QQIFIAVBgIDA/wNPBH9BAiAIIAUgBUEUdkH/B2siAkEUSiIJGyIKQTRBFCAJGyACayICdiIJQQFxa0EAIAogCSACdEYbBUEACwsFQQALIQIgCEUEQCAFQYCAwP8HRgRAIAcgBEGAgMD/A2tyBEAgBEGAgMD/A04EQCABRAAAAAAAAAAAIANBAE4bDwVEAAAAAAAAAAAgAZogA0EAThsPCwAFRAAAAAAAAPh/DwsACyAFQYCAwP8DRgRAIANBAE4EQCAADwsMAwsgA0GAgICABEYNASADQYCAgP8DRgRAIAZBAE4EQCAAnw8LCwsgAJkhDCAHRQRAQQEgBEGAgMD/A0YgBEGAgMD/B0ZBASAEGxsEQEQAAAAAAADwPyAMoyAMIANBAEgbIQAgBkEASAR8IAIgBEGAgMD/A2tyBHwgAJogACACQQFGGwUgACAAoSIAIACjCwUgAAsPCwsgBkEASAR8IAJFBEAgACAAoSIAIACjDwtEAAAAAAAA8L9EAAAAAAAA8D8gAkEBRhsFRAAAAAAAAPA/CyEOIAVBgICAjwRLBHwgBUGAgMCfBEsEQCAEQf//v/8DTARARAAAAAAAAPB/RAAAAAAAAAAAIANBAEgbDwsgBEGAgMD/A04EQEQAAAAAAADwf0QAAAAAAAAAACADQQBKGw8LCyAEQf//v/8DSARAIA5EnHUAiDzkN36iRJx1AIg85Dd+oiAORFnz+MIfbqUBokRZ8/jCH26lAaIgA0EASBsPCyAEQYCAwP8DSgRAIA5EnHUAiDzkN36iRJx1AIg85Dd+oiAORFnz+MIfbqUBokRZ8/jCH26lAaIgA0EAShsPCyAMRAAAAAAAAPA/oSIARAAAAGBHFfc/oiIMIABERN9d+AuuVD6iIAAgAKJEAAAAAAAA4D8gAERVVVVVVVXVPyAARAAAAAAAANA/oqGioaJE/oIrZUcV9z+ioSINoL1CgICAgHCDvyEAIA0gACAMoaEFIARBgIDAAEgEfyAMRAAAAAAAAEBDoiIMvUIgiKchBEFLBUEACyAEQRR1Qf8Ha2ohAyAEQf//P3EiAkGAgMD/A3IhBCACQY6xDkwEf0EABSACQfrsLkgEf0EBBSADQQFqIQMgBEGAgEBqIQRBAAsLIQIgDL1C/////w+DIASsQiCGhL8iD0QAAAAAAAD4P0QAAAAAAADwPyACGyIQoSISRAAAAAAAAPA/IA8gEKCjIhOiIg29QoCAgIBwg78iDCAMoiERIAwgEUQAAAAAAAAIQKAgDSANoiIAIACiIAAgACAAIAAgAETvTkVKKH7KP6JEZdvJk0qGzT+gokQBQR2pYHTRP6CiRE0mj1FVVdU/oKJE/6tv27Zt2z+gokQDMzMzMzPjP6CiIBMgEiAMIARBAXVBgICAgAJyQYCAIGogAkESdGqsQiCGvyIAoqEgDCAPIAAgEKGhoqGiIg8gDCANoKKgIgygvUKAgICAcIO/IgCiIhAgDyAAoiAMIABEAAAAAAAACEChIBGhoSANoqAiDKC9QoCAgIBwg78iAEQAAADgCcfuP6IiDSAARPUBWxTgLz6+oiAMIAAgEKGhRP0DOtwJx+4/oqBEBtDPQ+v9TD5EAAAAAAAAAAAgAhugIgygRAAAAEADuOI/RAAAAAAAAAAAIAIbIg+gIAO3IhCgvUKAgICAcIO/IQAgDCAAIBChIA+hIA2hoQshDCABIAG9QoCAgIBwg78iDaEgAKIgASAMoqAiASANIACiIgCgIgy9IgunIQMgC0IgiKciAkGAgMCEBE4EQCADIAJBgIDAhARrciABRP6CK2VHFZc8oCAMIAChZHINAwUgAkH/////B3FBgJjDhARPQQAgAyACQYCYw4R8a3IgASAMIAChZXIbDQQLIAJB/////wdxIgRBFHZB/wdrIQVBACEDIAECfCAEQYCAgP8DSgRAAnwgAkGAgMAAIAVBAWp1aiIEQf////8HcUEUdkH/B2shBUEAIARB//8/cUGAgMAAckEUIAVrdSIDayADIAJBAEgbIQMgACAEQf//PyAFdUF/c3GsQiCGv6ELIQALIAALoL1CgICAgHCDvyIMRAAAAABDLuY/oiINIAEgDCAAoaFE7zn6/kIu5j+iIAxEOWyoDGFcIL6ioCIMoCIAIACiIQEgDkQAAAAAAADwPyAAIAAgASABIAEgASABRNCkvnJpN2Y+okTxa9LFQb27vqCiRCzeJa9qVhE/oKJEk72+FmzBZr+gokQ+VVVVVVXFP6CioSIBoiABRAAAAAAAAABAoaMgDCAAIA2hoSIBIAAgAaKgoSAAoaEiAL1CIIinIANBFHRqIgJBFHVBAEwEfCADIgJB/wdKBHwgAEQAAAAAAADgf6IhACACQf8HayICQf8HSgR8IAJB/wdrIgJB/wcgAkH/B0gbIQIgAEQAAAAAAADgf6IFIAALBSACQYJ4SAR8IABEAAAAAAAAYAOiIQAgAkHJB2oiAkGCeEgEfCACQckHaiICQYJ4IAJBgnhKGyECIABEAAAAAAAAYAOiBSAACwUgAAsLIAKsQv8HfEI0hr+iBSAAvUL/////D4MgAqxCIIaEvwuiDwsgACAAog8LRAAAAAAAAPA/IACjDwsgDkScdQCIPOQ3fqJEnHUAiDzkN36iDwsgDkRZ8/jCH26lAaJEWfP4wh9upQGiC9QFAwJ/AX4EfCAAvSIDQiCIpyIBQR92IQIgAUH/////B3EiAUH7w6T/A00EQCABQYCAwPIDSQRAIAAPCyAAIAAgAKIiBSAAoiAFIAUgBUR9/rFX4x3HPqJE1WHBGaABKr+gokSm+BARERGBP6AgBSAFIAWioiAFRHzVz1o62eU9okTrnCuK5uVavqCioKJESVVVVVVVxb+goqAPCyABQYCAwP8HTwRAIAAgAKEPCwJ/IANCIIinQf////8HcSIBQfvD5IkESQRAAnwgAUEUdiICIAAgAESDyMltMF/kP6KeIgVEAABAVPsh+T+ioSIAIAVEMWNiGmG00D2iIgahIgS9QiCIp0EUdkH/D3FrQRBLBEACfCAFRHNwAy6KGaM7oiAAIAAgBUQAAGAaYbTQPaIiBqEiAKEgBqGhIQYgAiAAIAahIgS9QiCIp0EUdkH/D3FrQTFLBHwgBUTBSSAlmoN7OaIgACAAIAVEAAAALooZozuiIgahIgChIAahoSEGIAAgBqEFIAQLCyEECyAECySRAiAAIAShIAahJJICIAWqDAELQQAgAxAFIgFrIAEgAhsLIQIjkQIhBSOSAiEGIAJBAXEEfEQAAAAAAADwPyAFIAWiIgBEAAAAAAAA4D+iIgShIgdEAAAAAAAA8D8gB6EgBKEgACAAIAAgAESQFcsZoAH6PqJEd1HBFmzBVr+gokRMVVVVVVWlP6CiIAAgAKIiBCAEoiAAIABE1DiIvun6qL2iRMSxtL2e7iE+oKJErVKcgE9+kr6goqCiIAUgBqKhoKAFIAUgBaIiACAFoiEEIAUgACAGRAAAAAAAAOA/oiAEIAAgAER9/rFX4x3HPqJE1WHBGaABKr+gokSm+BARERGBP6AgACAAIACioiAARHzVz1o62eU9okTrnCuK5uVavqCioKKhoiAGoSAERElVVVVVVcW/oqGhCyIAmiAAIAJBAnEbCxIAIAAoAgQgAUECdGogAjgCAAuTCAIFfwl8IAJBAWohDCADQQFqIQ1EAAAAAAAA8D8gBqMhECAEIAWiIgVEz/dT46Wb9j+iRAAAAAAAACRAoBAGRAAAAAAAABBAokRcj8L1KFwnQKAhFCAFRAIrhxbZzvE/okQAAAAAAAAcQKAQBkQAAAAAAAAIQKJECtejcD2KIUCgIRIgBUTufD81XrrzP6JEAAAAAAAACECgEAZEAAAAAAAACECiRBSuR+F6FCVAoCETIAVEQmDl0CLb7T+iRAAAAAAAABRAoBAGRAAAAAAAABBAokR7FK5H4fomQKAhFSMAJIoBIwEkiwEjAiSMASMDJI0BIwQkjgEjBSSPASMGJJABIwckkQEjCCSSASMJJJMBA0AgCiANSARAQQAhCQNAIAkgDEgEQCAJtyACt6MiBCAEoEQAAAAAAADwP6EiBiAGoiAHoiAHoiAKtyADt6MiBCAEoEQAAAAAAADwP6EiDyAPoiAIoiAIoqCfJAogAQRAIAm3IAK3RAAAAAAAAOA/omFBACAKtyADt0QAAAAAAADgP6JhGwRARAAAAAAAAAAAJAsFIA8gCKIgBiAHohAIIgREAAAAAAAAAABjBHwgBEQYLURU+yEZQKAFIAQLJAsLIAZEAAAAAAAA4D+iIAeiRAAAAAAAAOA/oCQMIA9EAAAAAAAA4L+iIAiiRAAAAAAAAOA/oCQNI4oBJAAjiwEkASOMASQCI40BJAMjjgEkBCOPASQFI5ABJAYjkQEkByOSASQII5MBJAkQAQsgBkQAAAAAAADgP6IgB6JEAAAAAAAA8D8jASMCIwoiBCAEoEQAAAAAAADwP6EQCRAJoyIOokQAAAAAAADgP6AjA6EjBaMjA6AhBCAPRAAAAAAAAOC/oiAIoiAOokQAAAAAAADgP6AjBKEjBqMjBKAhDiMARAAAAAAAAAAAYgRAAnwgBCMARHnpJjEIrGw/oiAFRB1aZDvfT9U/oiAQIAYgFKIiESAPIBWiIhahoqAQCqKgIQQgDiMARHnpJjEIrGw/oiAFRAAAAAAAANg/oiAQIAYgE6IgDyASoqCioRAGoqAhDiAEIwBEeekmMQisbD+iIAVEf2q8dJMY6D+iIBAgBiASoiAPIBOioaKhEAaioCEEIA4jAER56SYxCKxsP6IgBURmZmZmZmbqP6IgECARIBagoqAQCqKgCyEOCyAEIwOhIQQgDiMEoSEGIwkQBiEPIAQjCRAKIg6iIAYgD6KgIwSgIwihRAAAAAAAAOA/oSAIo0QAAAAAAADgP6AhESAAIAsgBCAPoiAGIA6ioSMDoCMHoUQAAAAAAADgP6EgB6NEAAAAAAAA4D+gthALIAAgC0EBaiARthALIAtBAmohCyAJQQFqIQkMAQsLIApBAWohCgwBCwsLogEAIw4klAEjDySVASMQJJYBIxEklwEjEiSYASMTJJkBIxQkmgEjFSSbASMWJJwBIxcknQEjGCSeASMZJJ8BIxokoAEjGyShASMcJKIBIx0kowEjHiSkASMfJKUBIyAkpgEjISSnASMiJKgBIyMkqQEjJCSqASMlJKsBIyYkrAEjJyStASMoJK4BIykkrwEjKiSwASMrJLEBIywksgEjLSSzAQuiAQAjlAEkDiOVASQPI5YBJBAjlwEkESOYASQSI5kBJBMjmgEkFCObASQVI5wBJBYjnQEkFyOeASQYI58BJBkjoAEkGiOhASQbI6IBJBwjowEkHSOkASQeI6UBJB8jpgEkICOnASQhI6gBJCIjqQEkIyOqASQkI6sBJCUjrAEkJiOtASQnI64BJCgjrwEkKSOwASQqI7EBJCsjsgEkLCOzASQtCyoAIy4ktAEjLyS1ASMwJLYBIzEktwEjMiS4ASMzJLkBIzQkugEjNSS7AQsqACO0ASQuI7UBJC8jtgEkMCO3ASQxI7gBJDIjuQEkMyO6ASQ0I7sBJDULawAjNiS8ASM3JL0BIzgkvgEjOSS/ASM6JMABIzskwQEjPCTCASM9JMMBIz4kxAEjPyTFASNAJMYBI0EkxwEjQiTIASNDJMkBI0QkygEjRSTLASNGJMwBI0ckzQEjSCTOASNJJM8BI0ok0AELawAjvAEkNiO9ASQ3I74BJDgjvwEkOSPAASQ6I8EBJDsjwgEkPCPDASQ9I8QBJD4jxQEkPyPGASRAI8cBJEEjyAEkQiPJASRDI8oBJEQjywEkRSPMASRGI80BJEcjzgEkSCPPASRJI9ABJEoLawAjSyTRASNMJNIBI00k0wEjTiTUASNPJNUBI1Ak1gEjUSTXASNSJNgBI1Mk2QEjVCTaASNVJNsBI1Yk3AEjVyTdASNYJN4BI1kk3wEjWiTgASNbJOEBI1wk4gEjXSTjASNeJOQBI18k5QELawAj0QEkSyPSASRMI9MBJE0j1AEkTiPVASRPI9YBJFAj1wEkUSPYASRSI9kBJFMj2gEkVCPbASRVI9wBJFYj3QEkVyPeASRYI98BJFkj4AEkWiPhASRbI+IBJFwj4wEkXSPkASReI+UBJF8LawAjYCTmASNhJOcBI2Ik6AEjYyTpASNkJOoBI2Uk6wEjZiTsASNnJO0BI2gk7gEjaSTvASNqJPABI2sk8QEjbCTyASNtJPMBI24k9AEjbyT1ASNwJPYBI3Ek9wEjciT4ASNzJPkBI3Qk+gELawAj5gEkYCPnASRhI+gBJGIj6QEkYyPqASRkI+sBJGUj7AEkZiPtASRnI+4BJGgj7wEkaSPwASRqI/EBJGsj8gEkbCPzASRtI/QBJG4j9QEkbyP2ASRwI/cBJHEj+AEkciP5ASRzI/oBJHQLdQAjdST7ASN2JPwBI3ck/QEjeCT+ASN5JP8BI3okgAIjeySBAiN8JIICI30kgwIjfiSEAiN/JIUCI4ABJIYCI4EBJIcCI4IBJIgCI4MBJIkCI4QBJIoCI4UBJIsCI4YBJIwCI4cBJI0CI4gBJI4CI4kBJI8CC3UAI/sBJHUj/AEkdiP9ASR3I/4BJHgj/wEkeSOAAiR6I4ECJHsjggIkfCODAiR9I4QCJH4jhQIkfyOGAiSAASOHAiSBASOIAiSCASOJAiSDASOKAiSEASOLAiSFASOMAiSGASONAiSHASOOAiSIASOPAiSJAQsIAEHMCiSQAgsLvAIDAEGMCAsvLAAAAAEAAAAAAAAAAQAAABwAAABJAG4AdgBhAGwAaQBkACAAbABlAG4AZwB0AGgAQbwICzk8AAAAAQAAAAAAAAABAAAAJgAAAH4AbABpAGIALwBhAHIAcgBhAHkAYgB1AGYAZgBlAHIALgB0AHMAQYAJC8ABboP5ogAAAADRVyf8KRVETpmVYtvA3TT1q2NR/kGQQzw6biS3YcW73uouSQbg0k1CHOsd/hyS0Qn1NYLoPqcpsSZwnOmERLsuOdaROUF+X7SLX4Sc9DlTg/+X+B87KPm9ixEv7w+YBd7PfjZtH20KWmY/Rk+3Ccsnx7ondS3qX573OQc9e/Hl67Ff+2vqklKKRjADVghdjR8gvM/wq2t7/GGR46kdNvSaX4WZZQgb5l6A2P+NQGigFFcVBgYxJ3NN\";\n\nmodule.exports = () => data;\n","/* eslint-disable */\ndefine([], function () {\n  \"use strict;\";\n\n  var pmap = {\n    baseVals: {\n      gammaadj: 1.25,\n      wave_g: 0.5,\n      mv_x: 12.0,\n      warpscale: 1.0,\n      brighten: 0.0,\n      mv_y: 9.0,\n      wave_scale: 1.0,\n      echo_alpha: 0.0,\n      additivewave: 0.0,\n      sx: 1.0,\n      sy: 1.0,\n      warp: 0.01,\n      red_blue: 0.0,\n      wave_mode: 0.0,\n      wave_brighten: 0.0,\n      wrap: 0.0,\n      zoomexp: 1.0,\n      fshader: 0.0,\n      wave_r: 0.5,\n      echo_zoom: 1.0,\n      wave_smoothing: 0.75,\n      warpanimspeed: 1.0,\n      wave_dots: 0.0,\n      wave_x: 0.5,\n      wave_y: 0.5,\n      zoom: 1.0,\n      solarize: 0.0,\n      modwavealphabyvolume: 0.0,\n      dx: 0.0,\n      cx: 0.5,\n      dy: 0.0,\n      darken_center: 0.0,\n      cy: 0.5,\n      invert: 0.0,\n      bmotionvectorson: 0.0,\n      rot: 0.0,\n      modwavealphaend: 0.95,\n      wave_mystery: -0.2,\n      decay: 0.9,\n      wave_a: 1.0,\n      wave_b: 0.5,\n      rating: 5.0,\n      modwavealphastart: 0.75,\n      darken: 0.0,\n      echo_orient: 0.0,\n      ib_r: 0.5,\n      ib_g: 0.5,\n      ib_b: 0.5,\n      ib_a: 0.0,\n      ib_size: 0.0,\n      ob_r: 0.5,\n      ob_g: 0.5,\n      ob_b: 0.5,\n      ob_a: 0.0,\n      ob_size: 0.0,\n      mv_dx: 0.0,\n      mv_dy: 0.0,\n      mv_a: 0.0,\n      mv_r: 0.5,\n      mv_g: 0.5,\n      mv_b: 0.5,\n      mv_l: 0.0,\n    },\n    init_eqs: function () {\n      var m = {};\n      return m;\n    },\n    frame_eqs: function (m) {\n      m.rkeys = [\"warp\"];\n      m.zoom = 1.01 + 0.02 * m.treb_att;\n      m.warp = 0.15 + 0.25 * m.bass_att;\n      return m;\n    },\n    pixel_eqs: function (m) {\n      m.warp = m.warp + m.rad * 0.15;\n      return m;\n    },\n    waves: [\n      {\n        baseVals: {\n          a: 1.0,\n          enabled: 0.0,\n          b: 1.0,\n          g: 1.0,\n          scaling: 1.0,\n          samples: 512.0,\n          additive: 0.0,\n          usedots: 0.0,\n          spectrum: 0.0,\n          r: 1.0,\n          smoothing: 0.5,\n          thick: 0.0,\n          sep: 0.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n        point_eqs: \"\",\n      },\n      {\n        baseVals: {\n          a: 1.0,\n          enabled: 0.0,\n          b: 1.0,\n          g: 1.0,\n          scaling: 1.0,\n          samples: 512.0,\n          additive: 0.0,\n          usedots: 0.0,\n          spectrum: 0.0,\n          r: 1.0,\n          smoothing: 0.5,\n          thick: 0.0,\n          sep: 0.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n        point_eqs: \"\",\n      },\n      {\n        baseVals: {\n          a: 1.0,\n          enabled: 0.0,\n          b: 1.0,\n          g: 1.0,\n          scaling: 1.0,\n          samples: 512.0,\n          additive: 0.0,\n          usedots: 0.0,\n          spectrum: 0.0,\n          r: 1.0,\n          smoothing: 0.5,\n          thick: 0.0,\n          sep: 0.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n        point_eqs: \"\",\n      },\n      {\n        baseVals: {\n          a: 1.0,\n          enabled: 0.0,\n          b: 1.0,\n          g: 1.0,\n          scaling: 1.0,\n          samples: 512.0,\n          additive: 0.0,\n          usedots: 0.0,\n          spectrum: 0.0,\n          r: 1.0,\n          smoothing: 0.5,\n          thick: 0.0,\n          sep: 0.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n        point_eqs: \"\",\n      },\n    ],\n    shapes: [\n      {\n        baseVals: {\n          r2: 0.0,\n          a: 1.0,\n          enabled: 0.0,\n          b: 0.0,\n          tex_ang: 0.0,\n          thickoutline: 0.0,\n          g: 0.0,\n          textured: 0.0,\n          g2: 1.0,\n          tex_zoom: 1.0,\n          additive: 0.0,\n          border_a: 0.1,\n          border_b: 1.0,\n          b2: 0.0,\n          a2: 0.0,\n          r: 1.0,\n          border_g: 1.0,\n          rad: 0.1,\n          x: 0.5,\n          y: 0.5,\n          ang: 0.0,\n          sides: 4.0,\n          border_r: 1.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n      },\n      {\n        baseVals: {\n          r2: 0.0,\n          a: 1.0,\n          enabled: 0.0,\n          b: 0.0,\n          tex_ang: 0.0,\n          thickoutline: 0.0,\n          g: 0.0,\n          textured: 0.0,\n          g2: 1.0,\n          tex_zoom: 1.0,\n          additive: 0.0,\n          border_a: 0.1,\n          border_b: 1.0,\n          b2: 0.0,\n          a2: 0.0,\n          r: 1.0,\n          border_g: 1.0,\n          rad: 0.1,\n          x: 0.5,\n          y: 0.5,\n          ang: 0.0,\n          sides: 4.0,\n          border_r: 1.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n      },\n      {\n        baseVals: {\n          r2: 0.0,\n          a: 1.0,\n          enabled: 0.0,\n          b: 0.0,\n          tex_ang: 0.0,\n          thickoutline: 0.0,\n          g: 0.0,\n          textured: 0.0,\n          g2: 1.0,\n          tex_zoom: 1.0,\n          additive: 0.0,\n          border_a: 0.1,\n          border_b: 1.0,\n          b2: 0.0,\n          a2: 0.0,\n          r: 1.0,\n          border_g: 1.0,\n          rad: 0.1,\n          x: 0.5,\n          y: 0.5,\n          ang: 0.0,\n          sides: 4.0,\n          border_r: 1.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n      },\n      {\n        baseVals: {\n          r2: 0.0,\n          a: 1.0,\n          enabled: 0.0,\n          b: 0.0,\n          tex_ang: 0.0,\n          thickoutline: 0.0,\n          g: 0.0,\n          textured: 0.0,\n          g2: 1.0,\n          tex_zoom: 1.0,\n          additive: 0.0,\n          border_a: 0.1,\n          border_b: 1.0,\n          b2: 0.0,\n          a2: 0.0,\n          r: 1.0,\n          border_g: 1.0,\n          rad: 0.1,\n          x: 0.5,\n          y: 0.5,\n          ang: 0.0,\n          sides: 4.0,\n          border_r: 1.0,\n        },\n        init_eqs: function (m) {\n          m.rkeys = [];\n          return m;\n        },\n        frame_eqs: function (m) {\n          return m;\n        },\n      },\n    ],\n    warp:\n      \"shader_body {\\nret = texture2D(sampler_main, uv).rgb;\\nret -= 0.004;\\n}\\n\",\n    comp:\n      \"shader_body {\\nret = texture2D(sampler_main, uv).rgb;\\nret *= hue_shader;\\n}\\n\",\n  };\n\n  return pmap;\n});\n/* eslint-enable */\n","// Runtime header offsets\nconst ID_OFFSET = -8;\nconst SIZE_OFFSET = -4;\n\n// Runtime ids\nconst ARRAYBUFFER_ID = 0;\nconst STRING_ID = 1;\n// const ARRAYBUFFERVIEW_ID = 2;\n\n// Runtime type information\nconst ARRAYBUFFERVIEW = 1 << 0;\nconst ARRAY = 1 << 1;\nconst STATICARRAY = 1 << 2;\n// const SET = 1 << 3;\n// const MAP = 1 << 4;\nconst VAL_ALIGN_OFFSET = 6;\n// const VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\nconst VAL_SIGNED = 1 << 11;\nconst VAL_FLOAT = 1 << 12;\n// const VAL_NULLABLE = 1 << 13;\nconst VAL_MANAGED = 1 << 14;\n// const KEY_ALIGN_OFFSET = 15;\n// const KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\n// const KEY_SIGNED = 1 << 20;\n// const KEY_FLOAT = 1 << 21;\n// const KEY_NULLABLE = 1 << 22;\n// const KEY_MANAGED = 1 << 23;\n\n// Array(BufferView) layout\nconst ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\nconst ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\nconst ARRAYBUFFERVIEW_DATALENGTH_OFFSET = 8;\nconst ARRAYBUFFERVIEW_SIZE = 12;\nconst ARRAY_LENGTH_OFFSET = 12;\nconst ARRAY_SIZE = 16;\n\nconst BIGINT = typeof BigUint64Array !== \"undefined\";\nconst THIS = Symbol();\n\nconst STRING_DECODE_THRESHOLD = 32;\nconst decoder = new TextDecoder(\"utf-16le\");\n\n/** Gets a string from an U32 and an U16 view on a memory. */\nfunction getStringImpl(buffer, ptr) {\n  const len = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2] >>> 1;\n  const arr = new Uint16Array(buffer, ptr, len);\n  if (len <= STRING_DECODE_THRESHOLD) {\n    return String.fromCharCode.apply(String, arr);\n  }\n  return decoder.decode(arr);\n}\n\n/** Prepares the base module prior to instantiation. */\nfunction preInstantiate(imports) {\n  const extendedExports = {};\n\n  function getString(memory, ptr) {\n    if (!memory) return \"<yet unknown>\";\n    return getStringImpl(memory.buffer, ptr);\n  }\n\n  // add common imports used by stdlib for convenience\n  const env = (imports.env = imports.env || {});\n  env.abort = env.abort || function abort(msg, file, line, colm) {\n    const memory = extendedExports.memory || env.memory; // prefer exported, otherwise try imported\n    throw Error(`abort: ${getString(memory, msg)} at ${getString(memory, file)}:${line}:${colm}`);\n  };\n  env.trace = env.trace || function trace(msg, n, ...args) {\n    const memory = extendedExports.memory || env.memory;\n    console.log(`trace: ${getString(memory, msg)}${n ? \" \" : \"\"}${args.slice(0, n).join(\", \")}`);\n  };\n  env.seed = env.seed || Date.now;\n  imports.Math = imports.Math || Math;\n  imports.Date = imports.Date || Date;\n\n  return extendedExports;\n}\n\n/** Prepares the final module once instantiation is complete. */\nfunction postInstantiate(extendedExports, instance) {\n  const exports = instance.exports;\n  const memory = exports.memory;\n  const table = exports.table;\n  const __new = exports[\"__new\"];\n  const __retain = exports[\"__retain\"];\n  const __rtti_base = exports[\"__rtti_base\"] || ~0; // oob if not present\n\n  /** Gets the runtime type info for the given id. */\n  function getInfo(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = U32[__rtti_base >>> 2];\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2];\n  }\n\n  /** Gets and validate runtime type info for the given id for array like objects */\n  function getArrayInfo(id) {\n    const info = getInfo(id);\n    if (!(info & (ARRAYBUFFERVIEW | ARRAY | STATICARRAY))) throw Error(`not an array: ${id}, flags=${info}`);\n    return info;\n  }\n\n  /** Gets the runtime base id for the given id. */\n  function getBase(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = U32[__rtti_base >>> 2];\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2 + 1];\n  }\n\n  /** Gets the runtime alignment of a collection's values. */\n  function getValueAlign(info) {\n    return 31 - Math.clz32((info >>> VAL_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Gets the runtime alignment of a collection's keys. */\n  // function getKeyAlign(info) {\n  //   return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\n  // }\n\n  /** Allocates a new string in the module's memory and returns its retained pointer. */\n  function __newString(str) {\n    if (str == null) return 0;\n    const length = str.length;\n    const ptr = __new(length << 1, STRING_ID);\n    const U16 = new Uint16Array(memory.buffer);\n    for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\n    return ptr;\n  }\n\n  extendedExports.__newString = __newString;\n\n  /** Reads a string from the module's memory by its pointer. */\n  function __getString(ptr) {\n    if (!ptr) return null;\n    const buffer = memory.buffer;\n    const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\n    if (id !== STRING_ID) throw Error(`not a string: ${ptr}`);\n    return getStringImpl(buffer, ptr);\n  }\n\n  extendedExports.__getString = __getString;\n\n  /** Gets the view matching the specified alignment, signedness and floatness. */\n  function getView(alignLog2, signed, float) {\n    const buffer = memory.buffer;\n    if (float) {\n      switch (alignLog2) {\n        case 2: return new Float32Array(buffer);\n        case 3: return new Float64Array(buffer);\n      }\n    } else {\n      switch (alignLog2) {\n        case 0: return new (signed ? Int8Array : Uint8Array)(buffer);\n        case 1: return new (signed ? Int16Array : Uint16Array)(buffer);\n        case 2: return new (signed ? Int32Array : Uint32Array)(buffer);\n        case 3: return new (signed ? BigInt64Array : BigUint64Array)(buffer);\n      }\n    }\n    throw Error(`unsupported align: ${alignLog2}`);\n  }\n\n  /** Allocates a new array in the module's memory and returns its retained pointer. */\n  function __newArray(id, values) {\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    const length = values.length;\n    const buf = __new(length << align, info & STATICARRAY ? id : ARRAYBUFFER_ID);\n    let result;\n    if (info & STATICARRAY) {\n      result = buf;\n    } else {\n      const arr = __new(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\n      const U32 = new Uint32Array(memory.buffer);\n      U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = __retain(buf);\n      U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATALENGTH_OFFSET >>> 2] = length << align;\n      if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\n      result = arr;\n    }\n    const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\n    if (info & VAL_MANAGED) {\n      for (let i = 0; i < length; ++i) view[(buf >>> align) + i] = __retain(values[i]);\n    } else {\n      view.set(values, buf >>> align);\n    }\n    return result;\n  }\n\n  extendedExports.__newArray = __newArray;\n\n  /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\n  function __getArrayView(arr) {\n    const U32 = new Uint32Array(memory.buffer);\n    const id = U32[arr + ID_OFFSET >>> 2];\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    let buf = info & STATICARRAY\n      ? arr\n      : U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    const length = info & ARRAY\n      ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2]\n      : U32[buf + SIZE_OFFSET >>> 2] >>> align;\n    return getView(align, info & VAL_SIGNED, info & VAL_FLOAT).subarray(buf >>>= align, buf + length);\n  }\n\n  extendedExports.__getArrayView = __getArrayView;\n\n  /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\n  function __getArray(arr) {\n    const input = __getArrayView(arr);\n    const len = input.length;\n    const out = new Array(len);\n    for (let i = 0; i < len; i++) out[i] = input[i];\n    return out;\n  }\n\n  extendedExports.__getArray = __getArray;\n\n  /** Copies an ArrayBuffer's value from the module's memory. */\n  function __getArrayBuffer(ptr) {\n    const buffer = memory.buffer;\n    const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\n    return buffer.slice(ptr, ptr + length);\n  }\n\n  extendedExports.__getArrayBuffer = __getArrayBuffer;\n\n  /** Copies a typed array's values from the module's memory. */\n  function getTypedArray(Type, alignLog2, ptr) {\n    return new Type(getTypedArrayView(Type, alignLog2, ptr));\n  }\n\n  /** Gets a live view on a typed array's values in the module's memory. */\n  function getTypedArrayView(Type, alignLog2, ptr) {\n    const buffer = memory.buffer;\n    const U32 = new Uint32Array(buffer);\n    const bufPtr = U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    return new Type(buffer, bufPtr, U32[bufPtr + SIZE_OFFSET >>> 2] >>> alignLog2);\n  }\n\n  /** Attach a set of get TypedArray and View functions to the exports. */\n  function attachTypedArrayFunctions(ctor, name, align) {\n    extendedExports[`__get${name}`] = getTypedArray.bind(null, ctor, align);\n    extendedExports[`__get${name}View`] = getTypedArrayView.bind(null, ctor, align);\n  }\n\n  [\n    Int8Array,\n    Uint8Array,\n    Uint8ClampedArray,\n    Int16Array,\n    Uint16Array,\n    Int32Array,\n    Uint32Array,\n    Float32Array,\n    Float64Array\n  ].forEach(ctor => {\n    attachTypedArrayFunctions(ctor, ctor.name, 31 - Math.clz32(ctor.BYTES_PER_ELEMENT));\n  });\n\n  if (BIGINT) {\n    [BigUint64Array, BigInt64Array].forEach(ctor => {\n      attachTypedArrayFunctions(ctor, ctor.name.slice(3), 3);\n    });\n  }\n\n  /** Tests whether an object is an instance of the class represented by the specified base id. */\n  function __instanceof(ptr, baseId) {\n    const U32 = new Uint32Array(memory.buffer);\n    let id = U32[ptr + ID_OFFSET >>> 2];\n    if (id <= U32[__rtti_base >>> 2]) {\n      do {\n        if (id == baseId) return true;\n        id = getBase(id);\n      } while (id);\n    }\n    return false;\n  }\n\n  extendedExports.__instanceof = __instanceof;\n\n  // Pull basic exports to extendedExports so code in preInstantiate can use them\n  extendedExports.memory = extendedExports.memory || memory;\n  extendedExports.table  = extendedExports.table  || table;\n\n  // Demangle exports and provide the usual utility on the prototype\n  return demangle(exports, extendedExports);\n}\n\nfunction isResponse(src) {\n  return typeof Response !== \"undefined\" && src instanceof Response;\n}\n\nfunction isModule(src) {\n  return src instanceof WebAssembly.Module;\n}\n\n/** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\nexport async function instantiate(source, imports = {}) {\n  if (isResponse(source = await source)) return instantiateStreaming(source, imports);\n  const module = isModule(source) ? source : await WebAssembly.compile(source);\n  const extended = preInstantiate(imports);\n  const instance = await WebAssembly.instantiate(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\nexport function instantiateSync(source, imports = {}) {\n  const module = isModule(source) ? source : new WebAssembly.Module(source);\n  const extended = preInstantiate(imports);\n  const instance = new WebAssembly.Instance(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\nexport async function instantiateStreaming(source, imports = {}) {\n  if (!WebAssembly.instantiateStreaming) {\n    return instantiate(\n      isResponse(source = await source)\n        ? source.arrayBuffer()\n        : source,\n      imports\n    );\n  }\n  const extended = preInstantiate(imports);\n  const result = await WebAssembly.instantiateStreaming(source, imports);\n  const exports = postInstantiate(extended, result.instance);\n  return { ...result, exports };\n}\n\n/** Demangles an AssemblyScript module's exports to a friendly object structure. */\nexport function demangle(exports, extendedExports = {}) {\n  const setArgumentsLength = exports[\"__argumentsLength\"]\n    ? length => { exports[\"__argumentsLength\"].value = length; }\n    : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || (() => { /* nop */ });\n  for (let internalName in exports) {\n    if (!Object.prototype.hasOwnProperty.call(exports, internalName)) continue;\n    const elem = exports[internalName];\n    let parts = internalName.split(\".\");\n    let curr = extendedExports;\n    while (parts.length > 1) {\n      let part = parts.shift();\n      if (!Object.prototype.hasOwnProperty.call(curr, part)) curr[part] = {};\n      curr = curr[part];\n    }\n    let name = parts[0];\n    let hash = name.indexOf(\"#\");\n    if (hash >= 0) {\n      const className = name.substring(0, hash);\n      const classElem = curr[className];\n      if (typeof classElem === \"undefined\" || !classElem.prototype) {\n        const ctor = function(...args) {\n          return ctor.wrap(ctor.prototype.constructor(0, ...args));\n        };\n        ctor.prototype = {\n          valueOf() { return this[THIS]; }\n        };\n        ctor.wrap = function(thisValue) {\n          return Object.create(ctor.prototype, { [THIS]: { value: thisValue, writable: false } });\n        };\n        if (classElem) Object.getOwnPropertyNames(classElem).forEach(name =>\n          Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name))\n        );\n        curr[className] = ctor;\n      }\n      name = name.substring(hash + 1);\n      curr = curr[className].prototype;\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          let getter = exports[internalName.replace(\"set:\", \"get:\")];\n          let setter = exports[internalName.replace(\"get:\", \"set:\")];\n          Object.defineProperty(curr, name, {\n            get() { return getter(this[THIS]); },\n            set(value) { setter(this[THIS], value); },\n            enumerable: true\n          });\n        }\n      } else {\n        if (name === 'constructor') {\n          (curr[name] = (...args) => {\n            setArgumentsLength(args.length);\n            return elem(...args);\n          }).original = elem;\n        } else { // instance method\n          (curr[name] = function(...args) { // !\n            setArgumentsLength(args.length);\n            return elem(this[THIS], ...args);\n          }).original = elem;\n        }\n      }\n    } else {\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          Object.defineProperty(curr, name, {\n            get: exports[internalName.replace(\"set:\", \"get:\")],\n            set: exports[internalName.replace(\"get:\", \"set:\")],\n            enumerable: true\n          });\n        }\n      } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\n        (curr[name] = (...args) => {\n          setArgumentsLength(args.length);\n          return elem(...args);\n        }).original = elem;\n      } else {\n        curr[name] = elem;\n      }\n    }\n  }\n  return extendedExports;\n}\n\nexport default {\n  instantiate,\n  instantiateSync,\n  instantiateStreaming,\n  demangle\n};\n","export default class FFT {\n  constructor(samplesIn, samplesOut, equalize = false) {\n    this.samplesIn = samplesIn;\n    this.samplesOut = samplesOut;\n    this.equalize = equalize;\n    this.NFREQ = samplesOut * 2;\n\n    if (this.equalize) {\n      this.initEqualizeTable();\n    }\n    this.initBitRevTable();\n    this.initCosSinTable();\n  }\n\n  initEqualizeTable() {\n    this.equalizeArr = new Float32Array(this.samplesOut);\n    const invHalfNFREQ = 1.0 / this.samplesOut;\n    for (let i = 0; i < this.samplesOut; i++) {\n      this.equalizeArr[i] =\n        -0.02 * Math.log((this.samplesOut - i) * invHalfNFREQ);\n    }\n  }\n\n  /* eslint-disable no-bitwise */\n  initBitRevTable() {\n    this.bitrevtable = new Uint16Array(this.NFREQ);\n\n    for (let i = 0; i < this.NFREQ; i++) {\n      this.bitrevtable[i] = i;\n    }\n\n    let j = 0;\n    for (let i = 0; i < this.NFREQ; i++) {\n      if (j > i) {\n        const temp = this.bitrevtable[i];\n        this.bitrevtable[i] = this.bitrevtable[j];\n        this.bitrevtable[j] = temp;\n      }\n\n      let m = this.NFREQ >> 1;\n\n      while (m >= 1 && j >= m) {\n        j -= m;\n        m >>= 1;\n      }\n\n      j += m;\n    }\n  }\n\n  initCosSinTable() {\n    let dftsize = 2;\n    let tabsize = 0;\n    while (dftsize <= this.NFREQ) {\n      tabsize += 1;\n      dftsize <<= 1;\n    }\n\n    this.cossintable = [new Float32Array(tabsize), new Float32Array(tabsize)];\n\n    dftsize = 2;\n    let i = 0;\n    while (dftsize <= this.NFREQ) {\n      const theta = (-2.0 * Math.PI) / dftsize;\n      this.cossintable[0][i] = Math.cos(theta);\n      this.cossintable[1][i] = Math.sin(theta);\n      i += 1;\n      dftsize <<= 1;\n    }\n  }\n\n  timeToFrequencyDomain(waveDataIn) {\n    const real = new Float32Array(this.NFREQ);\n    const imag = new Float32Array(this.NFREQ);\n\n    for (let i = 0; i < this.NFREQ; i++) {\n      const idx = this.bitrevtable[i];\n      if (idx < this.samplesIn) {\n        real[i] = waveDataIn[idx];\n      } else {\n        real[i] = 0;\n      }\n      imag[i] = 0;\n    }\n\n    let dftsize = 2;\n    let t = 0;\n    while (dftsize <= this.NFREQ) {\n      const wpr = this.cossintable[0][t];\n      const wpi = this.cossintable[1][t];\n      let wr = 1.0;\n      let wi = 0.0;\n      const hdftsize = dftsize >> 1;\n\n      for (let m = 0; m < hdftsize; m++) {\n        for (let i = m; i < this.NFREQ; i += dftsize) {\n          const j = i + hdftsize;\n          const tempr = wr * real[j] - wi * imag[j];\n          const tempi = wr * imag[j] + wi * real[j];\n          real[j] = real[i] - tempr;\n          imag[j] = imag[i] - tempi;\n          real[i] += tempr;\n          imag[i] += tempi;\n        }\n\n        const wtemp = wr;\n        wr = wtemp * wpr - wi * wpi;\n        wi = wi * wpr + wtemp * wpi;\n      }\n\n      dftsize <<= 1;\n      t += 1;\n    }\n\n    const spectralDataOut = new Float32Array(this.samplesOut);\n    if (this.equalize) {\n      for (let i = 0; i < this.samplesOut; i++) {\n        spectralDataOut[i] =\n          this.equalizeArr[i] *\n          Math.sqrt(real[i] * real[i] + imag[i] * imag[i]);\n      }\n    } else {\n      for (let i = 0; i < this.samplesOut; i++) {\n        spectralDataOut[i] = Math.sqrt(real[i] * real[i] + imag[i] * imag[i]);\n      }\n    }\n\n    return spectralDataOut;\n  }\n  /* eslint-enable no-bitwise */\n}\n","import FFT from \"./fft\";\n\nexport default class AudioProcessor {\n  constructor(context) {\n    this.numSamps = 512;\n    this.fftSize = this.numSamps * 2;\n\n    this.fft = new FFT(this.fftSize, 512, true);\n\n    if (context) {\n      this.audioContext = context;\n      this.audible = context.createDelay();\n\n      this.analyser = context.createAnalyser();\n      this.analyser.smoothingTimeConstant = 0.0;\n      this.analyser.fftSize = this.fftSize;\n\n      this.audible.connect(this.analyser);\n\n      // Split channels\n      this.analyserL = context.createAnalyser();\n      this.analyserL.smoothingTimeConstant = 0.0;\n      this.analyserL.fftSize = this.fftSize;\n\n      this.analyserR = context.createAnalyser();\n      this.analyserR.smoothingTimeConstant = 0.0;\n      this.analyserR.fftSize = this.fftSize;\n\n      this.splitter = context.createChannelSplitter(2);\n\n      this.audible.connect(this.splitter);\n      this.splitter.connect(this.analyserL, 0);\n      this.splitter.connect(this.analyserR, 1);\n    }\n\n    // Initialised once as typed arrays\n    // Used for webaudio API raw (time domain) samples. 0 -> 255\n    this.timeByteArray = new Uint8Array(this.fftSize);\n    this.timeByteArrayL = new Uint8Array(this.fftSize);\n    this.timeByteArrayR = new Uint8Array(this.fftSize);\n\n    // Signed raw samples shifted to -128 -> 127\n    this.timeArray = new Int8Array(this.fftSize);\n    this.timeByteArraySignedL = new Int8Array(this.fftSize);\n    this.timeByteArraySignedR = new Int8Array(this.fftSize);\n\n    // Temporary array for smoothing\n    this.tempTimeArrayL = new Int8Array(this.fftSize);\n    this.tempTimeArrayR = new Int8Array(this.fftSize);\n\n    // Undersampled from this.fftSize to this.numSamps\n    this.timeArrayL = new Int8Array(this.numSamps);\n    this.timeArrayR = new Int8Array(this.numSamps);\n  }\n\n  sampleAudio() {\n    this.analyser.getByteTimeDomainData(this.timeByteArray);\n    this.analyserL.getByteTimeDomainData(this.timeByteArrayL);\n    this.analyserR.getByteTimeDomainData(this.timeByteArrayR);\n    this.processAudio();\n  }\n  updateAudio(timeByteArray, timeByteArrayL, timeByteArrayR) {\n    this.timeByteArray.set(timeByteArray);\n    this.timeByteArrayL.set(timeByteArrayL);\n    this.timeByteArrayR.set(timeByteArrayR);\n    this.processAudio();\n  }\n  /* eslint-disable no-bitwise */\n  processAudio() {\n    for (let i = 0, j = 0, lastIdx = 0; i < this.fftSize; i++) {\n      // Shift Unsigned to Signed about 0\n      this.timeArray[i] = this.timeByteArray[i] - 128;\n      this.timeByteArraySignedL[i] = this.timeByteArrayL[i] - 128;\n      this.timeByteArraySignedR[i] = this.timeByteArrayR[i] - 128;\n\n      this.tempTimeArrayL[i] =\n        0.5 *\n        (this.timeByteArraySignedL[i] + this.timeByteArraySignedL[lastIdx]);\n      this.tempTimeArrayR[i] =\n        0.5 *\n        (this.timeByteArraySignedR[i] + this.timeByteArraySignedR[lastIdx]);\n\n      // Undersampled\n      if (i % 2 === 0) {\n        this.timeArrayL[j] = this.tempTimeArrayL[i];\n        this.timeArrayR[j] = this.tempTimeArrayR[i];\n        j += 1;\n      }\n\n      lastIdx = i;\n    }\n\n    // Use full width samples for the FFT\n    this.freqArray = this.fft.timeToFrequencyDomain(this.timeArray);\n    this.freqArrayL = this.fft.timeToFrequencyDomain(this.timeByteArraySignedL);\n    this.freqArrayR = this.fft.timeToFrequencyDomain(this.timeByteArraySignedR);\n  }\n\n  connectAudio(audionode) {\n    audionode.connect(this.audible);\n  }\n\n  disconnectAudio(audionode) {\n    audionode.disconnect(this.audible);\n  }\n  /* eslint-enable no-bitwise */\n}\n","export default class AudioLevels {\n  constructor(audio) {\n    this.audio = audio;\n\n    let sampleRate;\n    if (this.audio.audioContext) {\n      sampleRate = this.audio.audioContext.sampleRate;\n    } else {\n      sampleRate = 44100;\n    }\n\n    const bucketHz = sampleRate / this.audio.fftSize;\n\n    const bassLow = Math.clamp(\n      Math.round(20 / bucketHz) - 1,\n      0,\n      this.audio.numSamps - 1\n    );\n    const bassHigh = Math.clamp(\n      Math.round(320 / bucketHz) - 1,\n      0,\n      this.audio.numSamps - 1\n    );\n    const midHigh = Math.clamp(\n      Math.round(2800 / bucketHz) - 1,\n      0,\n      this.audio.numSamps - 1\n    );\n    const trebHigh = Math.clamp(\n      Math.round(11025 / bucketHz) - 1,\n      0,\n      this.audio.numSamps - 1\n    );\n\n    this.starts = [bassLow, bassHigh, midHigh];\n    this.stops = [bassHigh, midHigh, trebHigh];\n\n    this.val = new Float32Array(3);\n    this.imm = new Float32Array(3);\n    this.att = new Float32Array(3);\n    this.avg = new Float32Array(3);\n    this.longAvg = new Float32Array(3);\n\n    this.att.fill(1);\n    this.avg.fill(1);\n    this.longAvg.fill(1);\n  }\n\n  /* eslint-disable camelcase */\n  get bass() {\n    return this.val[0];\n  }\n\n  get bass_att() {\n    return this.att[0];\n  }\n\n  get mid() {\n    return this.val[1];\n  }\n\n  get mid_att() {\n    return this.att[1];\n  }\n\n  get treb() {\n    return this.val[2];\n  }\n\n  get treb_att() {\n    return this.att[2];\n  }\n  /* eslint-enable camelcase */\n\n  static isFiniteNumber(num) {\n    return Number.isFinite(num) && !Number.isNaN(num);\n  }\n\n  static adjustRateToFPS(rate, baseFPS, FPS) {\n    return rate ** (baseFPS / FPS);\n  }\n\n  updateAudioLevels(fps, frame) {\n    if (this.audio.freqArray.length > 0) {\n      let effectiveFPS = fps;\n      if (!AudioLevels.isFiniteNumber(effectiveFPS) || effectiveFPS < 15) {\n        effectiveFPS = 15;\n      } else if (effectiveFPS > 144) {\n        effectiveFPS = 144;\n      }\n\n      // Clear for next loop\n      this.imm.fill(0);\n      for (let i = 0; i < 3; i++) {\n        for (let j = this.starts[i]; j < this.stops[i]; j++) {\n          this.imm[i] += this.audio.freqArray[j];\n        }\n      }\n\n      for (let i = 0; i < 3; i++) {\n        let rate;\n        if (this.imm[i] > this.avg[i]) {\n          rate = 0.2;\n        } else {\n          rate = 0.5;\n        }\n        rate = AudioLevels.adjustRateToFPS(rate, 30.0, effectiveFPS);\n        this.avg[i] = this.avg[i] * rate + this.imm[i] * (1 - rate);\n\n        if (frame < 50) {\n          rate = 0.9;\n        } else {\n          rate = 0.992;\n        }\n        rate = AudioLevels.adjustRateToFPS(rate, 30.0, effectiveFPS);\n        this.longAvg[i] = this.longAvg[i] * rate + this.imm[i] * (1 - rate);\n\n        if (this.longAvg[i] < 0.001) {\n          this.val[i] = 1.0;\n          this.att[i] = 1.0;\n        } else {\n          this.val[i] = this.imm[i] / this.longAvg[i];\n          this.att[i] = this.avg[i] / this.longAvg[i];\n        }\n      }\n    }\n  }\n}\n","export default class Utils {\n  static atan2(x, y) {\n    let a = Math.atan2(x, y);\n    if (a < 0) {\n      a += 2 * Math.PI;\n    }\n    return a;\n  }\n\n  static cloneVars(vars) {\n    return Object.assign({}, vars);\n  }\n\n  static range(start, end) {\n    if (end === undefined) {\n      return [...Array(start).keys()];\n    }\n\n    return Array.from({ length: end - start }, (_, i) => i + start);\n  }\n\n  static pick(obj, keys) {\n    const newObj = {};\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      newObj[key] = obj[key] || 0;\n    }\n    return newObj;\n  }\n\n  static omit(obj, keys) {\n    const newObj = Object.assign({}, obj);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      delete newObj[key];\n    }\n    return newObj;\n  }\n\n  static setWasm(wasmGlobals, obj, keys) {\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      // eslint-disable-next-line no-param-reassign\n      wasmGlobals[key].value = obj[key];\n    }\n  }\n\n  static pickWasm(wasmGlobals, keys) {\n    const newObj = {};\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      newObj[key] = wasmGlobals[key].value;\n    }\n    return newObj;\n  }\n}\n","import Utils from \"../utils\";\n\nexport default class PresetEquationRunner {\n  constructor(preset, globalVars, opts) {\n    this.preset = preset;\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\n    this.regs = Utils.range(100).map((x) => {\n      if (x < 10) {\n        return `reg0${x}`;\n      }\n      return `reg${x}`;\n    });\n\n    this.initializeEquations(globalVars);\n  }\n\n  initializeEquations(globalVars) {\n    this.runVertEQs = this.preset.pixel_eqs !== \"\";\n\n    this.mdVSQInit = null;\n    this.mdVSRegs = null;\n    this.mdVSFrame = null;\n    this.mdVSUserKeys = null;\n    this.mdVSFrameMap = null;\n\n    this.mdVSShapes = null;\n    this.mdVSUserKeysShapes = null;\n    this.mdVSFrameMapShapes = null;\n\n    this.mdVSWaves = null;\n    this.mdVSUserKeysWaves = null;\n    this.mdVSFrameMapWaves = null;\n\n    this.mdVSQAfterFrame = null;\n\n    this.gmegabuf = new Array(1048576).fill(0);\n\n    const mdVSBase = {\n      frame: globalVars.frame,\n      time: globalVars.time,\n      fps: globalVars.fps,\n      bass: globalVars.bass,\n      bass_att: globalVars.bass_att,\n      mid: globalVars.mid,\n      mid_att: globalVars.mid_att,\n      treb: globalVars.treb,\n      treb_att: globalVars.treb_att,\n      meshx: this.mesh_width,\n      meshy: this.mesh_height,\n      aspectx: this.invAspectx,\n      aspecty: this.invAspecty,\n      pixelsx: this.texsizeX,\n      pixelsy: this.texsizeY,\n      gmegabuf: this.gmegabuf,\n    };\n\n    this.mdVS = Object.assign({}, this.preset.baseVals, mdVSBase);\n\n    this.mdVS.megabuf = new Array(1048576).fill(0);\n    this.mdVS.rand_start = new Float32Array([\n      Math.random(),\n      Math.random(),\n      Math.random(),\n      Math.random(),\n    ]);\n    this.mdVS.rand_preset = new Float32Array([\n      Math.random(),\n      Math.random(),\n      Math.random(),\n      Math.random(),\n    ]);\n\n    const nonUserKeys = this.qs.concat(this.regs, Object.keys(this.mdVS));\n\n    const mdVSAfterInit = this.preset.init_eqs(Utils.cloneVars(this.mdVS));\n\n    // qs need to be initialized to there init values every frame\n    this.mdVSQInit = Utils.pick(mdVSAfterInit, this.qs);\n    this.mdVSRegs = Utils.pick(mdVSAfterInit, this.regs);\n    const initUserVars = Utils.pick(\n      mdVSAfterInit,\n      Object.keys(Utils.omit(mdVSAfterInit, nonUserKeys))\n    );\n    initUserVars.megabuf = mdVSAfterInit.megabuf;\n    initUserVars.gmegabuf = mdVSAfterInit.gmegabuf;\n\n    this.mdVSFrame = this.preset.frame_eqs(\n      Object.assign({}, this.mdVS, this.mdVSQInit, this.mdVSRegs, initUserVars)\n    );\n\n    // user vars need to be copied between frames\n    this.mdVSUserKeys = Object.keys(Utils.omit(this.mdVSFrame, nonUserKeys));\n\n    // Determine vars to carry over between frames\n    this.mdVSFrameMap = Utils.pick(this.mdVSFrame, this.mdVSUserKeys);\n\n    // qs for shapes\n    this.mdVSQAfterFrame = Utils.pick(this.mdVSFrame, this.qs);\n    this.mdVSRegs = Utils.pick(this.mdVSFrame, this.regs);\n\n    this.mdVSWaves = [];\n    this.mdVSTWaveInits = [];\n    this.mdVSUserKeysWaves = [];\n    this.mdVSFrameMapWaves = [];\n    if (this.preset.waves && this.preset.waves.length > 0) {\n      for (let i = 0; i < this.preset.waves.length; i++) {\n        const wave = this.preset.waves[i];\n        const baseVals = wave.baseVals;\n        if (baseVals.enabled !== 0) {\n          let mdVSWave = Object.assign({}, baseVals, mdVSBase);\n\n          const nonUserWaveKeys = this.qs.concat(\n            this.ts,\n            this.regs,\n            Object.keys(mdVSWave)\n          );\n\n          Object.assign(mdVSWave, this.mdVSQAfterFrame, this.mdVSRegs);\n          mdVSWave.megabuf = new Array(1048576).fill(0);\n\n          if (wave.init_eqs) {\n            mdVSWave = wave.init_eqs(mdVSWave);\n\n            this.mdVSRegs = Utils.pick(mdVSWave, this.regs);\n\n            // base vals need to be reset\n            Object.assign(mdVSWave, baseVals);\n          }\n          this.mdVSWaves.push(mdVSWave);\n          this.mdVSTWaveInits.push(Utils.pick(mdVSWave, this.ts));\n\n          this.mdVSUserKeysWaves.push(\n            Object.keys(Utils.omit(mdVSWave, nonUserWaveKeys))\n          );\n          this.mdVSFrameMapWaves.push(\n            Utils.pick(mdVSWave, this.mdVSUserKeysWaves[i])\n          );\n        } else {\n          this.mdVSWaves.push({});\n          this.mdVSTWaveInits.push({});\n\n          this.mdVSUserKeysWaves.push([]);\n          this.mdVSFrameMapWaves.push({});\n        }\n      }\n    }\n\n    this.mdVSShapes = [];\n    this.mdVSTShapeInits = [];\n    this.mdVSUserKeysShapes = [];\n    this.mdVSFrameMapShapes = [];\n    if (this.preset.shapes && this.preset.shapes.length > 0) {\n      for (let i = 0; i < this.preset.shapes.length; i++) {\n        const shape = this.preset.shapes[i];\n        const baseVals = shape.baseVals;\n        if (baseVals.enabled !== 0) {\n          let mdVSShape = Object.assign({}, baseVals, mdVSBase);\n\n          const nonUserShapeKeys = this.qs.concat(\n            this.ts,\n            this.regs,\n            Object.keys(mdVSShape)\n          );\n\n          Object.assign(mdVSShape, this.mdVSQAfterFrame, this.mdVSRegs);\n          mdVSShape.megabuf = new Array(1048576).fill(0);\n\n          if (shape.init_eqs) {\n            mdVSShape = shape.init_eqs(mdVSShape);\n\n            this.mdVSRegs = Utils.pick(mdVSShape, this.regs);\n\n            // base vals need to be reset\n            Object.assign(mdVSShape, baseVals);\n          }\n          this.mdVSShapes.push(mdVSShape);\n          this.mdVSTShapeInits.push(Utils.pick(mdVSShape, this.ts));\n\n          this.mdVSUserKeysShapes.push(\n            Object.keys(Utils.omit(mdVSShape, nonUserShapeKeys))\n          );\n          this.mdVSFrameMapShapes.push(\n            Utils.pick(mdVSShape, this.mdVSUserKeysShapes[i])\n          );\n        } else {\n          this.mdVSShapes.push({});\n          this.mdVSTShapeInits.push({});\n\n          this.mdVSUserKeysShapes.push([]);\n          this.mdVSFrameMapShapes.push({});\n        }\n      }\n    }\n  }\n\n  updatePreset(preset, globalVars) {\n    this.preset = preset;\n    this.initializeEquations(globalVars);\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n  }\n\n  runFrameEquations(globalVars) {\n    this.mdVSFrame = Object.assign(\n      {},\n      this.mdVS,\n      this.mdVSQInit,\n      this.mdVSFrameMap,\n      globalVars\n    );\n\n    this.mdVSFrame = this.preset.frame_eqs(this.mdVSFrame);\n\n    this.mdVSFrameMap = Utils.pick(this.mdVSFrame, this.mdVSUserKeys);\n    this.mdVSQAfterFrame = Utils.pick(this.mdVSFrame, this.qs);\n\n    return this.mdVSFrame;\n  }\n\n  runPixelEquations(mdVSVertex) {\n    return this.preset.pixel_eqs(mdVSVertex);\n  }\n\n  runShapeFrameEquations(shapeIdx, mdVSShape) {\n    return this.preset.shapes[shapeIdx].frame_eqs(mdVSShape);\n  }\n\n  runWaveFrameEquations(waveIdx, mdVSWave) {\n    return this.preset.waves[waveIdx].frame_eqs(mdVSWave);\n  }\n\n  runWavePointEquations(waveIdx, mdVSWaveFrame) {\n    return this.preset.waves[waveIdx].point_eqs(mdVSWaveFrame);\n  }\n}\n","import Utils from \"../utils\";\n\nexport default class PresetEquationRunnerWASM {\n  constructor(preset, globalVars, opts) {\n    this.preset = preset;\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\n    this.regs = Utils.range(100).map((x) => {\n      if (x < 10) {\n        return `reg0${x}`;\n      }\n      return `reg${x}`;\n    });\n\n    this.globalKeys = [\n      \"frame\",\n      \"time\",\n      \"fps\",\n      \"bass\",\n      \"bass_att\",\n      \"mid\",\n      \"mid_att\",\n      \"treb\",\n      \"treb_att\",\n      \"meshx\",\n      \"meshy\",\n      \"aspectx\",\n      \"aspecty\",\n      \"pixelsx\",\n      \"pixelsy\",\n    ];\n\n    this.frameKeys = [\n      \"decay\",\n      \"wave_a\",\n      \"wave_r\",\n      \"wave_g\",\n      \"wave_b\",\n      \"wave_x\",\n      \"wave_y\",\n      \"wave_scale\",\n      \"wave_smoothing\",\n      \"wave_mode\",\n      \"old_wave_mode\",\n      \"wave_mystery\",\n      \"ob_size\",\n      \"ob_r\",\n      \"ob_g\",\n      \"ob_b\",\n      \"ob_a\",\n      \"ib_size\",\n      \"ib_r\",\n      \"ib_g\",\n      \"ib_b\",\n      \"ib_a\",\n      \"mv_x\",\n      \"mv_y\",\n      \"mv_dx\",\n      \"mv_dy\",\n      \"mv_l\",\n      \"mv_r\",\n      \"mv_g\",\n      \"mv_b\",\n      \"mv_a\",\n      \"echo_zoom\",\n      \"echo_alpha\",\n      \"echo_orient\",\n      \"wave_dots\",\n      \"wave_thick\",\n      \"additivewave\",\n      \"wave_brighten\",\n      \"modwavealphabyvolume\",\n      \"modwavealphastart\",\n      \"modwavealphaend\",\n      \"darken_center\",\n      \"gammaadj\",\n      \"warp\",\n      \"warpanimspeed\",\n      \"warpscale\",\n      \"zoom\",\n      \"zoomexp\",\n      \"rot\",\n      \"cx\",\n      \"cy\",\n      \"dx\",\n      \"dy\",\n      \"sx\",\n      \"sy\",\n      \"fshader\",\n      \"wrap\",\n      \"invert\",\n      \"brighten\",\n      \"darken\",\n      \"solarize\",\n      \"bmotionvectorson\",\n      \"b1n\",\n      \"b2n\",\n      \"b3n\",\n      \"b1x\",\n      \"b2x\",\n      \"b3x\",\n      \"b1ed\",\n    ];\n\n    this.waveFrameKeys = [\n      \"samples\",\n      \"sep\",\n      \"scaling\",\n      \"spectrum\",\n      \"smoothing\",\n      \"r\",\n      \"g\",\n      \"b\",\n      \"a\",\n    ];\n\n    this.waveFrameInputKeys = [\"samples\", \"r\", \"g\", \"b\", \"a\"];\n\n    this.initializeEquations(globalVars);\n  }\n\n  getQVars(pool) {\n    return Utils.pickWasm(this.preset.globalPools[pool], this.qs);\n  }\n\n  getTVars(pool) {\n    return Utils.pickWasm(this.preset.globalPools[pool], this.ts);\n  }\n\n  initializeEquations(globalVars) {\n    this.runVertEQs = !!this.preset.pixel_eqs;\n\n    this.mdVSQInit = null;\n    this.mdVSQAfterFrame = null;\n\n    const mdVSBase = {\n      frame: globalVars.frame,\n      time: globalVars.time,\n      fps: globalVars.fps,\n      bass: globalVars.bass,\n      bass_att: globalVars.bass_att,\n      mid: globalVars.mid,\n      mid_att: globalVars.mid_att,\n      treb: globalVars.treb,\n      treb_att: globalVars.treb_att,\n      meshx: this.mesh_width,\n      meshy: this.mesh_height,\n      aspectx: this.invAspectx,\n      aspecty: this.invAspecty,\n      pixelsx: this.texsizeX,\n      pixelsy: this.texsizeY,\n    };\n\n    this.mdVS = Object.assign({}, this.preset.baseVals, mdVSBase);\n\n    // eslint-disable-next-line max-len\n    Utils.setWasm(\n      this.preset.globalPools.perFrame,\n      this.mdVS,\n      Object.keys(this.mdVS)\n    );\n\n    this.rand_start = new Float32Array([\n      Math.random(),\n      Math.random(),\n      Math.random(),\n      Math.random(),\n    ]);\n    this.rand_preset = new Float32Array([\n      Math.random(),\n      Math.random(),\n      Math.random(),\n      Math.random(),\n    ]);\n\n    this.preset.init_eqs();\n\n    // qs need to be initialized to there init values every frame\n    this.mdVSQInit = this.getQVars(\"perFrame\");\n\n    this.preset.frame_eqs();\n\n    this.mdVSQAfterFrame = this.getQVars(\"perFrame\");\n\n    this.mdVSTWaveInits = [];\n    if (this.preset.waves && this.preset.waves.length > 0) {\n      for (let i = 0; i < this.preset.waves.length; i++) {\n        const wave = this.preset.waves[i];\n        const baseVals = wave.baseVals;\n        if (baseVals.enabled !== 0) {\n          // eslint-disable-next-line max-len\n          Utils.setWasm(\n            this.preset.globalPools[`wavePerFrame${i}`],\n            baseVals,\n            Object.keys(baseVals)\n          );\n          if (wave.init_eqs) {\n            wave.init_eqs();\n\n            // base vals need to be reset\n            // eslint-disable-next-line max-len\n            Utils.setWasm(\n              this.preset.globalPools[`wavePerFrame${i}`],\n              baseVals,\n              Object.keys(baseVals)\n            );\n          }\n          this.mdVSTWaveInits.push(this.getTVars(`wavePerFrame${i}`));\n        } else {\n          this.mdVSTWaveInits.push({});\n        }\n      }\n    }\n\n    this.mdVSTShapeInits = [];\n    if (this.preset.shapes && this.preset.shapes.length > 0) {\n      for (let i = 0; i < this.preset.shapes.length; i++) {\n        const shape = this.preset.shapes[i];\n        const baseVals = shape.baseVals;\n        if (baseVals.enabled !== 0) {\n          // eslint-disable-next-line max-len\n          Utils.setWasm(\n            this.preset.globalPools[`shapePerFrame${i}`],\n            baseVals,\n            Object.keys(baseVals)\n          );\n          if (shape.init_eqs) {\n            shape.init_eqs();\n\n            // base vals need to be reset\n            // eslint-disable-next-line max-len\n            Utils.setWasm(\n              this.preset.globalPools[`shapePerFrame${i}`],\n              baseVals,\n              Object.keys(baseVals)\n            );\n          }\n          this.mdVSTShapeInits.push(this.getTVars(`shapePerFrame${i}`));\n        } else {\n          this.mdVSTShapeInits.push({});\n        }\n      }\n    }\n  }\n\n  updatePreset(preset, globalVars) {\n    this.preset = preset;\n    this.initializeEquations(globalVars);\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n  }\n\n  runFrameEquations(globalVars) {\n    Utils.setWasm(this.preset.globalPools.perFrame, this.mdVS, this.frameKeys);\n    Utils.setWasm(this.preset.globalPools.perFrame, this.mdVSQInit, this.qs);\n    Utils.setWasm(\n      this.preset.globalPools.perFrame,\n      globalVars,\n      this.globalKeys\n    );\n\n    this.preset.frame_eqs();\n    this.preset.save_qs();\n\n    this.mdVSQAfterFrame = this.getQVars(\"perFrame\");\n\n    // eslint-disable-next-line max-len\n    const mdVSFrame = Utils.pickWasm(this.preset.globalPools.perFrame, [\n      ...this.frameKeys,\n      ...this.globalKeys,\n    ]);\n    mdVSFrame.rand_preset = this.rand_preset;\n    mdVSFrame.rand_start = this.rand_start;\n\n    return mdVSFrame;\n  }\n\n  /* eslint-disable max-len */\n  runWaveFrameEquations(waveIdx, globalVars) {\n    const baseVals = this.preset.waves[waveIdx].baseVals;\n    Utils.setWasm(\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\n      baseVals,\n      this.waveFrameInputKeys\n    );\n    Utils.setWasm(\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\n      this.mdVSQAfterFrame,\n      this.qs\n    );\n    Utils.setWasm(\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\n      this.mdVSTWaveInits[waveIdx],\n      this.ts\n    );\n    Utils.setWasm(\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\n      globalVars,\n      this.globalKeys\n    );\n    this.preset.waves[waveIdx].frame_eqs();\n    return Utils.pickWasm(\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\n      this.waveFrameKeys\n    );\n  }\n  /* eslint-enable max-len */\n}\n","const lineMatcher = /uniform sampler2D sampler_(?:.+?);/g;\nconst samplerMatcher = /uniform sampler2D sampler_(.+?);/;\n\nexport default class ShaderUtils {\n  static getShaderParts(t) {\n    const sbIndex = t.indexOf(\"shader_body\");\n    if (t && sbIndex > -1) {\n      const beforeShaderBody = t.substring(0, sbIndex);\n      const afterShaderBody = t.substring(sbIndex);\n      const firstCurly = afterShaderBody.indexOf(\"{\");\n      const lastCurly = afterShaderBody.lastIndexOf(\"}\");\n      const shaderBody = afterShaderBody.substring(firstCurly + 1, lastCurly);\n      return [beforeShaderBody, shaderBody];\n    }\n\n    return [\"\", t];\n  }\n\n  static getFragmentFloatPrecision(gl) {\n    if (\n      gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision >\n      0\n    ) {\n      return \"highp\";\n    } else if (\n      gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT)\n        .precision > 0\n    ) {\n      return \"mediump\";\n    }\n    return \"lowp\";\n  }\n\n  static getUserSamplers(text) {\n    const samplers = [];\n    const lineMatches = text.match(lineMatcher);\n    if (lineMatches && lineMatches.length > 0) {\n      for (let i = 0; i < lineMatches.length; i++) {\n        const samplerMatches = lineMatches[i].match(samplerMatcher);\n        if (samplerMatches && samplerMatches.length > 0) {\n          const sampler = samplerMatches[1];\n          samplers.push({ sampler });\n        }\n      }\n    }\n    return samplers;\n  }\n}\n","export default class WaveUtils {\n  /* eslint-disable no-param-reassign */\n  static smoothWave(positions, positionsSmoothed, nVertsIn, zCoord = false) {\n    const c1 = -0.15;\n    const c2 = 1.15;\n    const c3 = 1.15;\n    const c4 = -0.15;\n    const invSum = 1.0 / (c1 + c2 + c3 + c4);\n\n    let j = 0;\n\n    let iBelow = 0;\n    let iAbove;\n    let iAbove2 = 1;\n    for (let i = 0; i < nVertsIn - 1; i++) {\n      iAbove = iAbove2;\n      iAbove2 = Math.min(nVertsIn - 1, i + 2);\n\n      for (let k = 0; k < 3; k++) {\n        positionsSmoothed[j * 3 + k] = positions[i * 3 + k];\n      }\n\n      if (zCoord) {\n        for (let k = 0; k < 3; k++) {\n          positionsSmoothed[(j + 1) * 3 + k] =\n            (c1 * positions[iBelow * 3 + k] +\n              c2 * positions[i * 3 + k] +\n              c3 * positions[iAbove * 3 + k] +\n              c4 * positions[iAbove2 * 3 + k]) *\n            invSum;\n        }\n      } else {\n        for (let k = 0; k < 2; k++) {\n          positionsSmoothed[(j + 1) * 3 + k] =\n            (c1 * positions[iBelow * 3 + k] +\n              c2 * positions[i * 3 + k] +\n              c3 * positions[iAbove * 3 + k] +\n              c4 * positions[iAbove2 * 3 + k]) *\n            invSum;\n        }\n        positionsSmoothed[(j + 1) * 3 + 2] = 0;\n      }\n\n      iBelow = i;\n      j += 2;\n    }\n\n    for (let k = 0; k < 3; k++) {\n      positionsSmoothed[j * 3 + k] = positions[(nVertsIn - 1) * 3 + k];\n    }\n  }\n\n  static smoothWaveAndColor(\n    positions,\n    colors,\n    positionsSmoothed,\n    colorsSmoothed,\n    nVertsIn,\n    zCoord = false\n  ) {\n    const c1 = -0.15;\n    const c2 = 1.15;\n    const c3 = 1.15;\n    const c4 = -0.15;\n    const invSum = 1.0 / (c1 + c2 + c3 + c4);\n\n    let j = 0;\n\n    let iBelow = 0;\n    let iAbove;\n    let iAbove2 = 1;\n    for (let i = 0; i < nVertsIn - 1; i++) {\n      iAbove = iAbove2;\n      iAbove2 = Math.min(nVertsIn - 1, i + 2);\n\n      for (let k = 0; k < 3; k++) {\n        positionsSmoothed[j * 3 + k] = positions[i * 3 + k];\n      }\n\n      if (zCoord) {\n        for (let k = 0; k < 3; k++) {\n          positionsSmoothed[(j + 1) * 3 + k] =\n            (c1 * positions[iBelow * 3 + k] +\n              c2 * positions[i * 3 + k] +\n              c3 * positions[iAbove * 3 + k] +\n              c4 * positions[iAbove2 * 3 + k]) *\n            invSum;\n        }\n      } else {\n        for (let k = 0; k < 2; k++) {\n          positionsSmoothed[(j + 1) * 3 + k] =\n            (c1 * positions[iBelow * 3 + k] +\n              c2 * positions[i * 3 + k] +\n              c3 * positions[iAbove * 3 + k] +\n              c4 * positions[iAbove2 * 3 + k]) *\n            invSum;\n        }\n        positionsSmoothed[(j + 1) * 3 + 2] = 0;\n      }\n\n      for (let k = 0; k < 4; k++) {\n        colorsSmoothed[j * 4 + k] = colors[i * 4 + k];\n        colorsSmoothed[(j + 1) * 4 + k] = colors[i * 4 + k];\n      }\n\n      iBelow = i;\n      j += 2;\n    }\n\n    for (let k = 0; k < 3; k++) {\n      positionsSmoothed[j * 3 + k] = positions[(nVertsIn - 1) * 3 + k];\n    }\n\n    for (let k = 0; k < 4; k++) {\n      colorsSmoothed[j * 4 + k] = colors[(nVertsIn - 1) * 4 + k];\n    }\n  }\n\n  /* eslint-enable no-param-reassign */\n}\n","import ShaderUtils from \"../shaders/shaderUtils\";\nimport WaveUtils from \"./waveUtils\";\n\nexport default class BasicWaveform {\n  constructor(gl, opts = {}) {\n    this.gl = gl;\n\n    const numAudioSamples = 512;\n    this.positions = new Float32Array(numAudioSamples * 3);\n    this.positions2 = new Float32Array(numAudioSamples * 3);\n    this.oldPositions = new Float32Array(numAudioSamples * 3);\n    this.oldPositions2 = new Float32Array(numAudioSamples * 3);\n    this.smoothedPositions = new Float32Array((numAudioSamples * 2 - 1) * 3);\n    this.smoothedPositions2 = new Float32Array((numAudioSamples * 2 - 1) * 3);\n    this.color = [0, 0, 0, 1];\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n\n    this.vertexBuf = this.gl.createBuffer();\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      in vec3 aPos;\n      uniform vec2 thickOffset;\n      void main(void) {\n        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      out vec4 fragColor;\n      uniform vec4 u_color;\n      void main(void) {\n        fragColor = u_color;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.aPosLoc = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\n\n    this.colorLoc = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\n    this.thickOffsetLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"thickOffset\"\n    );\n  }\n\n  static processWaveform(timeArray, mdVSFrame) {\n    const waveform = [];\n\n    const scale = mdVSFrame.wave_scale / 128.0;\n    const smooth = mdVSFrame.wave_smoothing;\n    const smooth2 = scale * (1.0 - smooth);\n\n    waveform.push(timeArray[0] * scale);\n    for (let i = 1; i < timeArray.length; i++) {\n      waveform.push(timeArray[i] * smooth2 + waveform[i - 1] * smooth);\n    }\n\n    return waveform;\n  }\n\n  generateWaveform(blending, blendProgress, timeArrayL, timeArrayR, mdVSFrame) {\n    let alpha = mdVSFrame.wave_a;\n    const vol = (mdVSFrame.bass + mdVSFrame.mid + mdVSFrame.treb) / 3.0;\n\n    if (vol > -0.01 && alpha > 0.001 && timeArrayL.length > 0) {\n      const waveL = BasicWaveform.processWaveform(timeArrayL, mdVSFrame);\n      const waveR = BasicWaveform.processWaveform(timeArrayR, mdVSFrame);\n\n      const newWaveMode = Math.floor(mdVSFrame.wave_mode) % 8;\n      const oldWaveMode = Math.floor(mdVSFrame.old_wave_mode) % 8;\n\n      const wavePosX = mdVSFrame.wave_x * 2.0 - 1.0;\n      const wavePosY = mdVSFrame.wave_y * 2.0 - 1.0;\n\n      this.numVert = 0;\n      this.oldNumVert = 0;\n\n      const its = blending && newWaveMode !== oldWaveMode ? 2 : 1;\n      for (let it = 0; it < its; it++) {\n        const waveMode = it === 0 ? newWaveMode : oldWaveMode;\n\n        let fWaveParam2 = mdVSFrame.wave_mystery;\n        if (\n          (waveMode === 0 || waveMode === 1 || waveMode === 4) &&\n          (fWaveParam2 < -1 || fWaveParam2 > 1)\n        ) {\n          fWaveParam2 = fWaveParam2 * 0.5 + 0.5;\n          fWaveParam2 -= Math.floor(fWaveParam2);\n          fWaveParam2 = Math.abs(fWaveParam2);\n          fWaveParam2 = fWaveParam2 * 2 - 1;\n        }\n\n        let numVert;\n        let positions;\n        let positions2;\n        if (it === 0) {\n          positions = this.positions;\n          positions2 = this.positions2;\n        } else {\n          positions = this.oldPositions;\n          positions2 = this.oldPositions2;\n        }\n\n        alpha = mdVSFrame.wave_a;\n        if (waveMode === 0) {\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          numVert = Math.floor(waveL.length / 2) + 1;\n          const numVertInv = 1.0 / (numVert - 1);\n          const sampleOffset = Math.floor((waveL.length - numVert) / 2);\n          for (let i = 0; i < numVert - 1; i++) {\n            let rad = 0.5 + 0.4 * waveR[i + sampleOffset] + fWaveParam2;\n            const ang = i * numVertInv * 2 * Math.PI + mdVSFrame.time * 0.2;\n\n            if (i < numVert / 10) {\n              let mix = i / (numVert * 0.1);\n              mix = 0.5 - 0.5 * Math.cos(mix * Math.PI);\n              const rad2 =\n                0.5 + 0.4 * waveR[i + numVert + sampleOffset] + fWaveParam2;\n              rad = (1.0 - mix) * rad2 + rad * mix;\n            }\n\n            positions[i * 3 + 0] =\n              rad * Math.cos(ang) * this.aspecty + wavePosX;\n            positions[i * 3 + 1] =\n              rad * Math.sin(ang) * this.aspectx + wavePosY;\n            positions[i * 3 + 2] = 0;\n          }\n\n          // connect the loop\n          positions[(numVert - 1) * 3 + 0] = positions[0];\n          positions[(numVert - 1) * 3 + 1] = positions[1];\n          positions[(numVert - 1) * 3 + 2] = 0;\n        } else if (waveMode === 1) {\n          alpha *= 1.25;\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          numVert = Math.floor(waveL.length / 2);\n          for (let i = 0; i < numVert; i++) {\n            const rad = 0.53 + 0.43 * waveR[i] + fWaveParam2;\n            const ang = waveL[i + 32] * 0.5 * Math.PI + mdVSFrame.time * 2.3;\n\n            positions[i * 3 + 0] =\n              rad * Math.cos(ang) * this.aspecty + wavePosX;\n            positions[i * 3 + 1] =\n              rad * Math.sin(ang) * this.aspectx + wavePosY;\n            positions[i * 3 + 2] = 0;\n          }\n        } else if (waveMode === 2) {\n          if (this.texsizeX < 1024) {\n            alpha *= 0.09;\n          } else if (this.texsizeX >= 1024 && this.texsizeX < 2048) {\n            alpha *= 0.11;\n          } else {\n            alpha *= 0.13;\n          }\n\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          numVert = waveL.length;\n          for (let i = 0; i < waveL.length; i++) {\n            positions[i * 3 + 0] = waveR[i] * this.aspecty + wavePosX;\n            positions[i * 3 + 1] =\n              waveL[(i + 32) % waveL.length] * this.aspectx + wavePosY;\n            positions[i * 3 + 2] = 0;\n          }\n        } else if (waveMode === 3) {\n          if (this.texsizeX < 1024) {\n            alpha *= 0.15;\n          } else if (this.texsizeX >= 1024 && this.texsizeX < 2048) {\n            alpha *= 0.22;\n          } else {\n            alpha *= 0.33;\n          }\n\n          alpha *= 1.3;\n          alpha *= mdVSFrame.treb * mdVSFrame.treb; // should be treb_imm\n\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          numVert = waveL.length;\n          for (let i = 0; i < waveL.length; i++) {\n            positions[i * 3 + 0] = waveR[i] * this.aspecty + wavePosX;\n            positions[i * 3 + 1] =\n              waveL[(i + 32) % waveL.length] * this.aspectx + wavePosY;\n            positions[i * 3 + 2] = 0;\n          }\n        } else if (waveMode === 4) {\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          numVert = waveL.length;\n          if (numVert > this.texsizeX / 3) {\n            numVert = Math.floor(this.texsizeX / 3);\n          }\n          const numVertInv = 1.0 / numVert;\n          const sampleOffset = Math.floor((waveL.length - numVert) / 2);\n\n          const w1 = 0.45 + 0.5 * (fWaveParam2 * 0.5 + 0.5);\n          const w2 = 1.0 - w1;\n          for (let i = 0; i < numVert; i++) {\n            let x =\n              2.0 * i * numVertInv +\n              (wavePosX - 1) +\n              waveR[(i + 25 + sampleOffset) % waveL.length] * 0.44;\n            let y = waveL[i + sampleOffset] * 0.47 + wavePosY;\n\n            // momentum\n            if (i > 1) {\n              x =\n                x * w2 +\n                w1 *\n                  (positions[(i - 1) * 3 + 0] * 2.0 -\n                    positions[(i - 2) * 3 + 0]);\n              y =\n                y * w2 +\n                w1 *\n                  (positions[(i - 1) * 3 + 1] * 2.0 -\n                    positions[(i - 2) * 3 + 1]);\n            }\n\n            positions[i * 3 + 0] = x;\n            positions[i * 3 + 1] = y;\n            positions[i * 3 + 2] = 0;\n          }\n        } else if (waveMode === 5) {\n          if (this.texsizeX < 1024) {\n            alpha *= 0.09;\n          } else if (this.texsizeX >= 1024 && this.texsizeX < 2048) {\n            alpha *= 0.11;\n          } else {\n            alpha *= 0.13;\n          }\n\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          const cosRot = Math.cos(mdVSFrame.time * 0.3);\n          const sinRot = Math.sin(mdVSFrame.time * 0.3);\n\n          numVert = waveL.length;\n          for (let i = 0; i < waveL.length; i++) {\n            const ioff = (i + 32) % waveL.length;\n            const x0 = waveR[i] * waveL[ioff] + waveL[i] * waveR[ioff];\n            const y0 = waveR[i] * waveR[i] - waveL[ioff] * waveL[ioff];\n\n            positions[i * 3 + 0] =\n              (x0 * cosRot - y0 * sinRot) * (this.aspecty + wavePosX);\n            positions[i * 3 + 1] =\n              (x0 * sinRot + y0 * cosRot) * (this.aspectx + wavePosY);\n            positions[i * 3 + 2] = 0;\n          }\n        } else if (waveMode === 6 || waveMode === 7) {\n          if (mdVSFrame.modwavealphabyvolume > 0) {\n            const alphaDiff =\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\n          }\n          alpha = Math.clamp(alpha, 0, 1);\n\n          numVert = Math.floor(waveL.length / 2);\n          if (numVert > this.texsizeX / 3) {\n            numVert = Math.floor(this.texsizeX / 3);\n          }\n          const sampleOffset = Math.floor((waveL.length - numVert) / 2);\n\n          const ang = Math.PI * 0.5 * fWaveParam2;\n          let dx = Math.cos(ang);\n          let dy = Math.sin(ang);\n\n          const edgex = [\n            wavePosX * Math.cos(ang + Math.PI * 0.5) - dx * 3.0,\n            wavePosX * Math.cos(ang + Math.PI * 0.5) + dx * 3.0,\n          ];\n          const edgey = [\n            wavePosX * Math.sin(ang + Math.PI * 0.5) - dy * 3.0,\n            wavePosX * Math.sin(ang + Math.PI * 0.5) + dy * 3.0,\n          ];\n\n          for (let i = 0; i < 2; i++) {\n            for (let j = 0; j < 4; j++) {\n              let t;\n              let bClip = false;\n\n              switch (j) {\n                case 0:\n                  if (edgex[i] > 1.1) {\n                    t = (1.1 - edgex[1 - i]) / (edgex[i] - edgex[1 - i]);\n                    bClip = true;\n                  }\n                  break;\n                case 1:\n                  if (edgex[i] < -1.1) {\n                    t = (-1.1 - edgex[1 - i]) / (edgex[i] - edgex[1 - i]);\n                    bClip = true;\n                  }\n                  break;\n                case 2:\n                  if (edgey[i] > 1.1) {\n                    t = (1.1 - edgey[1 - i]) / (edgey[i] - edgey[1 - i]);\n                    bClip = true;\n                  }\n                  break;\n                case 3:\n                  if (edgey[i] < -1.1) {\n                    t = (-1.1 - edgey[1 - i]) / (edgey[i] - edgey[1 - i]);\n                    bClip = true;\n                  }\n                  break;\n                default:\n              }\n\n              if (bClip) {\n                const dxi = edgex[i] - edgex[1 - i];\n                const dyi = edgey[i] - edgey[1 - i];\n                edgex[i] = edgex[1 - i] + dxi * t;\n                edgey[i] = edgey[1 - i] + dyi * t;\n              }\n            }\n          }\n\n          dx = (edgex[1] - edgex[0]) / numVert;\n          dy = (edgey[1] - edgey[0]) / numVert;\n\n          const ang2 = Math.atan2(dy, dx);\n          const perpDx = Math.cos(ang2 + Math.PI * 0.5);\n          const perpDy = Math.sin(ang2 + Math.PI * 0.5);\n\n          if (waveMode === 6) {\n            for (let i = 0; i < numVert; i++) {\n              const sample = waveL[i + sampleOffset];\n              positions[i * 3 + 0] = edgex[0] + dx * i + perpDx * 0.25 * sample;\n              positions[i * 3 + 1] = edgey[0] + dy * i + perpDy * 0.25 * sample;\n              positions[i * 3 + 2] = 0;\n            }\n          } else if (waveMode === 7) {\n            const sep = (wavePosY * 0.5 + 0.5) ** 2;\n            for (let i = 0; i < numVert; i++) {\n              const sample = waveL[i + sampleOffset];\n              positions[i * 3 + 0] =\n                edgex[0] + dx * i + perpDx * (0.25 * sample + sep);\n              positions[i * 3 + 1] =\n                edgey[0] + dy * i + perpDy * (0.25 * sample + sep);\n              positions[i * 3 + 2] = 0;\n            }\n\n            for (let i = 0; i < numVert; i++) {\n              const sample = waveR[i + sampleOffset];\n              positions2[i * 3 + 0] =\n                edgex[0] + dx * i + perpDx * (0.25 * sample - sep);\n              positions2[i * 3 + 1] =\n                edgey[0] + dy * i + perpDy * (0.25 * sample - sep);\n              positions2[i * 3 + 2] = 0;\n            }\n          }\n        }\n\n        if (it === 0) {\n          this.positions = positions;\n          this.positions2 = positions2;\n          this.numVert = numVert;\n          this.alpha = alpha;\n        } else {\n          this.oldPositions = positions;\n          this.oldPositions2 = positions2;\n          this.oldNumVert = numVert;\n          this.oldAlpha = alpha;\n        }\n      }\n\n      const mix = 0.5 - 0.5 * Math.cos(blendProgress * Math.PI);\n      const mix2 = 1 - mix;\n\n      if (this.oldNumVert > 0) {\n        alpha = mix * this.alpha + mix2 * this.oldAlpha;\n      }\n\n      let r = Math.clamp(mdVSFrame.wave_r, 0, 1);\n      let g = Math.clamp(mdVSFrame.wave_g, 0, 1);\n      let b = Math.clamp(mdVSFrame.wave_b, 0, 1);\n\n      if (mdVSFrame.wave_brighten !== 0) {\n        const maxc = Math.max(r, g, b);\n        if (maxc > 0.01) {\n          r /= maxc;\n          g /= maxc;\n          b /= maxc;\n        }\n      }\n\n      this.color = [r, g, b, alpha];\n\n      if (this.oldNumVert > 0) {\n        if (newWaveMode === 7) {\n          const m = (this.oldNumVert - 1) / (this.numVert * 2);\n          for (let i = 0; i < this.numVert; i++) {\n            const fIdx = i * m;\n            const nIdx = Math.floor(fIdx);\n            const t = fIdx - nIdx;\n\n            const x =\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\n            const y =\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\n\n            this.positions[i * 3 + 0] =\n              this.positions[i * 3 + 0] * mix + x * mix2;\n            this.positions[i * 3 + 1] =\n              this.positions[i * 3 + 1] * mix + y * mix2;\n            this.positions[i * 3 + 2] = 0;\n          }\n\n          for (let i = 0; i < this.numVert; i++) {\n            const fIdx = (i + this.numVert) * m;\n            const nIdx = Math.floor(fIdx);\n            const t = fIdx - nIdx;\n\n            const x =\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\n            const y =\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\n\n            this.positions2[i * 3 + 0] =\n              this.positions2[i * 3 + 0] * mix + x * mix2;\n            this.positions2[i * 3 + 1] =\n              this.positions2[i * 3 + 1] * mix + y * mix2;\n            this.positions2[i * 3 + 2] = 0;\n          }\n        } else if (oldWaveMode === 7) {\n          const halfNumVert = this.numVert / 2;\n          const m = (this.oldNumVert - 1) / halfNumVert;\n          for (let i = 0; i < halfNumVert; i++) {\n            const fIdx = i * m;\n            const nIdx = Math.floor(fIdx);\n            const t = fIdx - nIdx;\n\n            const x =\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\n            const y =\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\n\n            this.positions[i * 3 + 0] =\n              this.positions[i * 3 + 0] * mix + x * mix2;\n            this.positions[i * 3 + 1] =\n              this.positions[i * 3 + 1] * mix + y * mix2;\n            this.positions[i * 3 + 2] = 0;\n          }\n\n          for (let i = 0; i < halfNumVert; i++) {\n            const fIdx = i * m;\n            const nIdx = Math.floor(fIdx);\n            const t = fIdx - nIdx;\n\n            const x =\n              this.oldPositions2[nIdx * 3 + 0] * (1 - t) +\n              this.oldPositions2[(nIdx + 1) * 3 + 0] * t;\n            const y =\n              this.oldPositions2[nIdx * 3 + 1] * (1 - t) +\n              this.oldPositions2[(nIdx + 1) * 3 + 1] * t;\n\n            this.positions2[i * 3 + 0] =\n              this.positions[(i + halfNumVert) * 3 + 0] * mix + x * mix2;\n            this.positions2[i * 3 + 1] =\n              this.positions[(i + halfNumVert) * 3 + 1] * mix + y * mix2;\n            this.positions2[i * 3 + 2] = 0;\n          }\n        } else {\n          const m = (this.oldNumVert - 1) / this.numVert;\n          for (let i = 0; i < this.numVert; i++) {\n            const fIdx = i * m;\n            const nIdx = Math.floor(fIdx);\n            const t = fIdx - nIdx;\n\n            const x =\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\n            const y =\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\n\n            this.positions[i * 3 + 0] =\n              this.positions[i * 3 + 0] * mix + x * mix2;\n            this.positions[i * 3 + 1] =\n              this.positions[i * 3 + 1] * mix + y * mix2;\n            this.positions[i * 3 + 2] = 0;\n          }\n        }\n      }\n\n      for (let i = 0; i < this.numVert; i++) {\n        this.positions[i * 3 + 1] = -this.positions[i * 3 + 1];\n      }\n\n      this.smoothedNumVert = this.numVert * 2 - 1;\n      WaveUtils.smoothWave(\n        this.positions,\n        this.smoothedPositions,\n        this.numVert\n      );\n\n      if (newWaveMode === 7 || oldWaveMode === 7) {\n        for (let i = 0; i < this.numVert; i++) {\n          this.positions2[i * 3 + 1] = -this.positions2[i * 3 + 1];\n        }\n\n        WaveUtils.smoothWave(\n          this.positions2,\n          this.smoothedPositions2,\n          this.numVert\n        );\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  drawBasicWaveform(\n    blending,\n    blendProgress,\n    timeArrayL,\n    timeArrayR,\n    mdVSFrame\n  ) {\n    if (\n      this.generateWaveform(\n        blending,\n        blendProgress,\n        timeArrayL,\n        timeArrayR,\n        mdVSFrame\n      )\n    ) {\n      this.gl.useProgram(this.shaderProgram);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        this.smoothedPositions,\n        this.gl.STATIC_DRAW\n      );\n\n      this.gl.vertexAttribPointer(this.aPosLoc, 3, this.gl.FLOAT, false, 0, 0);\n      this.gl.enableVertexAttribArray(this.aPosLoc);\n\n      this.gl.uniform4fv(this.colorLoc, this.color);\n\n      let instances = 1;\n      if (mdVSFrame.wave_thick !== 0 || mdVSFrame.wave_dots !== 0) {\n        instances = 4;\n      }\n\n      if (mdVSFrame.additivewave !== 0) {\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n      } else {\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n      }\n\n      const drawMode =\n        mdVSFrame.wave_dots !== 0 ? this.gl.POINTS : this.gl.LINE_STRIP;\n\n      // TODO: use drawArraysInstanced\n      for (let i = 0; i < instances; i++) {\n        const offset = 2;\n        if (i === 0) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\n        } else if (i === 1) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [offset / this.texsizeX, 0]);\n        } else if (i === 2) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, offset / this.texsizeY]);\n        } else if (i === 3) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [\n            offset / this.texsizeX,\n            offset / this.texsizeY,\n          ]);\n        }\n\n        this.gl.drawArrays(drawMode, 0, this.smoothedNumVert);\n      }\n\n      const waveMode = Math.floor(mdVSFrame.wave_mode) % 8;\n      if (waveMode === 7) {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n        this.gl.bufferData(\n          this.gl.ARRAY_BUFFER,\n          this.smoothedPositions2,\n          this.gl.STATIC_DRAW\n        );\n\n        this.gl.vertexAttribPointer(\n          this.aPosLoc,\n          3,\n          this.gl.FLOAT,\n          false,\n          0,\n          0\n        );\n        this.gl.enableVertexAttribArray(this.aPosLoc);\n\n        for (let i = 0; i < instances; i++) {\n          const offset = 2;\n          if (i === 0) {\n            this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\n          } else if (i === 1) {\n            this.gl.uniform2fv(this.thickOffsetLoc, [\n              offset / this.texsizeX,\n              0,\n            ]);\n          } else if (i === 2) {\n            this.gl.uniform2fv(this.thickOffsetLoc, [\n              0,\n              offset / this.texsizeY,\n            ]);\n          } else if (i === 3) {\n            this.gl.uniform2fv(this.thickOffsetLoc, [\n              offset / this.texsizeX,\n              offset / this.texsizeY,\n            ]);\n          }\n\n          this.gl.drawArrays(drawMode, 0, this.smoothedNumVert);\n        }\n      }\n    }\n  }\n}\n","import Utils from \"../../utils\";\nimport ShaderUtils from \"../shaders/shaderUtils\";\nimport WaveUtils from \"./waveUtils\";\n\nexport default class CustomWaveform {\n  constructor(index, gl, opts) {\n    this.index = index;\n    this.gl = gl;\n\n    const maxSamples = 512;\n    this.pointsData = [\n      new Float32Array(maxSamples),\n      new Float32Array(maxSamples),\n    ];\n    this.positions = new Float32Array(maxSamples * 3);\n    this.colors = new Float32Array(maxSamples * 4);\n    this.smoothedPositions = new Float32Array((maxSamples * 2 - 1) * 3);\n    this.smoothedColors = new Float32Array((maxSamples * 2 - 1) * 4);\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.positionVertexBuf = this.gl.createBuffer();\n    this.colorVertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      uniform float uSize;\n      uniform vec2 thickOffset;\n      in vec3 aPos;\n      in vec4 aColor;\n      out vec4 vColor;\n      void main(void) {\n        vColor = aColor;\n        gl_PointSize = uSize;\n        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      in vec4 vColor;\n      out vec4 fragColor;\n      void main(void) {\n        fragColor = vColor;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.aPosLocation = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\n    this.aColorLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aColor\"\n    );\n\n    this.sizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"uSize\");\n    this.thickOffsetLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"thickOffset\"\n    );\n  }\n\n  generateWaveform(\n    timeArrayL,\n    timeArrayR,\n    freqArrayL,\n    freqArrayR,\n    globalVars,\n    presetEquationRunner,\n    waveEqs,\n    alphaMult\n  ) {\n    if (waveEqs.baseVals.enabled !== 0 && timeArrayL.length > 0) {\n      let mdVSWaveFrame;\n      if (presetEquationRunner.preset.useWASM) {\n        mdVSWaveFrame = presetEquationRunner.runWaveFrameEquations(\n          this.index,\n          globalVars\n        );\n      } else {\n        const mdVSWave = Object.assign(\n          {},\n          presetEquationRunner.mdVSWaves[this.index],\n          presetEquationRunner.mdVSFrameMapWaves[this.index],\n          presetEquationRunner.mdVSQAfterFrame,\n          presetEquationRunner.mdVSTWaveInits[this.index],\n          globalVars\n        );\n\n        mdVSWaveFrame = presetEquationRunner.runWaveFrameEquations(\n          this.index,\n          mdVSWave\n        );\n      }\n\n      const maxSamples = 512;\n      if (Object.prototype.hasOwnProperty.call(mdVSWaveFrame, \"samples\")) {\n        this.samples = mdVSWaveFrame.samples;\n      } else {\n        this.samples = maxSamples;\n      }\n\n      if (this.samples > maxSamples) {\n        this.samples = maxSamples;\n      }\n      this.samples = Math.floor(this.samples);\n\n      const baseVals = presetEquationRunner.preset.waves[this.index].baseVals;\n\n      const sep = Math.floor(mdVSWaveFrame.sep);\n      const scaling = mdVSWaveFrame.scaling;\n      const spectrum = mdVSWaveFrame.spectrum;\n      const smoothing = mdVSWaveFrame.smoothing;\n      const usedots = baseVals.usedots;\n\n      const frameR = mdVSWaveFrame.r;\n      const frameG = mdVSWaveFrame.g;\n      const frameB = mdVSWaveFrame.b;\n      const frameA = mdVSWaveFrame.a;\n\n      const waveScale = presetEquationRunner.preset.baseVals.wave_scale;\n\n      this.samples -= sep;\n\n      if (this.samples >= 2 || (usedots !== 0 && this.samples >= 1)) {\n        const useSpectrum = spectrum !== 0;\n        const scale = (useSpectrum ? 0.15 : 0.004) * scaling * waveScale;\n        const pointsLeft = useSpectrum ? freqArrayL : timeArrayL;\n        const pointsRight = useSpectrum ? freqArrayR : timeArrayR;\n\n        const j0 = useSpectrum\n          ? 0\n          : Math.floor((maxSamples - this.samples) / 2 - sep / 2);\n        const j1 = useSpectrum\n          ? 0\n          : Math.floor((maxSamples - this.samples) / 2 + sep / 2);\n        const t = useSpectrum ? (maxSamples - sep) / this.samples : 1;\n        const mix1 = (smoothing * 0.98) ** 0.5;\n        const mix2 = 1 - mix1;\n\n        // Milkdrop smooths waveform forward, backward and then scales\n        this.pointsData[0][0] = pointsLeft[j0];\n        this.pointsData[1][0] = pointsRight[j1];\n        for (let j = 1; j < this.samples; j++) {\n          const left = pointsLeft[Math.floor(j * t + j0)];\n          const right = pointsRight[Math.floor(j * t + j1)];\n          this.pointsData[0][j] =\n            left * mix2 + this.pointsData[0][j - 1] * mix1;\n          this.pointsData[1][j] =\n            right * mix2 + this.pointsData[1][j - 1] * mix1;\n        }\n        for (let j = this.samples - 2; j >= 0; j--) {\n          this.pointsData[0][j] =\n            this.pointsData[0][j] * mix2 + this.pointsData[0][j + 1] * mix1;\n          this.pointsData[1][j] =\n            this.pointsData[1][j] * mix2 + this.pointsData[1][j + 1] * mix1;\n        }\n        for (let j = 0; j < this.samples; j++) {\n          this.pointsData[0][j] *= scale;\n          this.pointsData[1][j] *= scale;\n        }\n\n        if (!presetEquationRunner.preset.useWASM) {\n          for (let j = 0; j < this.samples; j++) {\n            const value1 = this.pointsData[0][j];\n            const value2 = this.pointsData[1][j];\n\n            mdVSWaveFrame.sample = j / (this.samples - 1);\n            mdVSWaveFrame.value1 = value1;\n            mdVSWaveFrame.value2 = value2;\n            mdVSWaveFrame.x = 0.5 + value1;\n            mdVSWaveFrame.y = 0.5 + value2;\n            mdVSWaveFrame.r = frameR;\n            mdVSWaveFrame.g = frameG;\n            mdVSWaveFrame.b = frameB;\n            mdVSWaveFrame.a = frameA;\n\n            if (waveEqs.point_eqs !== \"\") {\n              mdVSWaveFrame = presetEquationRunner.runWavePointEquations(\n                this.index,\n                mdVSWaveFrame\n              );\n            }\n\n            const x = (mdVSWaveFrame.x * 2 - 1) * this.invAspectx;\n            const y = (mdVSWaveFrame.y * -2 + 1) * this.invAspecty;\n            const r = mdVSWaveFrame.r;\n            const g = mdVSWaveFrame.g;\n            const b = mdVSWaveFrame.b;\n            const a = mdVSWaveFrame.a;\n\n            this.positions[j * 3 + 0] = x;\n            this.positions[j * 3 + 1] = y;\n            this.positions[j * 3 + 2] = 0;\n\n            this.colors[j * 4 + 0] = r;\n            this.colors[j * 4 + 1] = g;\n            this.colors[j * 4 + 2] = b;\n            this.colors[j * 4 + 3] = a * alphaMult;\n          }\n        } else {\n          const varPool =\n            presetEquationRunner.preset.globalPools[\n              `wavePerFrame${this.index}`\n            ];\n          for (let j = 0; j < this.samples; j++) {\n            const value1 = this.pointsData[0][j];\n            const value2 = this.pointsData[1][j];\n\n            varPool.sample.value = j / (this.samples - 1);\n            varPool.value1.value = value1;\n            varPool.value2.value = value2;\n            varPool.x.value = 0.5 + value1;\n            varPool.y.value = 0.5 + value2;\n            varPool.r.value = frameR;\n            varPool.g.value = frameG;\n            varPool.b.value = frameB;\n            varPool.a.value = frameA;\n\n            if (waveEqs.point_eqs) {\n              presetEquationRunner.preset.waves[this.index].point_eqs();\n            }\n\n            const x = (varPool.x.value * 2 - 1) * this.invAspectx;\n            const y = (varPool.y.value * -2 + 1) * this.invAspecty;\n            const r = varPool.r.value;\n            const g = varPool.g.value;\n            const b = varPool.b.value;\n            const a = varPool.a.value;\n\n            this.positions[j * 3 + 0] = x;\n            this.positions[j * 3 + 1] = y;\n            this.positions[j * 3 + 2] = 0;\n\n            this.colors[j * 4 + 0] = r;\n            this.colors[j * 4 + 1] = g;\n            this.colors[j * 4 + 2] = b;\n            this.colors[j * 4 + 3] = a * alphaMult;\n          }\n        }\n\n        // this needs to be after per point (check fishbrain - witchcraft)\n        if (!presetEquationRunner.preset.useWASM) {\n          const mdvsUserKeysWave =\n            presetEquationRunner.mdVSUserKeysWaves[this.index];\n          const mdVSNewFrameMapWave = Utils.pick(\n            mdVSWaveFrame,\n            mdvsUserKeysWave\n          );\n\n          // eslint-disable-next-line no-param-reassign\n          presetEquationRunner.mdVSFrameMapWaves[\n            this.index\n          ] = mdVSNewFrameMapWave;\n        } else {\n          mdVSWaveFrame.usedots = usedots;\n          mdVSWaveFrame.thick = baseVals.thick;\n          mdVSWaveFrame.additive = baseVals.additive;\n        }\n\n        this.mdVSWaveFrame = mdVSWaveFrame;\n\n        if (usedots === 0) {\n          WaveUtils.smoothWaveAndColor(\n            this.positions,\n            this.colors,\n            this.smoothedPositions,\n            this.smoothedColors,\n            this.samples\n          );\n        }\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  drawCustomWaveform(\n    blendProgress,\n    timeArrayL,\n    timeArrayR,\n    freqArrayL,\n    freqArrayR,\n    globalVars,\n    presetEquationRunner,\n    waveEqs\n  ) {\n    if (\n      waveEqs &&\n      this.generateWaveform(\n        timeArrayL,\n        timeArrayR,\n        freqArrayL,\n        freqArrayR,\n        globalVars,\n        presetEquationRunner,\n        waveEqs,\n        blendProgress\n      )\n    ) {\n      this.gl.useProgram(this.shaderProgram);\n\n      const waveUseDots = this.mdVSWaveFrame.usedots !== 0;\n      const waveThick = this.mdVSWaveFrame.thick !== 0;\n      const waveAdditive = this.mdVSWaveFrame.additive !== 0;\n\n      let positions;\n      let colors;\n      let numVerts;\n      if (!waveUseDots) {\n        positions = this.smoothedPositions;\n        colors = this.smoothedColors;\n        numVerts = this.samples * 2 - 1;\n      } else {\n        positions = this.positions;\n        colors = this.colors;\n        numVerts = this.samples;\n      }\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, positions, this.gl.STATIC_DRAW);\n\n      this.gl.vertexAttribPointer(\n        this.aPosLocation,\n        3,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n      this.gl.enableVertexAttribArray(this.aPosLocation);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, colors, this.gl.STATIC_DRAW);\n\n      this.gl.vertexAttribPointer(\n        this.aColorLocation,\n        4,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n      this.gl.enableVertexAttribArray(this.aColorLocation);\n\n      let instances = 1;\n      if (waveUseDots) {\n        if (waveThick) {\n          this.gl.uniform1f(this.sizeLoc, 2 + (this.texsizeX >= 1024 ? 1 : 0));\n        } else {\n          this.gl.uniform1f(this.sizeLoc, 1 + (this.texsizeX >= 1024 ? 1 : 0));\n        }\n      } else {\n        this.gl.uniform1f(this.sizeLoc, 1);\n        if (waveThick) {\n          instances = 4;\n        }\n      }\n\n      if (waveAdditive) {\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n      } else {\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n      }\n\n      const drawMode = waveUseDots ? this.gl.POINTS : this.gl.LINE_STRIP;\n\n      // TODO: use drawArraysInstanced\n      for (let i = 0; i < instances; i++) {\n        const offset = 2;\n        if (i === 0) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\n        } else if (i === 1) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [offset / this.texsizeX, 0]);\n        } else if (i === 2) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, offset / this.texsizeY]);\n        } else if (i === 3) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [\n            offset / this.texsizeX,\n            offset / this.texsizeY,\n          ]);\n        }\n\n        this.gl.drawArrays(drawMode, 0, numVerts);\n      }\n    }\n  }\n}\n","import Utils from \"../../utils\";\nimport ShaderUtils from \"../shaders/shaderUtils\";\n\nexport default class CustomShape {\n  constructor(index, gl, opts) {\n    this.index = index;\n    this.gl = gl;\n\n    const maxSides = 101;\n    this.positions = new Float32Array((maxSides + 2) * 3);\n    this.colors = new Float32Array((maxSides + 2) * 4);\n    this.uvs = new Float32Array((maxSides + 2) * 2);\n    this.borderPositions = new Float32Array((maxSides + 1) * 3);\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.positionVertexBuf = this.gl.createBuffer();\n    this.colorVertexBuf = this.gl.createBuffer();\n    this.uvVertexBuf = this.gl.createBuffer();\n    this.borderPositionVertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n    this.createBorderShader();\n\n    this.mainSampler = this.gl.createSampler();\n\n    gl.samplerParameteri(\n      this.mainSampler,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_T, gl.REPEAT);\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      in vec3 aPos;\n      in vec4 aColor;\n      in vec2 aUv;\n      out vec4 vColor;\n      out vec2 vUv;\n      void main(void) {\n        vColor = aColor;\n        vUv = aUv;\n        gl_Position = vec4(aPos, 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      uniform sampler2D uTexture;\n      uniform float uTextured;\n      in vec4 vColor;\n      in vec2 vUv;\n      out vec4 fragColor;\n      void main(void) {\n        if (uTextured != 0.0) {\n          fragColor = texture(uTexture, vUv) * vColor;\n        } else {\n          fragColor = vColor;\n        }\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.aPosLocation = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\n    this.aColorLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aColor\"\n    );\n    this.aUvLocation = this.gl.getAttribLocation(this.shaderProgram, \"aUv\");\n\n    this.texturedLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTextured\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n  }\n\n  createBorderShader() {\n    this.borderShaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      in vec3 aBorderPos;\n      uniform vec2 thickOffset;\n      void main(void) {\n        gl_Position = vec4(aBorderPos +\n                            vec3(thickOffset, 0.0), 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      out vec4 fragColor;\n      uniform vec4 uBorderColor;\n      void main(void) {\n        fragColor = uBorderColor;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.borderShaderProgram, vertShader);\n    this.gl.attachShader(this.borderShaderProgram, fragShader);\n    this.gl.linkProgram(this.borderShaderProgram);\n\n    this.aBorderPosLoc = this.gl.getAttribLocation(\n      this.borderShaderProgram,\n      \"aBorderPos\"\n    );\n\n    this.uBorderColorLoc = this.gl.getUniformLocation(\n      this.borderShaderProgram,\n      \"uBorderColor\"\n    );\n    this.thickOffsetLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"thickOffset\"\n    );\n  }\n\n  drawCustomShape(\n    blendProgress,\n    globalVars,\n    presetEquationRunner,\n    shapeEqs,\n    prevTexture\n  ) {\n    if (shapeEqs.baseVals.enabled !== 0) {\n      if (!presetEquationRunner.preset.useWASM) {\n        this.setupShapeBuffers(presetEquationRunner.mdVSFrame.wrap);\n\n        let mdVSShape = Object.assign(\n          {},\n          presetEquationRunner.mdVSShapes[this.index],\n          presetEquationRunner.mdVSFrameMapShapes[this.index],\n          globalVars\n        );\n\n        // If we aren't setting these every instance, set them initially\n        if (\n          presetEquationRunner.preset.shapes[this.index].frame_eqs_str === \"\"\n        ) {\n          mdVSShape = Object.assign(\n            mdVSShape,\n            presetEquationRunner.mdVSQAfterFrame,\n            presetEquationRunner.mdVSTShapeInits[this.index]\n          );\n        }\n\n        const baseVals =\n          presetEquationRunner.preset.shapes[this.index].baseVals;\n\n        const numInst = Math.clamp(baseVals.num_inst, 1, 1024);\n        for (let j = 0; j < numInst; j++) {\n          mdVSShape.instance = j;\n          mdVSShape.x = baseVals.x;\n          mdVSShape.y = baseVals.y;\n          mdVSShape.rad = baseVals.rad;\n          mdVSShape.ang = baseVals.ang;\n          mdVSShape.r = baseVals.r;\n          mdVSShape.g = baseVals.g;\n          mdVSShape.b = baseVals.b;\n          mdVSShape.a = baseVals.a;\n          mdVSShape.r2 = baseVals.r2;\n          mdVSShape.g2 = baseVals.g2;\n          mdVSShape.b2 = baseVals.b2;\n          mdVSShape.a2 = baseVals.a2;\n          mdVSShape.border_r = baseVals.border_r;\n          mdVSShape.border_g = baseVals.border_g;\n          mdVSShape.border_b = baseVals.border_b;\n          mdVSShape.border_a = baseVals.border_a;\n          mdVSShape.thickoutline = baseVals.thickoutline;\n          mdVSShape.textured = baseVals.textured;\n          mdVSShape.tex_zoom = baseVals.tex_zoom;\n          mdVSShape.tex_ang = baseVals.tex_ang;\n          mdVSShape.additive = baseVals.additive;\n\n          let mdVSShapeFrame;\n          if (\n            presetEquationRunner.preset.shapes[this.index].frame_eqs_str !== \"\"\n          ) {\n            mdVSShape = Object.assign(\n              mdVSShape,\n              presetEquationRunner.mdVSQAfterFrame,\n              presetEquationRunner.mdVSTShapeInits[this.index]\n            );\n\n            mdVSShapeFrame = presetEquationRunner.runShapeFrameEquations(\n              this.index,\n              mdVSShape\n            );\n          } else {\n            mdVSShapeFrame = mdVSShape;\n          }\n\n          let sides = mdVSShapeFrame.sides;\n          sides = Math.clamp(sides, 3, 100);\n          sides = Math.floor(sides);\n\n          const rad = mdVSShapeFrame.rad;\n          const ang = mdVSShapeFrame.ang;\n\n          const x = mdVSShapeFrame.x * 2 - 1;\n          const y = mdVSShapeFrame.y * -2 + 1;\n\n          const r = mdVSShapeFrame.r;\n          const g = mdVSShapeFrame.g;\n          const b = mdVSShapeFrame.b;\n          const a = mdVSShapeFrame.a;\n          const r2 = mdVSShapeFrame.r2;\n          const g2 = mdVSShapeFrame.g2;\n          const b2 = mdVSShapeFrame.b2;\n          const a2 = mdVSShapeFrame.a2;\n\n          const borderR = mdVSShapeFrame.border_r;\n          const borderG = mdVSShapeFrame.border_g;\n          const borderB = mdVSShapeFrame.border_b;\n          const borderA = mdVSShapeFrame.border_a;\n          this.borderColor = [\n            borderR,\n            borderG,\n            borderB,\n            borderA * blendProgress,\n          ];\n\n          const thickoutline = mdVSShapeFrame.thickoutline;\n\n          const textured = mdVSShapeFrame.textured;\n          const texZoom = mdVSShapeFrame.tex_zoom;\n          const texAng = mdVSShapeFrame.tex_ang;\n\n          const additive = mdVSShapeFrame.additive;\n\n          const hasBorder = this.borderColor[3] > 0;\n          const isTextured = Math.abs(textured) >= 1;\n          const isBorderThick = Math.abs(thickoutline) >= 1;\n          const isAdditive = Math.abs(additive) >= 1;\n\n          this.positions[0] = x;\n          this.positions[1] = y;\n          this.positions[2] = 0;\n\n          this.colors[0] = r;\n          this.colors[1] = g;\n          this.colors[2] = b;\n          this.colors[3] = a * blendProgress;\n\n          if (isTextured) {\n            this.uvs[0] = 0.5;\n            this.uvs[1] = 0.5;\n          }\n\n          const quarterPi = Math.PI * 0.25;\n          for (let k = 1; k <= sides + 1; k++) {\n            const p = (k - 1) / sides;\n            const pTwoPi = p * 2 * Math.PI;\n\n            const angSum = pTwoPi + ang + quarterPi;\n            this.positions[k * 3 + 0] =\n              x + rad * Math.cos(angSum) * this.aspecty;\n            this.positions[k * 3 + 1] = y + rad * Math.sin(angSum);\n            this.positions[k * 3 + 2] = 0;\n\n            this.colors[k * 4 + 0] = r2;\n            this.colors[k * 4 + 1] = g2;\n            this.colors[k * 4 + 2] = b2;\n            this.colors[k * 4 + 3] = a2 * blendProgress;\n\n            if (isTextured) {\n              const texAngSum = pTwoPi + texAng + quarterPi;\n              this.uvs[k * 2 + 0] =\n                0.5 + ((0.5 * Math.cos(texAngSum)) / texZoom) * this.aspecty;\n              this.uvs[k * 2 + 1] = 0.5 + (0.5 * Math.sin(texAngSum)) / texZoom;\n            }\n\n            if (hasBorder) {\n              this.borderPositions[(k - 1) * 3 + 0] = this.positions[k * 3 + 0];\n              this.borderPositions[(k - 1) * 3 + 1] = this.positions[k * 3 + 1];\n              this.borderPositions[(k - 1) * 3 + 2] = this.positions[k * 3 + 2];\n            }\n          }\n\n          this.mdVSShapeFrame = mdVSShapeFrame;\n\n          this.drawCustomShapeInstance(\n            prevTexture,\n            sides,\n            isTextured,\n            hasBorder,\n            isBorderThick,\n            isAdditive\n          );\n        }\n\n        const mdVSUserKeysShape =\n          presetEquationRunner.mdVSUserKeysShapes[this.index];\n        const mdVSNewFrameMapShape = Utils.pick(\n          this.mdVSShapeFrame,\n          mdVSUserKeysShape\n        );\n\n        // eslint-disable-next-line no-param-reassign\n        presetEquationRunner.mdVSFrameMapShapes[\n          this.index\n        ] = mdVSNewFrameMapShape;\n      } else {\n        // eslint-disable-next-line max-len\n        this.setupShapeBuffers(\n          presetEquationRunner.preset.globalPools.perFrame.wrap.value\n        );\n\n        const baseVals =\n          presetEquationRunner.preset.shapes[this.index].baseVals;\n        const varPool =\n          presetEquationRunner.preset.globalPools[`shapePerFrame${this.index}`];\n        Utils.setWasm(varPool, globalVars, presetEquationRunner.globalKeys);\n\n        // If we aren't setting these every instance, set them initially\n        if (!presetEquationRunner.preset.shapes[this.index].frame_eqs) {\n          presetEquationRunner.preset.restore_qs();\n        }\n\n        Utils.setWasm(\n          varPool,\n          presetEquationRunner.mdVSTShapeInits[this.index],\n          presetEquationRunner.ts\n        );\n        presetEquationRunner.preset.save_ts();\n\n        varPool.x.value = baseVals.x;\n        varPool.y.value = baseVals.y;\n        varPool.rad.value = baseVals.rad;\n        varPool.ang.value = baseVals.ang;\n        varPool.r.value = baseVals.r;\n        varPool.g.value = baseVals.g;\n        varPool.b.value = baseVals.b;\n        varPool.a.value = baseVals.a;\n        varPool.r2.value = baseVals.r2;\n        varPool.g2.value = baseVals.g2;\n        varPool.b2.value = baseVals.b2;\n        varPool.a2.value = baseVals.a2;\n        varPool.border_r.value = baseVals.border_r;\n        varPool.border_g.value = baseVals.border_g;\n        varPool.border_b.value = baseVals.border_b;\n        varPool.border_a.value = baseVals.border_a;\n        varPool.thickoutline.value = baseVals.thickoutline;\n        varPool.textured.value = baseVals.textured;\n        varPool.tex_zoom.value = baseVals.tex_zoom;\n        varPool.tex_ang.value = baseVals.tex_ang;\n        varPool.additive.value = baseVals.additive;\n        presetEquationRunner.preset.shapes[this.index].frame_eqs_save();\n\n        const numInst = Math.clamp(baseVals.num_inst, 1, 1024);\n        for (let j = 0; j < numInst; j++) {\n          varPool.instance.value = j;\n\n          // this condition should check the JS equations because of comments\n          if (presetEquationRunner.preset.shapes[this.index].frame_eqs) {\n            presetEquationRunner.preset.shapes[this.index].frame_eqs_restore();\n            presetEquationRunner.preset.restore_qs();\n            presetEquationRunner.preset.restore_ts();\n            presetEquationRunner.preset.shapes[this.index].frame_eqs();\n          }\n\n          let sides = varPool.sides.value;\n          sides = Math.clamp(sides, 3, 100);\n          sides = Math.floor(sides);\n\n          const rad = varPool.rad.value;\n          const ang = varPool.ang.value;\n\n          const x = varPool.x.value * 2 - 1;\n          const y = varPool.y.value * -2 + 1;\n\n          const r = varPool.r.value;\n          const g = varPool.g.value;\n          const b = varPool.b.value;\n          const a = varPool.a.value;\n          const r2 = varPool.r2.value;\n          const g2 = varPool.g2.value;\n          const b2 = varPool.b2.value;\n          const a2 = varPool.a2.value;\n\n          const borderR = varPool.border_r.value;\n          const borderG = varPool.border_g.value;\n          const borderB = varPool.border_b.value;\n          const borderA = varPool.border_a.value;\n          this.borderColor = [\n            borderR,\n            borderG,\n            borderB,\n            borderA * blendProgress,\n          ];\n\n          const thickoutline = varPool.thickoutline.value;\n\n          const textured = varPool.textured.value;\n          const texZoom = varPool.tex_zoom.value;\n          const texAng = varPool.tex_ang.value;\n\n          const additive = varPool.additive.value;\n\n          const hasBorder = this.borderColor[3] > 0;\n          const isTextured = Math.abs(textured) >= 1;\n          const isBorderThick = Math.abs(thickoutline) >= 1;\n          const isAdditive = Math.abs(additive) >= 1;\n\n          this.positions[0] = x;\n          this.positions[1] = y;\n          this.positions[2] = 0;\n\n          this.colors[0] = r;\n          this.colors[1] = g;\n          this.colors[2] = b;\n          this.colors[3] = a * blendProgress;\n\n          if (isTextured) {\n            this.uvs[0] = 0.5;\n            this.uvs[1] = 0.5;\n          }\n\n          const quarterPi = Math.PI * 0.25;\n          for (let k = 1; k <= sides + 1; k++) {\n            const p = (k - 1) / sides;\n            const pTwoPi = p * 2 * Math.PI;\n\n            const angSum = pTwoPi + ang + quarterPi;\n            this.positions[k * 3 + 0] =\n              x + rad * Math.cos(angSum) * this.aspecty;\n            this.positions[k * 3 + 1] = y + rad * Math.sin(angSum);\n            this.positions[k * 3 + 2] = 0;\n\n            this.colors[k * 4 + 0] = r2;\n            this.colors[k * 4 + 1] = g2;\n            this.colors[k * 4 + 2] = b2;\n            this.colors[k * 4 + 3] = a2 * blendProgress;\n\n            if (isTextured) {\n              const texAngSum = pTwoPi + texAng + quarterPi;\n              this.uvs[k * 2 + 0] =\n                0.5 + ((0.5 * Math.cos(texAngSum)) / texZoom) * this.aspecty;\n              this.uvs[k * 2 + 1] = 0.5 + (0.5 * Math.sin(texAngSum)) / texZoom;\n            }\n\n            if (hasBorder) {\n              this.borderPositions[(k - 1) * 3 + 0] = this.positions[k * 3 + 0];\n              this.borderPositions[(k - 1) * 3 + 1] = this.positions[k * 3 + 1];\n              this.borderPositions[(k - 1) * 3 + 2] = this.positions[k * 3 + 2];\n            }\n          }\n\n          this.drawCustomShapeInstance(\n            prevTexture,\n            sides,\n            isTextured,\n            hasBorder,\n            isBorderThick,\n            isAdditive\n          );\n        }\n      }\n    }\n  }\n\n  setupShapeBuffers(wrap) {\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.positions,\n      this.gl.DYNAMIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.aPosLocation,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.aPosLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, this.colors, this.gl.DYNAMIC_DRAW);\n\n    this.gl.vertexAttribPointer(\n      this.aColorLocation,\n      4,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.aColorLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.uvVertexBuf);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, this.uvs, this.gl.DYNAMIC_DRAW);\n\n    this.gl.vertexAttribPointer(\n      this.aUvLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.aUvLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.borderPositionVertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.borderPositions,\n      this.gl.DYNAMIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.aBorderPosLoc,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.aBorderPosLoc);\n\n    const wrapping = wrap !== 0 ? this.gl.REPEAT : this.gl.CLAMP_TO_EDGE;\n    this.gl.samplerParameteri(\n      this.mainSampler,\n      this.gl.TEXTURE_WRAP_S,\n      wrapping\n    );\n    this.gl.samplerParameteri(\n      this.mainSampler,\n      this.gl.TEXTURE_WRAP_T,\n      wrapping\n    );\n  }\n\n  drawCustomShapeInstance(\n    prevTexture,\n    sides,\n    isTextured,\n    hasBorder,\n    isBorderThick,\n    isAdditive\n  ) {\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n    this.gl.bufferSubData(\n      this.gl.ARRAY_BUFFER,\n      0,\n      this.positions,\n      0,\n      (sides + 2) * 3\n    );\n\n    this.gl.vertexAttribPointer(\n      this.aPosLocation,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.aPosLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\n    this.gl.bufferSubData(\n      this.gl.ARRAY_BUFFER,\n      0,\n      this.colors,\n      0,\n      (sides + 2) * 4\n    );\n\n    this.gl.vertexAttribPointer(\n      this.aColorLocation,\n      4,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.aColorLocation);\n\n    if (isTextured) {\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.uvVertexBuf);\n      this.gl.bufferSubData(\n        this.gl.ARRAY_BUFFER,\n        0,\n        this.uvs,\n        0,\n        (sides + 2) * 2\n      );\n\n      this.gl.vertexAttribPointer(\n        this.aUvLocation,\n        2,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n      this.gl.enableVertexAttribArray(this.aUvLocation);\n    }\n\n    this.gl.uniform1f(this.texturedLoc, isTextured ? 1 : 0);\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, prevTexture);\n    this.gl.bindSampler(0, this.mainSampler);\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    if (isAdditive) {\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n    } else {\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n    }\n\n    this.gl.drawArrays(this.gl.TRIANGLE_FAN, 0, sides + 2);\n\n    if (hasBorder) {\n      this.gl.useProgram(this.borderShaderProgram);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.borderPositionVertexBuf);\n      this.gl.bufferSubData(\n        this.gl.ARRAY_BUFFER,\n        0,\n        this.borderPositions,\n        0,\n        (sides + 1) * 3\n      );\n\n      this.gl.vertexAttribPointer(\n        this.aBorderPosLoc,\n        3,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n      this.gl.enableVertexAttribArray(this.aBorderPosLoc);\n\n      this.gl.uniform4fv(this.uBorderColorLoc, this.borderColor);\n\n      // TODO: use drawArraysInstanced\n      const instances = isBorderThick ? 4 : 1;\n      for (let i = 0; i < instances; i++) {\n        const offset = 2;\n        if (i === 0) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\n        } else if (i === 1) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [offset / this.texsizeX, 0]);\n        } else if (i === 2) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, offset / this.texsizeY]);\n        } else if (i === 3) {\n          this.gl.uniform2fv(this.thickOffsetLoc, [\n            offset / this.texsizeX,\n            offset / this.texsizeY,\n          ]);\n        }\n\n        this.gl.drawArrays(this.gl.LINE_STRIP, 0, sides + 1);\n      }\n    }\n  }\n}\n","import ShaderUtils from \"../shaders/shaderUtils\";\n\nexport default class Border {\n  constructor(gl, opts = {}) {\n    this.gl = gl;\n\n    this.positions = new Float32Array(72);\n\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n\n    this.vertexBuf = this.gl.createBuffer();\n  }\n\n  updateGlobals(opts) {\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      in vec3 aPos;\n      void main(void) {\n        gl_Position = vec4(aPos, 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      out vec4 fragColor;\n      uniform vec4 u_color;\n      void main(void) {\n        fragColor = u_color;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.aPosLoc = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\n\n    this.colorLoc = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\n  }\n\n  addTriangle(offset, point1, point2, point3) {\n    this.positions[offset + 0] = point1[0];\n    this.positions[offset + 1] = point1[1];\n    this.positions[offset + 2] = point1[2];\n\n    this.positions[offset + 3] = point2[0];\n    this.positions[offset + 4] = point2[1];\n    this.positions[offset + 5] = point2[2];\n\n    this.positions[offset + 6] = point3[0];\n    this.positions[offset + 7] = point3[1];\n    this.positions[offset + 8] = point3[2];\n  }\n\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\n  generateBorder(borderColor, borderSize, prevBorderSize) {\n    if (borderSize > 0 && borderColor[3] > 0) {\n      const width = 2;\n      const height = 2;\n\n      const widthHalf = width / 2;\n      const heightHalf = height / 2;\n\n      const prevBorderWidth = prevBorderSize / 2;\n      const borderWidth = borderSize / 2 + prevBorderWidth;\n\n      const prevBorderWidthWidth = prevBorderWidth * width;\n      const prevBorderWidthHeight = prevBorderWidth * height;\n      const borderWidthWidth = borderWidth * width;\n      const borderWidthHeight = borderWidth * height;\n\n      // 1st side\n      let point1 = [\n        -widthHalf + prevBorderWidthWidth,\n        -heightHalf + borderWidthHeight,\n        0,\n      ];\n      let point2 = [\n        -widthHalf + prevBorderWidthWidth,\n        heightHalf - borderWidthHeight,\n        0,\n      ];\n      let point3 = [\n        -widthHalf + borderWidthWidth,\n        heightHalf - borderWidthHeight,\n        0,\n      ];\n      let point4 = [\n        -widthHalf + borderWidthWidth,\n        -heightHalf + borderWidthHeight,\n        0,\n      ];\n\n      this.addTriangle(0, point4, point2, point1);\n      this.addTriangle(9, point4, point3, point2);\n\n      // 2nd side\n      point1 = [\n        widthHalf - prevBorderWidthWidth,\n        -heightHalf + borderWidthHeight,\n        0,\n      ];\n      point2 = [\n        widthHalf - prevBorderWidthWidth,\n        heightHalf - borderWidthHeight,\n        0,\n      ];\n      point3 = [\n        widthHalf - borderWidthWidth,\n        heightHalf - borderWidthHeight,\n        0,\n      ];\n      point4 = [\n        widthHalf - borderWidthWidth,\n        -heightHalf + borderWidthHeight,\n        0,\n      ];\n\n      this.addTriangle(18, point1, point2, point4);\n      this.addTriangle(27, point2, point3, point4);\n\n      // Top\n      point1 = [\n        -widthHalf + prevBorderWidthWidth,\n        -heightHalf + prevBorderWidthHeight,\n        0,\n      ];\n      point2 = [\n        -widthHalf + prevBorderWidthWidth,\n        borderWidthHeight - heightHalf,\n        0,\n      ];\n      point3 = [\n        widthHalf - prevBorderWidthWidth,\n        borderWidthHeight - heightHalf,\n        0,\n      ];\n      point4 = [\n        widthHalf - prevBorderWidthWidth,\n        -heightHalf + prevBorderWidthHeight,\n        0,\n      ];\n\n      this.addTriangle(36, point4, point2, point1);\n      this.addTriangle(45, point4, point3, point2);\n\n      // Bottom\n      point1 = [\n        -widthHalf + prevBorderWidthWidth,\n        heightHalf - prevBorderWidthHeight,\n        0,\n      ];\n      point2 = [\n        -widthHalf + prevBorderWidthWidth,\n        heightHalf - borderWidthHeight,\n        0,\n      ];\n      point3 = [\n        widthHalf - prevBorderWidthWidth,\n        heightHalf - borderWidthHeight,\n        0,\n      ];\n      point4 = [\n        widthHalf - prevBorderWidthWidth,\n        heightHalf - prevBorderWidthHeight,\n        0,\n      ];\n\n      this.addTriangle(54, point1, point2, point4);\n      this.addTriangle(63, point2, point3, point4);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  drawBorder(borderColor, borderSize, prevBorderSize) {\n    if (this.generateBorder(borderColor, borderSize, prevBorderSize)) {\n      this.gl.useProgram(this.shaderProgram);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        this.positions,\n        this.gl.STATIC_DRAW\n      );\n\n      this.gl.vertexAttribPointer(this.aPosLoc, 3, this.gl.FLOAT, false, 0, 0);\n      this.gl.enableVertexAttribArray(this.aPosLoc);\n\n      this.gl.uniform4fv(this.colorLoc, borderColor);\n\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, this.positions.length / 3);\n    }\n  }\n}\n","import ShaderUtils from \"../shaders/shaderUtils\";\n\nexport default class CustomShape {\n  constructor(gl, opts) {\n    this.gl = gl;\n\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.generatePositions();\n\n    this.colors = new Float32Array([\n      0,\n      0,\n      0,\n      3 / 32,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n    ]);\n\n    this.positionVertexBuf = this.gl.createBuffer();\n    this.colorVertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  updateGlobals(opts) {\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.generatePositions();\n  }\n\n  generatePositions() {\n    const halfSize = 0.05;\n    this.positions = new Float32Array([\n      0,\n      0,\n      0,\n      -halfSize * this.aspecty,\n      0,\n      0,\n      0,\n      -halfSize,\n      0,\n      halfSize * this.aspecty,\n      0,\n      0,\n      0,\n      halfSize,\n      0,\n      -halfSize * this.aspecty,\n      0,\n      0,\n    ]);\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      in vec3 aPos;\n      in vec4 aColor;\n      out vec4 vColor;\n      void main(void) {\n        vColor = aColor;\n        gl_Position = vec4(aPos, 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      in vec4 vColor;\n      out vec4 fragColor;\n      void main(void) {\n        fragColor = vColor;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.aPosLocation = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\n    this.aColorLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aColor\"\n    );\n  }\n\n  drawDarkenCenter(mdVSFrame) {\n    if (mdVSFrame.darken_center !== 0) {\n      this.gl.useProgram(this.shaderProgram);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        this.positions,\n        this.gl.STATIC_DRAW\n      );\n\n      this.gl.vertexAttribPointer(\n        this.aPosLocation,\n        3,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n      this.gl.enableVertexAttribArray(this.aPosLocation);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        this.colors,\n        this.gl.STATIC_DRAW\n      );\n\n      this.gl.vertexAttribPointer(\n        this.aColorLocation,\n        4,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n      this.gl.enableVertexAttribArray(this.aColorLocation);\n\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n      this.gl.drawArrays(this.gl.TRIANGLE_FAN, 0, this.positions.length / 3);\n    }\n  }\n}\n","import ShaderUtils from \"../shaders/shaderUtils\";\n\nexport default class MotionVectors {\n  constructor(gl, opts) {\n    this.gl = gl;\n\n    this.maxX = 64;\n    this.maxY = 48;\n    this.positions = new Float32Array(this.maxX * this.maxY * 2 * 3);\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n\n    this.positionVertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      in vec3 aPos;\n      void main(void) {\n        gl_Position = vec4(aPos, 1.0);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      out vec4 fragColor;\n      uniform vec4 u_color;\n      void main(void) {\n        fragColor = u_color;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.aPosLoc = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\n\n    this.colorLoc = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\n  }\n\n  getMotionDir(warpUVs, fx, fy) {\n    const y0 = Math.floor(fy * this.mesh_height);\n    const dy = fy * this.mesh_height - y0;\n\n    const x0 = Math.floor(fx * this.mesh_width);\n    const dx = fx * this.mesh_width - x0;\n\n    const x1 = x0 + 1;\n    const y1 = y0 + 1;\n\n    const gridX1 = this.mesh_width + 1;\n\n    let fx2;\n    let fy2;\n    fx2 = warpUVs[(y0 * gridX1 + x0) * 2 + 0] * (1 - dx) * (1 - dy);\n    fy2 = warpUVs[(y0 * gridX1 + x0) * 2 + 1] * (1 - dx) * (1 - dy);\n    fx2 += warpUVs[(y0 * gridX1 + x1) * 2 + 0] * dx * (1 - dy);\n    fy2 += warpUVs[(y0 * gridX1 + x1) * 2 + 1] * dx * (1 - dy);\n    fx2 += warpUVs[(y1 * gridX1 + x0) * 2 + 0] * (1 - dx) * dy;\n    fy2 += warpUVs[(y1 * gridX1 + x0) * 2 + 1] * (1 - dx) * dy;\n    fx2 += warpUVs[(y1 * gridX1 + x1) * 2 + 0] * dx * dy;\n    fy2 += warpUVs[(y1 * gridX1 + x1) * 2 + 1] * dx * dy;\n\n    return [fx2, 1.0 - fy2];\n  }\n\n  generateMotionVectors(mdVSFrame, warpUVs) {\n    const mvOn = mdVSFrame.bmotionvectorson;\n    const mvA = mvOn === 0 ? 0 : mdVSFrame.mv_a;\n    let nX = Math.floor(mdVSFrame.mv_x);\n    let nY = Math.floor(mdVSFrame.mv_y);\n\n    if (mvA > 0.001 && nX > 0 && nY > 0) {\n      let dx = mdVSFrame.mv_x - nX;\n      let dy = mdVSFrame.mv_y - nY;\n\n      if (nX > this.maxX) {\n        nX = this.maxX;\n        dx = 0;\n      }\n\n      if (nY > this.maxY) {\n        nY = this.maxY;\n        dy = 0;\n      }\n\n      const dx2 = mdVSFrame.mv_dx;\n      const dy2 = mdVSFrame.mv_dy;\n\n      const lenMult = mdVSFrame.mv_l;\n      const minLen = 1.0 / this.texsizeX;\n\n      this.numVecVerts = 0;\n      for (let j = 0; j < nY; j++) {\n        let fy = (j + 0.25) / (nY + dy + 0.25 - 1.0);\n        fy -= dy2;\n\n        if (fy > 0.0001 && fy < 0.9999) {\n          for (let i = 0; i < nX; i++) {\n            let fx = (i + 0.25) / (nX + dx + 0.25 - 1.0);\n            fx += dx2;\n\n            if (fx > 0.0001 && fx < 0.9999) {\n              const fx2arr = this.getMotionDir(warpUVs, fx, fy);\n              let fx2 = fx2arr[0];\n              let fy2 = fx2arr[1];\n\n              let dxi = fx2 - fx;\n              let dyi = fy2 - fy;\n              dxi *= lenMult;\n              dyi *= lenMult;\n\n              let fdist = Math.sqrt(dxi * dxi + dyi * dyi);\n\n              if (fdist < minLen && fdist > 0.00000001) {\n                fdist = minLen / fdist;\n                dxi *= fdist;\n                dyi *= fdist;\n              } else {\n                dxi = minLen;\n                dxi = minLen;\n              }\n\n              fx2 = fx + dxi;\n              fy2 = fy + dyi;\n\n              const vx1 = 2.0 * fx - 1.0;\n              const vy1 = 2.0 * fy - 1.0;\n              const vx2 = 2.0 * fx2 - 1.0;\n              const vy2 = 2.0 * fy2 - 1.0;\n\n              this.positions[this.numVecVerts * 3 + 0] = vx1;\n              this.positions[this.numVecVerts * 3 + 1] = vy1;\n              this.positions[this.numVecVerts * 3 + 2] = 0;\n\n              this.positions[(this.numVecVerts + 1) * 3 + 0] = vx2;\n              this.positions[(this.numVecVerts + 1) * 3 + 1] = vy2;\n              this.positions[(this.numVecVerts + 1) * 3 + 2] = 0;\n\n              this.numVecVerts += 2;\n            }\n          }\n        }\n      }\n\n      if (this.numVecVerts > 0) {\n        this.color = [mdVSFrame.mv_r, mdVSFrame.mv_g, mdVSFrame.mv_b, mvA];\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  drawMotionVectors(mdVSFrame, warpUVs) {\n    if (this.generateMotionVectors(mdVSFrame, warpUVs)) {\n      this.gl.useProgram(this.shaderProgram);\n\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        this.positions,\n        this.gl.STATIC_DRAW\n      );\n\n      this.gl.vertexAttribPointer(this.aPosLoc, 3, this.gl.FLOAT, false, 0, 0);\n      this.gl.enableVertexAttribArray(this.aPosLoc);\n\n      this.gl.uniform4fv(this.colorLoc, this.color);\n\n      this.gl.lineWidth(1);\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n      this.gl.drawArrays(this.gl.LINES, 0, this.numVecVerts);\n    }\n  }\n}\n","import ShaderUtils from \"./shaderUtils\";\n\nexport default class WarpShader {\n  constructor(gl, noise, image, opts = {}) {\n    this.gl = gl;\n    this.noise = noise;\n    this.image = image;\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.buildPositions();\n\n    this.indexBuf = gl.createBuffer();\n    this.positionVertexBuf = this.gl.createBuffer();\n    this.warpUvVertexBuf = this.gl.createBuffer();\n    this.warpColorVertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n\n    this.mainSampler = this.gl.createSampler();\n    this.mainSamplerFW = this.gl.createSampler();\n    this.mainSamplerFC = this.gl.createSampler();\n    this.mainSamplerPW = this.gl.createSampler();\n    this.mainSamplerPC = this.gl.createSampler();\n\n    gl.samplerParameteri(\n      this.mainSampler,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\n    gl.samplerParameteri(\n      this.mainSamplerFW,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\n    gl.samplerParameteri(\n      this.mainSamplerFC,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSamplerFC, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(\n      this.mainSamplerFC,\n      gl.TEXTURE_WRAP_S,\n      gl.CLAMP_TO_EDGE\n    );\n    gl.samplerParameteri(\n      this.mainSamplerFC,\n      gl.TEXTURE_WRAP_T,\n      gl.CLAMP_TO_EDGE\n    );\n\n    gl.samplerParameteri(\n      this.mainSamplerPW,\n      gl.TEXTURE_MIN_FILTER,\n      gl.NEAREST_MIPMAP_NEAREST\n    );\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\n    gl.samplerParameteri(\n      this.mainSamplerPC,\n      gl.TEXTURE_MIN_FILTER,\n      gl.NEAREST_MIPMAP_NEAREST\n    );\n    gl.samplerParameteri(this.mainSamplerPC, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.samplerParameteri(\n      this.mainSamplerPC,\n      gl.TEXTURE_WRAP_S,\n      gl.CLAMP_TO_EDGE\n    );\n    gl.samplerParameteri(\n      this.mainSamplerPC,\n      gl.TEXTURE_WRAP_T,\n      gl.CLAMP_TO_EDGE\n    );\n  }\n\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\n  buildPositions() {\n    const width = 2;\n    const height = 2;\n\n    const widthHalf = width / 2;\n    const heightHalf = height / 2;\n\n    const gridX = this.mesh_width;\n    const gridY = this.mesh_height;\n\n    const gridX1 = gridX + 1;\n    const gridY1 = gridY + 1;\n\n    const segmentWidth = width / gridX;\n    const segmentHeight = height / gridY;\n\n    const vertices = [];\n    for (let iy = 0; iy < gridY1; iy++) {\n      const y = iy * segmentHeight - heightHalf;\n      for (let ix = 0; ix < gridX1; ix++) {\n        const x = ix * segmentWidth - widthHalf;\n        vertices.push(x, -y, 0);\n      }\n    }\n\n    const indices = [];\n    for (let iy = 0; iy < gridY; iy++) {\n      for (let ix = 0; ix < gridX; ix++) {\n        const a = ix + gridX1 * iy;\n        const b = ix + gridX1 * (iy + 1);\n        const c = ix + 1 + gridX1 * (iy + 1);\n        const d = ix + 1 + gridX1 * iy;\n\n        indices.push(a, b, d);\n        indices.push(b, c, d);\n      }\n    }\n\n    this.vertices = new Float32Array(vertices);\n    this.indices = new Uint16Array(indices);\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.buildPositions();\n  }\n\n  createShader(shaderText = \"\") {\n    let fragShaderText;\n    let fragShaderHeaderText;\n    if (shaderText.length === 0) {\n      fragShaderText = \"ret = texture(sampler_main, uv).rgb * decay;\";\n      fragShaderHeaderText = \"\";\n    } else {\n      const shaderParts = ShaderUtils.getShaderParts(shaderText);\n      fragShaderHeaderText = shaderParts[0];\n      fragShaderText = shaderParts[1];\n    }\n\n    fragShaderText = fragShaderText.replace(/texture2D/g, \"texture\");\n    fragShaderText = fragShaderText.replace(/texture3D/g, \"texture\");\n\n    this.userTextures = ShaderUtils.getUserSamplers(fragShaderHeaderText);\n\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      const vec2 halfmad = vec2(0.5);\n      in vec2 aPos;\n      in vec2 aWarpUv;\n      in vec4 aWarpColor;\n      out vec2 uv;\n      out vec2 uv_orig;\n      out vec4 vColor;\n      void main(void) {\n        gl_Position = vec4(aPos, 0.0, 1.0);\n        uv_orig = aPos * halfmad + halfmad;\n        uv = aWarpUv;\n        vColor = aWarpColor;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      precision mediump sampler3D;\n\n      in vec2 uv;\n      in vec2 uv_orig;\n      in vec4 vColor;\n      out vec4 fragColor;\n      uniform sampler2D sampler_main;\n      uniform sampler2D sampler_fw_main;\n      uniform sampler2D sampler_fc_main;\n      uniform sampler2D sampler_pw_main;\n      uniform sampler2D sampler_pc_main;\n      uniform sampler2D sampler_blur1;\n      uniform sampler2D sampler_blur2;\n      uniform sampler2D sampler_blur3;\n      uniform sampler2D sampler_noise_lq;\n      uniform sampler2D sampler_noise_lq_lite;\n      uniform sampler2D sampler_noise_mq;\n      uniform sampler2D sampler_noise_hq;\n      uniform sampler2D sampler_pw_noise_lq;\n      uniform sampler3D sampler_noisevol_lq;\n      uniform sampler3D sampler_noisevol_hq;\n      uniform float time;\n      uniform float decay;\n      uniform vec2 resolution;\n      uniform vec4 aspect;\n      uniform vec4 texsize;\n      uniform vec4 texsize_noise_lq;\n      uniform vec4 texsize_noise_mq;\n      uniform vec4 texsize_noise_hq;\n      uniform vec4 texsize_noise_lq_lite;\n      uniform vec4 texsize_noisevol_lq;\n      uniform vec4 texsize_noisevol_hq;\n\n      uniform float bass;\n      uniform float mid;\n      uniform float treb;\n      uniform float vol;\n      uniform float bass_att;\n      uniform float mid_att;\n      uniform float treb_att;\n      uniform float vol_att;\n\n      uniform float frame;\n      uniform float fps;\n\n      uniform vec4 _qa;\n      uniform vec4 _qb;\n      uniform vec4 _qc;\n      uniform vec4 _qd;\n      uniform vec4 _qe;\n      uniform vec4 _qf;\n      uniform vec4 _qg;\n      uniform vec4 _qh;\n\n      #define q1 _qa.x\n      #define q2 _qa.y\n      #define q3 _qa.z\n      #define q4 _qa.w\n      #define q5 _qb.x\n      #define q6 _qb.y\n      #define q7 _qb.z\n      #define q8 _qb.w\n      #define q9 _qc.x\n      #define q10 _qc.y\n      #define q11 _qc.z\n      #define q12 _qc.w\n      #define q13 _qd.x\n      #define q14 _qd.y\n      #define q15 _qd.z\n      #define q16 _qd.w\n      #define q17 _qe.x\n      #define q18 _qe.y\n      #define q19 _qe.z\n      #define q20 _qe.w\n      #define q21 _qf.x\n      #define q22 _qf.y\n      #define q23 _qf.z\n      #define q24 _qf.w\n      #define q25 _qg.x\n      #define q26 _qg.y\n      #define q27 _qg.z\n      #define q28 _qg.w\n      #define q29 _qh.x\n      #define q30 _qh.y\n      #define q31 _qh.z\n      #define q32 _qh.w\n\n      uniform vec4 slow_roam_cos;\n      uniform vec4 roam_cos;\n      uniform vec4 slow_roam_sin;\n      uniform vec4 roam_sin;\n\n      uniform float blur1_min;\n      uniform float blur1_max;\n      uniform float blur2_min;\n      uniform float blur2_max;\n      uniform float blur3_min;\n      uniform float blur3_max;\n\n      uniform float scale1;\n      uniform float scale2;\n      uniform float scale3;\n      uniform float bias1;\n      uniform float bias2;\n      uniform float bias3;\n\n      uniform vec4 rand_frame;\n      uniform vec4 rand_preset;\n\n      float PI = ${Math.PI};\n\n      ${fragShaderHeaderText}\n\n      void main(void) {\n        vec3 ret;\n        float rad = length(uv_orig - 0.5);\n        float ang = atan(uv_orig.x - 0.5, uv_orig.y - 0.5);\n\n        ${fragShaderText}\n\n        fragColor = vec4(ret, 1.0) * vColor;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.warpUvLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aWarpUv\"\n    );\n    this.warpColorLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aWarpColor\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_main\"\n    );\n    this.textureFWLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_fw_main\"\n    );\n    this.textureFCLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_fc_main\"\n    );\n    this.texturePWLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_pw_main\"\n    );\n    this.texturePCLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_pc_main\"\n    );\n    this.blurTexture1Loc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_blur1\"\n    );\n    this.blurTexture2Loc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_blur2\"\n    );\n    this.blurTexture3Loc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_blur3\"\n    );\n    this.noiseLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_lq\"\n    );\n    this.noiseMQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_mq\"\n    );\n    this.noiseHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_hq\"\n    );\n    this.noiseLQLiteLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_lq_lite\"\n    );\n    this.noisePointLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_pw_noise_lq\"\n    );\n    this.noiseVolLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noisevol_lq\"\n    );\n    this.noiseVolHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noisevol_hq\"\n    );\n    this.decayLoc = this.gl.getUniformLocation(this.shaderProgram, \"decay\");\n    this.texsizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"texsize\");\n    this.texsizeNoiseLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_lq\"\n    );\n    this.texsizeNoiseMQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_mq\"\n    );\n    this.texsizeNoiseHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_hq\"\n    );\n    this.texsizeNoiseLQLiteLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_lq_lite\"\n    );\n    this.texsizeNoiseVolLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noisevol_lq\"\n    );\n    this.texsizeNoiseVolHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noisevol_hq\"\n    );\n    this.resolutionLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"resolution\"\n    );\n    this.aspectLoc = this.gl.getUniformLocation(this.shaderProgram, \"aspect\");\n    this.bassLoc = this.gl.getUniformLocation(this.shaderProgram, \"bass\");\n    this.midLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid\");\n    this.trebLoc = this.gl.getUniformLocation(this.shaderProgram, \"treb\");\n    this.volLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol\");\n    this.bassAttLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"bass_att\"\n    );\n    this.midAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid_att\");\n    this.trebAttLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"treb_att\"\n    );\n    this.volAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol_att\");\n    this.timeLoc = this.gl.getUniformLocation(this.shaderProgram, \"time\");\n    this.frameLoc = this.gl.getUniformLocation(this.shaderProgram, \"frame\");\n    this.fpsLoc = this.gl.getUniformLocation(this.shaderProgram, \"fps\");\n    this.blur1MinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur1_min\"\n    );\n    this.blur1MaxLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur1_max\"\n    );\n    this.blur2MinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur2_min\"\n    );\n    this.blur2MaxLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur2_max\"\n    );\n    this.blur3MinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur3_min\"\n    );\n    this.blur3MaxLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur3_max\"\n    );\n    this.scale1Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale1\");\n    this.scale2Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale2\");\n    this.scale3Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale3\");\n    this.bias1Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias1\");\n    this.bias2Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias2\");\n    this.bias3Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias3\");\n    this.randPresetLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"rand_preset\"\n    );\n    this.randFrameLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"rand_frame\"\n    );\n\n    this.qaLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qa\");\n    this.qbLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qb\");\n    this.qcLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qc\");\n    this.qdLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qd\");\n    this.qeLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qe\");\n    this.qfLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qf\");\n    this.qgLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qg\");\n    this.qhLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qh\");\n\n    this.slowRoamCosLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"slow_roam_cos\"\n    );\n    this.roamCosLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"roam_cos\"\n    );\n    this.slowRoamSinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"slow_roam_sin\"\n    );\n    this.roamSinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"roam_sin\"\n    );\n\n    for (let i = 0; i < this.userTextures.length; i++) {\n      const userTexture = this.userTextures[i];\n      userTexture.textureLoc = this.gl.getUniformLocation(\n        this.shaderProgram,\n        `sampler_${userTexture.sampler}`\n      );\n    }\n  }\n\n  updateShader(shaderText) {\n    this.createShader(shaderText);\n  }\n\n  bindBlurVals(blurMins, blurMaxs) {\n    const blurMin1 = blurMins[0];\n    const blurMin2 = blurMins[1];\n    const blurMin3 = blurMins[2];\n    const blurMax1 = blurMaxs[0];\n    const blurMax2 = blurMaxs[1];\n    const blurMax3 = blurMaxs[2];\n\n    const scale1 = blurMax1 - blurMin1;\n    const bias1 = blurMin1;\n\n    const scale2 = blurMax2 - blurMin2;\n    const bias2 = blurMin2;\n\n    const scale3 = blurMax3 - blurMin3;\n    const bias3 = blurMin3;\n\n    this.gl.uniform1f(this.blur1MinLoc, blurMin1);\n    this.gl.uniform1f(this.blur1MaxLoc, blurMax1);\n    this.gl.uniform1f(this.blur2MinLoc, blurMin2);\n    this.gl.uniform1f(this.blur2MaxLoc, blurMax2);\n    this.gl.uniform1f(this.blur3MinLoc, blurMin3);\n    this.gl.uniform1f(this.blur3MaxLoc, blurMax3);\n    this.gl.uniform1f(this.scale1Loc, scale1);\n    this.gl.uniform1f(this.scale2Loc, scale2);\n    this.gl.uniform1f(this.scale3Loc, scale3);\n    this.gl.uniform1f(this.bias1Loc, bias1);\n    this.gl.uniform1f(this.bias2Loc, bias2);\n    this.gl.uniform1f(this.bias3Loc, bias3);\n  }\n\n  renderQuadTexture(\n    blending,\n    texture,\n    blurTexture1,\n    blurTexture2,\n    blurTexture3,\n    blurMins,\n    blurMaxs,\n    mdVSFrame,\n    mdVSQs,\n    warpUVs,\n    warpColor\n  ) {\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\n    this.gl.bufferData(\n      this.gl.ELEMENT_ARRAY_BUFFER,\n      this.indices,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.vertices,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.warpUvVertexBuf);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, warpUVs, this.gl.STATIC_DRAW);\n\n    this.gl.vertexAttribPointer(\n      this.warpUvLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.warpUvLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.warpColorVertexBuf);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, warpColor, this.gl.STATIC_DRAW);\n\n    this.gl.vertexAttribPointer(\n      this.warpColorLocation,\n      4,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.warpColorLocation);\n\n    const wrapping =\n      mdVSFrame.wrap !== 0 ? this.gl.REPEAT : this.gl.CLAMP_TO_EDGE;\n    this.gl.samplerParameteri(\n      this.mainSampler,\n      this.gl.TEXTURE_WRAP_S,\n      wrapping\n    );\n    this.gl.samplerParameteri(\n      this.mainSampler,\n      this.gl.TEXTURE_WRAP_T,\n      wrapping\n    );\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(0, this.mainSampler);\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    this.gl.activeTexture(this.gl.TEXTURE1);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(1, this.mainSamplerFW);\n    this.gl.uniform1i(this.textureFWLoc, 1);\n\n    this.gl.activeTexture(this.gl.TEXTURE2);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(2, this.mainSamplerFC);\n    this.gl.uniform1i(this.textureFCLoc, 2);\n\n    this.gl.activeTexture(this.gl.TEXTURE3);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(3, this.mainSamplerPW);\n    this.gl.uniform1i(this.texturePWLoc, 3);\n\n    this.gl.activeTexture(this.gl.TEXTURE4);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(4, this.mainSamplerPC);\n    this.gl.uniform1i(this.texturePCLoc, 4);\n\n    this.gl.activeTexture(this.gl.TEXTURE5);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture1);\n    this.gl.uniform1i(this.blurTexture1Loc, 5);\n\n    this.gl.activeTexture(this.gl.TEXTURE6);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture2);\n    this.gl.uniform1i(this.blurTexture2Loc, 6);\n\n    this.gl.activeTexture(this.gl.TEXTURE7);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture3);\n    this.gl.uniform1i(this.blurTexture3Loc, 7);\n\n    this.gl.activeTexture(this.gl.TEXTURE8);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\n    this.gl.uniform1i(this.noiseLQLoc, 8);\n\n    this.gl.activeTexture(this.gl.TEXTURE9);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexMQ);\n    this.gl.uniform1i(this.noiseMQLoc, 9);\n\n    this.gl.activeTexture(this.gl.TEXTURE10);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexHQ);\n    this.gl.uniform1i(this.noiseHQLoc, 10);\n\n    this.gl.activeTexture(this.gl.TEXTURE11);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQLite);\n    this.gl.uniform1i(this.noiseLQLiteLoc, 11);\n\n    this.gl.activeTexture(this.gl.TEXTURE12);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\n    this.gl.bindSampler(12, this.noise.noiseTexPointLQ);\n    this.gl.uniform1i(this.noisePointLQLoc, 12);\n\n    this.gl.activeTexture(this.gl.TEXTURE13);\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolLQ);\n    this.gl.uniform1i(this.noiseVolLQLoc, 13);\n\n    this.gl.activeTexture(this.gl.TEXTURE14);\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolHQ);\n    this.gl.uniform1i(this.noiseVolHQLoc, 14);\n\n    for (let i = 0; i < this.userTextures.length; i++) {\n      const userTexture = this.userTextures[i];\n      this.gl.activeTexture(this.gl.TEXTURE15 + i);\n      this.gl.bindTexture(\n        this.gl.TEXTURE_2D,\n        this.image.getTexture(userTexture.sampler)\n      );\n      this.gl.uniform1i(userTexture.textureLoc, 15 + i);\n    }\n\n    this.gl.uniform1f(this.decayLoc, mdVSFrame.decay);\n    this.gl.uniform2fv(this.resolutionLoc, [this.texsizeX, this.texsizeY]);\n    this.gl.uniform4fv(this.aspectLoc, [\n      this.aspectx,\n      this.aspecty,\n      this.invAspectx,\n      this.invAspecty,\n    ]);\n    this.gl.uniform4fv(this.texsizeLoc, [\n      this.texsizeX,\n      this.texsizeY,\n      1.0 / this.texsizeX,\n      1.0 / this.texsizeY,\n    ]);\n    this.gl.uniform4fv(this.texsizeNoiseLQLoc, [256, 256, 1 / 256, 1 / 256]);\n    this.gl.uniform4fv(this.texsizeNoiseMQLoc, [256, 256, 1 / 256, 1 / 256]);\n    this.gl.uniform4fv(this.texsizeNoiseHQLoc, [256, 256, 1 / 256, 1 / 256]);\n    this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc, [32, 32, 1 / 32, 1 / 32]);\n    this.gl.uniform4fv(this.texsizeNoiseVolLQLoc, [32, 32, 1 / 32, 1 / 32]);\n    this.gl.uniform4fv(this.texsizeNoiseVolHQLoc, [32, 32, 1 / 32, 1 / 32]);\n\n    this.gl.uniform1f(this.bassLoc, mdVSFrame.bass);\n    this.gl.uniform1f(this.midLoc, mdVSFrame.mid);\n    this.gl.uniform1f(this.trebLoc, mdVSFrame.treb);\n    this.gl.uniform1f(\n      this.volLoc,\n      (mdVSFrame.bass + mdVSFrame.mid + mdVSFrame.treb) / 3\n    );\n    this.gl.uniform1f(this.bassAttLoc, mdVSFrame.bass_att);\n    this.gl.uniform1f(this.midAttLoc, mdVSFrame.mid_att);\n    this.gl.uniform1f(this.trebAttLoc, mdVSFrame.treb_att);\n    this.gl.uniform1f(\n      this.volAttLoc,\n      (mdVSFrame.bass_att + mdVSFrame.mid_att + mdVSFrame.treb_att) / 3\n    );\n    this.gl.uniform1f(this.timeLoc, mdVSFrame.time);\n    this.gl.uniform1f(this.frameLoc, mdVSFrame.frame);\n    this.gl.uniform1f(this.fpsLoc, mdVSFrame.fps);\n    this.gl.uniform4fv(this.randPresetLoc, mdVSFrame.rand_preset);\n    this.gl.uniform4fv(\n      this.randFrameLoc,\n      new Float32Array([\n        Math.random(),\n        Math.random(),\n        Math.random(),\n        Math.random(),\n      ])\n    );\n\n    this.gl.uniform4fv(\n      this.qaLoc,\n      new Float32Array([\n        mdVSQs.q1 || 0,\n        mdVSQs.q2 || 0,\n        mdVSQs.q3 || 0,\n        mdVSQs.q4 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qbLoc,\n      new Float32Array([\n        mdVSQs.q5 || 0,\n        mdVSQs.q6 || 0,\n        mdVSQs.q7 || 0,\n        mdVSQs.q8 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qcLoc,\n      new Float32Array([\n        mdVSQs.q9 || 0,\n        mdVSQs.q10 || 0,\n        mdVSQs.q11 || 0,\n        mdVSQs.q12 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qdLoc,\n      new Float32Array([\n        mdVSQs.q13 || 0,\n        mdVSQs.q14 || 0,\n        mdVSQs.q15 || 0,\n        mdVSQs.q16 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qeLoc,\n      new Float32Array([\n        mdVSQs.q17 || 0,\n        mdVSQs.q18 || 0,\n        mdVSQs.q19 || 0,\n        mdVSQs.q20 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qfLoc,\n      new Float32Array([\n        mdVSQs.q21 || 0,\n        mdVSQs.q22 || 0,\n        mdVSQs.q23 || 0,\n        mdVSQs.q24 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qgLoc,\n      new Float32Array([\n        mdVSQs.q25 || 0,\n        mdVSQs.q26 || 0,\n        mdVSQs.q27 || 0,\n        mdVSQs.q28 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qhLoc,\n      new Float32Array([\n        mdVSQs.q29 || 0,\n        mdVSQs.q30 || 0,\n        mdVSQs.q31 || 0,\n        mdVSQs.q32 || 0,\n      ])\n    );\n    this.gl.uniform4fv(this.slowRoamCosLoc, [\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.005),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.008),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.013),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.022),\n    ]);\n    this.gl.uniform4fv(this.roamCosLoc, [\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.3),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 1.3),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 5.0),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 20.0),\n    ]);\n    this.gl.uniform4fv(this.slowRoamSinLoc, [\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.005),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.008),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.013),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.022),\n    ]);\n    this.gl.uniform4fv(this.roamSinLoc, [\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.3),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 1.3),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 5.0),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 20.0),\n    ]);\n\n    this.bindBlurVals(blurMins, blurMaxs);\n\n    if (blending) {\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n    } else {\n      this.gl.disable(this.gl.BLEND);\n    }\n\n    this.gl.drawElements(\n      this.gl.TRIANGLES,\n      this.indices.length,\n      this.gl.UNSIGNED_SHORT,\n      0\n    );\n\n    if (!blending) {\n      this.gl.enable(this.gl.BLEND);\n    }\n  }\n}\n","import ShaderUtils from \"./shaderUtils\";\n\nexport default class CompShader {\n  constructor(gl, noise, image, opts = {}) {\n    this.gl = gl;\n    this.noise = noise;\n    this.image = image;\n\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.compWidth = 32;\n    this.compHeight = 24;\n\n    this.buildPositions();\n\n    this.indexBuf = gl.createBuffer();\n    this.positionVertexBuf = this.gl.createBuffer();\n    this.compColorVertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n\n    this.mainSampler = this.gl.createSampler();\n    this.mainSamplerFW = this.gl.createSampler();\n    this.mainSamplerFC = this.gl.createSampler();\n    this.mainSamplerPW = this.gl.createSampler();\n    this.mainSamplerPC = this.gl.createSampler();\n\n    gl.samplerParameteri(\n      this.mainSampler,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\n    gl.samplerParameteri(\n      this.mainSamplerFW,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\n    gl.samplerParameteri(\n      this.mainSamplerFC,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.samplerParameteri(this.mainSamplerFC, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.samplerParameteri(\n      this.mainSamplerFC,\n      gl.TEXTURE_WRAP_S,\n      gl.CLAMP_TO_EDGE\n    );\n    gl.samplerParameteri(\n      this.mainSamplerFC,\n      gl.TEXTURE_WRAP_T,\n      gl.CLAMP_TO_EDGE\n    );\n\n    gl.samplerParameteri(\n      this.mainSamplerPW,\n      gl.TEXTURE_MIN_FILTER,\n      gl.NEAREST_MIPMAP_NEAREST\n    );\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\n    gl.samplerParameteri(\n      this.mainSamplerPC,\n      gl.TEXTURE_MIN_FILTER,\n      gl.NEAREST_MIPMAP_NEAREST\n    );\n    gl.samplerParameteri(this.mainSamplerPC, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.samplerParameteri(\n      this.mainSamplerPC,\n      gl.TEXTURE_WRAP_S,\n      gl.CLAMP_TO_EDGE\n    );\n    gl.samplerParameteri(\n      this.mainSamplerPC,\n      gl.TEXTURE_WRAP_T,\n      gl.CLAMP_TO_EDGE\n    );\n  }\n\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\n  buildPositions() {\n    const width = 2;\n    const height = 2;\n\n    const widthHalf = width / 2;\n    const heightHalf = height / 2;\n\n    const gridX = this.compWidth;\n    const gridY = this.compHeight;\n\n    const gridX1 = gridX + 1;\n    const gridY1 = gridY + 1;\n\n    const segmentWidth = width / gridX;\n    const segmentHeight = height / gridY;\n\n    const vertices = [];\n    for (let iy = 0; iy < gridY1; iy++) {\n      const y = iy * segmentHeight - heightHalf;\n      for (let ix = 0; ix < gridX1; ix++) {\n        const x = ix * segmentWidth - widthHalf;\n\n        vertices.push(x, -y, 0);\n      }\n    }\n\n    const indices = [];\n    for (let iy = 0; iy < gridY; iy++) {\n      for (let ix = 0; ix < gridX; ix++) {\n        const a = ix + gridX1 * iy;\n        const b = ix + gridX1 * (iy + 1);\n        const c = ix + 1 + gridX1 * (iy + 1);\n        const d = ix + 1 + gridX1 * iy;\n\n        indices.push(a, b, d);\n        indices.push(b, c, d);\n      }\n    }\n\n    this.vertices = new Float32Array(vertices);\n    this.indices = new Uint16Array(indices);\n  }\n\n  updateGlobals(opts) {\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.buildPositions();\n  }\n\n  createShader(shaderText = \"\") {\n    let fragShaderText;\n    let fragShaderHeaderText;\n    if (shaderText.length === 0) {\n      fragShaderText = `float orient_horiz = mod(echo_orientation, 2.0);\n                        float orient_x = (orient_horiz != 0.0) ? -1.0 : 1.0;\n                        float orient_y = (echo_orientation >= 2.0) ? -1.0 : 1.0;\n                        vec2 uv_echo = ((uv - 0.5) *\n                                        (1.0 / echo_zoom) *\n                                        vec2(orient_x, orient_y)) + 0.5;\n\n                        ret = mix(texture(sampler_main, uv).rgb,\n                                  texture(sampler_main, uv_echo).rgb,\n                                  echo_alpha);\n\n                        ret *= gammaAdj;\n\n                        if(fShader >= 1.0) {\n                          ret *= hue_shader;\n                        } else if(fShader > 0.001) {\n                          ret *= (1.0 - fShader) + (fShader * hue_shader);\n                        }\n\n                        if(brighten != 0) ret = sqrt(ret);\n                        if(darken != 0) ret = ret*ret;\n                        if(solarize != 0) ret = ret * (1.0 - ret) * 4.0;\n                        if(invert != 0) ret = 1.0 - ret;`;\n      fragShaderHeaderText = \"\";\n    } else {\n      const shaderParts = ShaderUtils.getShaderParts(shaderText);\n      fragShaderHeaderText = shaderParts[0];\n      fragShaderText = shaderParts[1];\n    }\n\n    fragShaderText = fragShaderText.replace(/texture2D/g, \"texture\");\n    fragShaderText = fragShaderText.replace(/texture3D/g, \"texture\");\n\n    this.userTextures = ShaderUtils.getUserSamplers(fragShaderHeaderText);\n\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      const vec2 halfmad = vec2(0.5);\n      in vec2 aPos;\n      in vec4 aCompColor;\n      out vec2 vUv;\n      out vec4 vColor;\n      void main(void) {\n        gl_Position = vec4(aPos, 0.0, 1.0);\n        vUv = aPos * halfmad + halfmad;\n        vColor = aCompColor;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `\n      #version 300 es\n      precision ${this.floatPrecision} float;\n      precision highp int;\n      precision mediump sampler2D;\n      precision mediump sampler3D;\n\n      vec3 lum(vec3 v){\n          return vec3(dot(v, vec3(0.32,0.49,0.29)));\n      }\n\n      in vec2 vUv;\n      in vec4 vColor;\n      out vec4 fragColor;\n      uniform sampler2D sampler_main;\n      uniform sampler2D sampler_fw_main;\n      uniform sampler2D sampler_fc_main;\n      uniform sampler2D sampler_pw_main;\n      uniform sampler2D sampler_pc_main;\n      uniform sampler2D sampler_blur1;\n      uniform sampler2D sampler_blur2;\n      uniform sampler2D sampler_blur3;\n      uniform sampler2D sampler_noise_lq;\n      uniform sampler2D sampler_noise_lq_lite;\n      uniform sampler2D sampler_noise_mq;\n      uniform sampler2D sampler_noise_hq;\n      uniform sampler2D sampler_pw_noise_lq;\n      uniform sampler3D sampler_noisevol_lq;\n      uniform sampler3D sampler_noisevol_hq;\n\n      uniform float time;\n      uniform float gammaAdj;\n      uniform float echo_zoom;\n      uniform float echo_alpha;\n      uniform float echo_orientation;\n      uniform int invert;\n      uniform int brighten;\n      uniform int darken;\n      uniform int solarize;\n      uniform vec2 resolution;\n      uniform vec4 aspect;\n      uniform vec4 texsize;\n      uniform vec4 texsize_noise_lq;\n      uniform vec4 texsize_noise_mq;\n      uniform vec4 texsize_noise_hq;\n      uniform vec4 texsize_noise_lq_lite;\n      uniform vec4 texsize_noisevol_lq;\n      uniform vec4 texsize_noisevol_hq;\n\n      uniform float bass;\n      uniform float mid;\n      uniform float treb;\n      uniform float vol;\n      uniform float bass_att;\n      uniform float mid_att;\n      uniform float treb_att;\n      uniform float vol_att;\n\n      uniform float frame;\n      uniform float fps;\n\n      uniform vec4 _qa;\n      uniform vec4 _qb;\n      uniform vec4 _qc;\n      uniform vec4 _qd;\n      uniform vec4 _qe;\n      uniform vec4 _qf;\n      uniform vec4 _qg;\n      uniform vec4 _qh;\n\n      #define q1 _qa.x\n      #define q2 _qa.y\n      #define q3 _qa.z\n      #define q4 _qa.w\n      #define q5 _qb.x\n      #define q6 _qb.y\n      #define q7 _qb.z\n      #define q8 _qb.w\n      #define q9 _qc.x\n      #define q10 _qc.y\n      #define q11 _qc.z\n      #define q12 _qc.w\n      #define q13 _qd.x\n      #define q14 _qd.y\n      #define q15 _qd.z\n      #define q16 _qd.w\n      #define q17 _qe.x\n      #define q18 _qe.y\n      #define q19 _qe.z\n      #define q20 _qe.w\n      #define q21 _qf.x\n      #define q22 _qf.y\n      #define q23 _qf.z\n      #define q24 _qf.w\n      #define q25 _qg.x\n      #define q26 _qg.y\n      #define q27 _qg.z\n      #define q28 _qg.w\n      #define q29 _qh.x\n      #define q30 _qh.y\n      #define q31 _qh.z\n      #define q32 _qh.w\n\n      uniform vec4 slow_roam_cos;\n      uniform vec4 roam_cos;\n      uniform vec4 slow_roam_sin;\n      uniform vec4 roam_sin;\n\n      uniform float blur1_min;\n      uniform float blur1_max;\n      uniform float blur2_min;\n      uniform float blur2_max;\n      uniform float blur3_min;\n      uniform float blur3_max;\n\n      uniform float scale1;\n      uniform float scale2;\n      uniform float scale3;\n      uniform float bias1;\n      uniform float bias2;\n      uniform float bias3;\n\n      uniform vec4 rand_frame;\n      uniform vec4 rand_preset;\n\n      uniform float fShader;\n\n      float PI = ${Math.PI};\n\n      ${fragShaderHeaderText}\n\n      void main(void) {\n        vec3 ret;\n        vec2 uv = vUv;\n        vec2 uv_orig = vUv;\n        uv.y = 1.0 - uv.y;\n        uv_orig.y = 1.0 - uv_orig.y;\n        float rad = length(uv - 0.5);\n        float ang = atan(uv.x - 0.5, uv.y - 0.5);\n        vec3 hue_shader = vColor.rgb;\n\n        ${fragShaderText}\n\n        fragColor = vec4(ret, vColor.a);\n      }\n      `.trim()\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.compColorLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aCompColor\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_main\"\n    );\n    this.textureFWLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_fw_main\"\n    );\n    this.textureFCLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_fc_main\"\n    );\n    this.texturePWLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_pw_main\"\n    );\n    this.texturePCLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_pc_main\"\n    );\n    this.blurTexture1Loc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_blur1\"\n    );\n    this.blurTexture2Loc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_blur2\"\n    );\n    this.blurTexture3Loc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_blur3\"\n    );\n    this.noiseLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_lq\"\n    );\n    this.noiseMQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_mq\"\n    );\n    this.noiseHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_hq\"\n    );\n    this.noiseLQLiteLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noise_lq_lite\"\n    );\n    this.noisePointLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_pw_noise_lq\"\n    );\n    this.noiseVolLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noisevol_lq\"\n    );\n    this.noiseVolHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"sampler_noisevol_hq\"\n    );\n    this.timeLoc = this.gl.getUniformLocation(this.shaderProgram, \"time\");\n    this.gammaAdjLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"gammaAdj\"\n    );\n    this.echoZoomLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"echo_zoom\"\n    );\n    this.echoAlphaLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"echo_alpha\"\n    );\n    this.echoOrientationLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"echo_orientation\"\n    );\n    this.invertLoc = this.gl.getUniformLocation(this.shaderProgram, \"invert\");\n    this.brightenLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"brighten\"\n    );\n    this.darkenLoc = this.gl.getUniformLocation(this.shaderProgram, \"darken\");\n    this.solarizeLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"solarize\"\n    );\n    this.texsizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"texsize\");\n    this.texsizeNoiseLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_lq\"\n    );\n    this.texsizeNoiseMQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_mq\"\n    );\n    this.texsizeNoiseHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_hq\"\n    );\n    this.texsizeNoiseLQLiteLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noise_lq_lite\"\n    );\n    this.texsizeNoiseVolLQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noisevol_lq\"\n    );\n    this.texsizeNoiseVolHQLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize_noisevol_hq\"\n    );\n    this.resolutionLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"resolution\"\n    );\n    this.aspectLoc = this.gl.getUniformLocation(this.shaderProgram, \"aspect\");\n    this.bassLoc = this.gl.getUniformLocation(this.shaderProgram, \"bass\");\n    this.midLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid\");\n    this.trebLoc = this.gl.getUniformLocation(this.shaderProgram, \"treb\");\n    this.volLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol\");\n    this.bassAttLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"bass_att\"\n    );\n    this.midAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid_att\");\n    this.trebAttLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"treb_att\"\n    );\n    this.volAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol_att\");\n    this.frameLoc = this.gl.getUniformLocation(this.shaderProgram, \"frame\");\n    this.fpsLoc = this.gl.getUniformLocation(this.shaderProgram, \"fps\");\n    this.blur1MinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur1_min\"\n    );\n    this.blur1MaxLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur1_max\"\n    );\n    this.blur2MinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur2_min\"\n    );\n    this.blur2MaxLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur2_max\"\n    );\n    this.blur3MinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur3_min\"\n    );\n    this.blur3MaxLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"blur3_max\"\n    );\n    this.scale1Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale1\");\n    this.scale2Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale2\");\n    this.scale3Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale3\");\n    this.bias1Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias1\");\n    this.bias2Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias2\");\n    this.bias3Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias3\");\n    this.randPresetLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"rand_preset\"\n    );\n    this.randFrameLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"rand_frame\"\n    );\n    this.fShaderLoc = this.gl.getUniformLocation(this.shaderProgram, \"fShader\");\n\n    this.qaLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qa\");\n    this.qbLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qb\");\n    this.qcLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qc\");\n    this.qdLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qd\");\n    this.qeLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qe\");\n    this.qfLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qf\");\n    this.qgLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qg\");\n    this.qhLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qh\");\n\n    this.slowRoamCosLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"slow_roam_cos\"\n    );\n    this.roamCosLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"roam_cos\"\n    );\n    this.slowRoamSinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"slow_roam_sin\"\n    );\n    this.roamSinLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"roam_sin\"\n    );\n\n    for (let i = 0; i < this.userTextures.length; i++) {\n      const userTexture = this.userTextures[i];\n      userTexture.textureLoc = this.gl.getUniformLocation(\n        this.shaderProgram,\n        `sampler_${userTexture.sampler}`\n      );\n    }\n  }\n\n  updateShader(shaderText) {\n    this.createShader(shaderText);\n  }\n\n  bindBlurVals(blurMins, blurMaxs) {\n    const blurMin1 = blurMins[0];\n    const blurMin2 = blurMins[1];\n    const blurMin3 = blurMins[2];\n    const blurMax1 = blurMaxs[0];\n    const blurMax2 = blurMaxs[1];\n    const blurMax3 = blurMaxs[2];\n\n    const scale1 = blurMax1 - blurMin1;\n    const bias1 = blurMin1;\n\n    const scale2 = blurMax2 - blurMin2;\n    const bias2 = blurMin2;\n\n    const scale3 = blurMax3 - blurMin3;\n    const bias3 = blurMin3;\n\n    this.gl.uniform1f(this.blur1MinLoc, blurMin1);\n    this.gl.uniform1f(this.blur1MaxLoc, blurMax1);\n    this.gl.uniform1f(this.blur2MinLoc, blurMin2);\n    this.gl.uniform1f(this.blur2MaxLoc, blurMax2);\n    this.gl.uniform1f(this.blur3MinLoc, blurMin3);\n    this.gl.uniform1f(this.blur3MaxLoc, blurMax3);\n    this.gl.uniform1f(this.scale1Loc, scale1);\n    this.gl.uniform1f(this.scale2Loc, scale2);\n    this.gl.uniform1f(this.scale3Loc, scale3);\n    this.gl.uniform1f(this.bias1Loc, bias1);\n    this.gl.uniform1f(this.bias2Loc, bias2);\n    this.gl.uniform1f(this.bias3Loc, bias3);\n  }\n\n  static generateHueBase(mdVSFrame) {\n    const hueBase = new Float32Array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]);\n\n    /* eslint-disable max-len */\n    for (let i = 0; i < 4; i++) {\n      hueBase[i * 3 + 0] =\n        0.6 +\n        0.3 *\n          Math.sin(\n            mdVSFrame.time * 30.0 * 0.0143 +\n              3 +\n              i * 21 +\n              mdVSFrame.rand_start[3]\n          );\n      hueBase[i * 3 + 1] =\n        0.6 +\n        0.3 *\n          Math.sin(\n            mdVSFrame.time * 30.0 * 0.0107 +\n              1 +\n              i * 13 +\n              mdVSFrame.rand_start[1]\n          );\n      hueBase[i * 3 + 2] =\n        0.6 +\n        0.3 *\n          Math.sin(\n            mdVSFrame.time * 30.0 * 0.0129 + 6 + i * 9 + mdVSFrame.rand_start[2]\n          );\n      const maxshade = Math.max(\n        hueBase[i * 3],\n        hueBase[i * 3 + 1],\n        hueBase[i * 3 + 2]\n      );\n      for (let k = 0; k < 3; k++) {\n        hueBase[i * 3 + k] = hueBase[i * 3 + k] / maxshade;\n        hueBase[i * 3 + k] = 0.5 + 0.5 * hueBase[i * 3 + k];\n      }\n    }\n    /* eslint-enable max-len */\n\n    return hueBase;\n  }\n\n  generateCompColors(blending, mdVSFrame, warpColor) {\n    const hueBase = CompShader.generateHueBase(mdVSFrame);\n    const gridX1 = this.compWidth + 1;\n    const gridY1 = this.compHeight + 1;\n    const compColor = new Float32Array(gridX1 * gridY1 * 4);\n\n    let offsetColor = 0;\n    for (let j = 0; j < gridY1; j++) {\n      for (let i = 0; i < gridX1; i++) {\n        let x = i / this.compWidth;\n        let y = j / this.compHeight;\n\n        const col = [1, 1, 1];\n        for (let c = 0; c < 3; c++) {\n          col[c] =\n            hueBase[0 + c] * x * y +\n            hueBase[3 + c] * (1 - x) * y +\n            hueBase[6 + c] * x * (1 - y) +\n            hueBase[9 + c] * (1 - x) * (1 - y);\n        }\n\n        let alpha = 1;\n        if (blending) {\n          x *= this.mesh_width + 1;\n          y *= this.mesh_height + 1;\n          x = Math.clamp(x, 0, this.mesh_width - 1);\n          y = Math.clamp(y, 0, this.mesh_height - 1);\n          const nx = Math.floor(x);\n          const ny = Math.floor(y);\n          const dx = x - nx;\n          const dy = y - ny;\n          const alpha00 = warpColor[(ny * (this.mesh_width + 1) + nx) * 4 + 3];\n          const alpha01 =\n            warpColor[(ny * (this.mesh_width + 1) + (nx + 1)) * 4 + 3];\n          const alpha10 =\n            warpColor[((ny + 1) * (this.mesh_width + 1) + nx) * 4 + 3];\n          const alpha11 =\n            warpColor[((ny + 1) * (this.mesh_width + 1) + (nx + 1)) * 4 + 3];\n          alpha =\n            alpha00 * (1 - dx) * (1 - dy) +\n            alpha01 * dx * (1 - dy) +\n            alpha10 * (1 - dx) * dy +\n            alpha11 * dx * dy;\n        }\n\n        compColor[offsetColor + 0] = col[0];\n        compColor[offsetColor + 1] = col[1];\n        compColor[offsetColor + 2] = col[2];\n        compColor[offsetColor + 3] = alpha;\n\n        offsetColor += 4;\n      }\n    }\n\n    return compColor;\n  }\n\n  renderQuadTexture(\n    blending,\n    texture,\n    blurTexture1,\n    blurTexture2,\n    blurTexture3,\n    blurMins,\n    blurMaxs,\n    mdVSFrame,\n    mdVSQs,\n    warpColor\n  ) {\n    const compColors = this.generateCompColors(blending, mdVSFrame, warpColor);\n\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\n    this.gl.bufferData(\n      this.gl.ELEMENT_ARRAY_BUFFER,\n      this.indices,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.vertices,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.compColorVertexBuf);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, compColors, this.gl.STATIC_DRAW);\n\n    this.gl.vertexAttribPointer(\n      this.compColorLocation,\n      4,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.compColorLocation);\n\n    const wrapping =\n      mdVSFrame.wrap !== 0 ? this.gl.REPEAT : this.gl.CLAMP_TO_EDGE;\n    this.gl.samplerParameteri(\n      this.mainSampler,\n      this.gl.TEXTURE_WRAP_S,\n      wrapping\n    );\n    this.gl.samplerParameteri(\n      this.mainSampler,\n      this.gl.TEXTURE_WRAP_T,\n      wrapping\n    );\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(0, this.mainSampler);\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    this.gl.activeTexture(this.gl.TEXTURE1);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(1, this.mainSamplerFW);\n    this.gl.uniform1i(this.textureFWLoc, 1);\n\n    this.gl.activeTexture(this.gl.TEXTURE2);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(2, this.mainSamplerFC);\n    this.gl.uniform1i(this.textureFCLoc, 2);\n\n    this.gl.activeTexture(this.gl.TEXTURE3);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(3, this.mainSamplerPW);\n    this.gl.uniform1i(this.texturePWLoc, 3);\n\n    this.gl.activeTexture(this.gl.TEXTURE4);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.bindSampler(4, this.mainSamplerPC);\n    this.gl.uniform1i(this.texturePCLoc, 4);\n\n    this.gl.activeTexture(this.gl.TEXTURE5);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture1);\n    this.gl.uniform1i(this.blurTexture1Loc, 5);\n\n    this.gl.activeTexture(this.gl.TEXTURE6);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture2);\n    this.gl.uniform1i(this.blurTexture2Loc, 6);\n\n    this.gl.activeTexture(this.gl.TEXTURE7);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture3);\n    this.gl.uniform1i(this.blurTexture3Loc, 7);\n\n    this.gl.activeTexture(this.gl.TEXTURE8);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\n    this.gl.uniform1i(this.noiseLQLoc, 8);\n\n    this.gl.activeTexture(this.gl.TEXTURE9);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexMQ);\n    this.gl.uniform1i(this.noiseMQLoc, 9);\n\n    this.gl.activeTexture(this.gl.TEXTURE10);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexHQ);\n    this.gl.uniform1i(this.noiseHQLoc, 10);\n\n    this.gl.activeTexture(this.gl.TEXTURE11);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQLite);\n    this.gl.uniform1i(this.noiseLQLiteLoc, 11);\n\n    this.gl.activeTexture(this.gl.TEXTURE12);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\n    this.gl.bindSampler(12, this.noise.noiseTexPointLQ);\n    this.gl.uniform1i(this.noisePointLQLoc, 12);\n\n    this.gl.activeTexture(this.gl.TEXTURE13);\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolLQ);\n    this.gl.uniform1i(this.noiseVolLQLoc, 13);\n\n    this.gl.activeTexture(this.gl.TEXTURE14);\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolHQ);\n    this.gl.uniform1i(this.noiseVolHQLoc, 14);\n\n    for (let i = 0; i < this.userTextures.length; i++) {\n      const userTexture = this.userTextures[i];\n      this.gl.activeTexture(this.gl.TEXTURE15 + i);\n      this.gl.bindTexture(\n        this.gl.TEXTURE_2D,\n        this.image.getTexture(userTexture.sampler)\n      );\n      this.gl.uniform1i(userTexture.textureLoc, 15 + i);\n    }\n\n    this.gl.uniform1f(this.timeLoc, mdVSFrame.time);\n    this.gl.uniform1f(this.gammaAdjLoc, mdVSFrame.gammaadj);\n    this.gl.uniform1f(this.echoZoomLoc, mdVSFrame.echo_zoom);\n    this.gl.uniform1f(this.echoAlphaLoc, mdVSFrame.echo_alpha);\n    this.gl.uniform1f(this.echoOrientationLoc, mdVSFrame.echo_orient);\n    this.gl.uniform1i(this.invertLoc, mdVSFrame.invert);\n    this.gl.uniform1i(this.brightenLoc, mdVSFrame.brighten);\n    this.gl.uniform1i(this.darkenLoc, mdVSFrame.darken);\n    this.gl.uniform1i(this.solarizeLoc, mdVSFrame.solarize);\n    this.gl.uniform2fv(this.resolutionLoc, [this.texsizeX, this.texsizeY]);\n    this.gl.uniform4fv(this.aspectLoc, [\n      this.aspectx,\n      this.aspecty,\n      this.invAspectx,\n      this.invAspecty,\n    ]);\n    this.gl.uniform4fv(\n      this.texsizeLoc,\n      new Float32Array([\n        this.texsizeX,\n        this.texsizeY,\n        1.0 / this.texsizeX,\n        1.0 / this.texsizeY,\n      ])\n    );\n    this.gl.uniform4fv(this.texsizeNoiseLQLoc, [256, 256, 1 / 256, 1 / 256]);\n    this.gl.uniform4fv(this.texsizeNoiseMQLoc, [256, 256, 1 / 256, 1 / 256]);\n    this.gl.uniform4fv(this.texsizeNoiseHQLoc, [256, 256, 1 / 256, 1 / 256]);\n    this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc, [32, 32, 1 / 32, 1 / 32]);\n    this.gl.uniform4fv(this.texsizeNoiseVolLQLoc, [32, 32, 1 / 32, 1 / 32]);\n    this.gl.uniform4fv(this.texsizeNoiseVolHQLoc, [32, 32, 1 / 32, 1 / 32]);\n    this.gl.uniform1f(this.bassLoc, mdVSFrame.bass);\n    this.gl.uniform1f(this.midLoc, mdVSFrame.mid);\n    this.gl.uniform1f(this.trebLoc, mdVSFrame.treb);\n    this.gl.uniform1f(\n      this.volLoc,\n      (mdVSFrame.bass + mdVSFrame.mid + mdVSFrame.treb) / 3\n    );\n    this.gl.uniform1f(this.bassAttLoc, mdVSFrame.bass_att);\n    this.gl.uniform1f(this.midAttLoc, mdVSFrame.mid_att);\n    this.gl.uniform1f(this.trebAttLoc, mdVSFrame.treb_att);\n    this.gl.uniform1f(\n      this.volAttLoc,\n      (mdVSFrame.bass_att + mdVSFrame.mid_att + mdVSFrame.treb_att) / 3\n    );\n    this.gl.uniform1f(this.frameLoc, mdVSFrame.frame);\n    this.gl.uniform1f(this.fpsLoc, mdVSFrame.fps);\n    this.gl.uniform4fv(this.randPresetLoc, mdVSFrame.rand_preset);\n    this.gl.uniform4fv(\n      this.randFrameLoc,\n      new Float32Array([\n        Math.random(),\n        Math.random(),\n        Math.random(),\n        Math.random(),\n      ])\n    );\n    this.gl.uniform1f(this.fShaderLoc, mdVSFrame.fshader);\n\n    this.gl.uniform4fv(\n      this.qaLoc,\n      new Float32Array([\n        mdVSQs.q1 || 0,\n        mdVSQs.q2 || 0,\n        mdVSQs.q3 || 0,\n        mdVSQs.q4 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qbLoc,\n      new Float32Array([\n        mdVSQs.q5 || 0,\n        mdVSQs.q6 || 0,\n        mdVSQs.q7 || 0,\n        mdVSQs.q8 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qcLoc,\n      new Float32Array([\n        mdVSQs.q9 || 0,\n        mdVSQs.q10 || 0,\n        mdVSQs.q11 || 0,\n        mdVSQs.q12 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qdLoc,\n      new Float32Array([\n        mdVSQs.q13 || 0,\n        mdVSQs.q14 || 0,\n        mdVSQs.q15 || 0,\n        mdVSQs.q16 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qeLoc,\n      new Float32Array([\n        mdVSQs.q17 || 0,\n        mdVSQs.q18 || 0,\n        mdVSQs.q19 || 0,\n        mdVSQs.q20 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qfLoc,\n      new Float32Array([\n        mdVSQs.q21 || 0,\n        mdVSQs.q22 || 0,\n        mdVSQs.q23 || 0,\n        mdVSQs.q24 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qgLoc,\n      new Float32Array([\n        mdVSQs.q25 || 0,\n        mdVSQs.q26 || 0,\n        mdVSQs.q27 || 0,\n        mdVSQs.q28 || 0,\n      ])\n    );\n    this.gl.uniform4fv(\n      this.qhLoc,\n      new Float32Array([\n        mdVSQs.q29 || 0,\n        mdVSQs.q30 || 0,\n        mdVSQs.q31 || 0,\n        mdVSQs.q32 || 0,\n      ])\n    );\n    this.gl.uniform4fv(this.slowRoamCosLoc, [\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.005),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.008),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.013),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.022),\n    ]);\n    this.gl.uniform4fv(this.roamCosLoc, [\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.3),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 1.3),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 5.0),\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 20.0),\n    ]);\n    this.gl.uniform4fv(this.slowRoamSinLoc, [\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.005),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.008),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.013),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.022),\n    ]);\n    this.gl.uniform4fv(this.roamSinLoc, [\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.3),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 1.3),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 5.0),\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 20.0),\n    ]);\n\n    this.bindBlurVals(blurMins, blurMaxs);\n\n    if (blending) {\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n    } else {\n      this.gl.disable(this.gl.BLEND);\n    }\n\n    this.gl.drawElements(\n      this.gl.TRIANGLES,\n      this.indices.length,\n      this.gl.UNSIGNED_SHORT,\n      0\n    );\n\n    if (!blending) {\n      this.gl.enable(this.gl.BLEND);\n    }\n  }\n}\n","import ShaderUtils from \"./shaderUtils\";\n\nexport default class OutputShader {\n  constructor(gl, opts) {\n    this.gl = gl;\n\n    this.textureRatio = opts.textureRatio;\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\n\n    this.vertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    if (this.useFXAA()) {\n      this.createFXAAShader();\n    } else {\n      this.createShader();\n    }\n  }\n\n  useFXAA() {\n    return this.textureRatio <= 1;\n  }\n\n  updateGlobals(opts) {\n    this.textureRatio = opts.textureRatio;\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n\n    this.gl.deleteProgram(this.shaderProgram);\n\n    if (this.useFXAA()) {\n      this.createFXAAShader();\n    } else {\n      this.createShader();\n    }\n  }\n\n  // based on https://github.com/mattdesl/glsl-fxaa\n  createFXAAShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       out vec2 v_rgbM;\n       out vec2 v_rgbNW;\n       out vec2 v_rgbNE;\n       out vec2 v_rgbSW;\n       out vec2 v_rgbSE;\n       uniform vec4 texsize;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n\n         v_rgbM = aPos * halfmad + halfmad;\n         v_rgbNW = v_rgbM + (vec2(-1.0, -1.0) * texsize.zx);\n         v_rgbNE = v_rgbM + (vec2(1.0, -1.0) * texsize.zx);\n         v_rgbSW = v_rgbM + (vec2(-1.0, 1.0) * texsize.zx);\n         v_rgbSE = v_rgbM + (vec2(1.0, 1.0) * texsize.zx);\n       }`\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `#version 300 es\n       precision ${this.floatPrecision} float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 v_rgbM;\n       in vec2 v_rgbNW;\n       in vec2 v_rgbNE;\n       in vec2 v_rgbSW;\n       in vec2 v_rgbSE;\n       out vec4 fragColor;\n       uniform vec4 texsize;\n       uniform sampler2D uTexture;\n\n       #ifndef FXAA_REDUCE_MIN\n         #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n       #endif\n       #ifndef FXAA_REDUCE_MUL\n         #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n       #endif\n       #ifndef FXAA_SPAN_MAX\n         #define FXAA_SPAN_MAX     8.0\n       #endif\n\n       void main(void) {\n         vec4 color;\n         vec3 rgbNW = textureLod(uTexture, v_rgbNW, 0.0).xyz;\n         vec3 rgbNE = textureLod(uTexture, v_rgbNE, 0.0).xyz;\n         vec3 rgbSW = textureLod(uTexture, v_rgbSW, 0.0).xyz;\n         vec3 rgbSE = textureLod(uTexture, v_rgbSE, 0.0).xyz;\n         vec3 rgbM  = textureLod(uTexture, v_rgbM, 0.0).xyz;\n         vec3 luma = vec3(0.299, 0.587, 0.114);\n         float lumaNW = dot(rgbNW, luma);\n         float lumaNE = dot(rgbNE, luma);\n         float lumaSW = dot(rgbSW, luma);\n         float lumaSE = dot(rgbSE, luma);\n         float lumaM  = dot(rgbM,  luma);\n         float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n         float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n         mediump vec2 dir;\n         dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n         dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n         float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                               (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n         float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n         dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n                   max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                   dir * rcpDirMin)) * texsize.zw;\n\n         vec3 rgbA = 0.5 * (\n             textureLod(uTexture, v_rgbM + dir * (1.0 / 3.0 - 0.5), 0.0).xyz +\n             textureLod(uTexture, v_rgbM + dir * (2.0 / 3.0 - 0.5), 0.0).xyz);\n         vec3 rgbB = rgbA * 0.5 + 0.25 * (\n             textureLod(uTexture, v_rgbM + dir * -0.5, 0.0).xyz +\n             textureLod(uTexture, v_rgbM + dir * 0.5, 0.0).xyz);\n\n         float lumaB = dot(rgbB, luma);\n         if ((lumaB < lumaMin) || (lumaB > lumaMax))\n           color = vec4(rgbA, 1.0);\n         else\n           color = vec4(rgbB, 1.0);\n\n         fragColor = color;\n       }`\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n    this.texsizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"texsize\");\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       out vec2 uv;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n         uv = aPos * halfmad + halfmad;\n       }`\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `#version 300 es\n       precision ${this.floatPrecision} float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n\n       void main(void) {\n         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);\n       }`\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n  }\n\n  renderQuadTexture(texture) {\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.positions,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    if (this.useFXAA()) {\n      this.gl.uniform4fv(\n        this.texsizeLoc,\n        new Float32Array([\n          this.texsizeX,\n          this.texsizeY,\n          1.0 / this.texsizeX,\n          1.0 / this.texsizeY,\n        ])\n      );\n    }\n\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n  }\n}\n","import ShaderUtils from \"./shaderUtils\";\n\nexport default class ResampleShader {\n  constructor(gl) {\n    this.gl = gl;\n\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\n\n    this.vertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       out vec2 uv;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n         uv = aPos * halfmad + halfmad;\n       }`\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `#version 300 es\n       precision ${this.floatPrecision} float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n\n       void main(void) {\n         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);\n       }`\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n  }\n\n  renderQuadTexture(texture) {\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.positions,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n  }\n}\n","import ShaderUtils from \"../shaderUtils\";\n\nexport default class BlurVertical {\n  constructor(gl, blurLevel) {\n    this.gl = gl;\n    this.blurLevel = blurLevel;\n\n    const w = [4.0, 3.8, 3.5, 2.9, 1.9, 1.2, 0.7, 0.3];\n    const w1V = w[0] + w[1] + w[2] + w[3];\n    const w2V = w[4] + w[5] + w[6] + w[7];\n    const d1V = 0 + 2 * ((w[2] + w[3]) / w1V);\n    const d2V = 2 + 2 * ((w[6] + w[7]) / w2V);\n\n    this.wds = new Float32Array([w1V, w2V, d1V, d2V]);\n    this.wDiv = 1.0 / ((w1V + w2V) * 2);\n\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\n\n    this.vertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      const vec2 halfmad = vec2(0.5);\n      in vec2 aPos;\n      out vec2 uv;\n      void main(void) {\n        gl_Position = vec4(aPos, 0.0, 1.0);\n        uv = aPos * halfmad + halfmad;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `#version 300 es\n       precision ${this.floatPrecision} float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform vec4 texsize;\n       uniform float ed1;\n       uniform float ed2;\n       uniform float ed3;\n       uniform vec4 wds;\n       uniform float wdiv;\n\n       void main(void) {\n         float w1 = wds[0];\n         float w2 = wds[1];\n         float d1 = wds[2];\n         float d2 = wds[3];\n\n         vec2 uv2 = uv.xy;\n\n         vec3 blur =\n           ( texture(uTexture, uv2 + vec2(0.0, d1 * texsize.w) ).xyz\n           + texture(uTexture, uv2 + vec2(0.0,-d1 * texsize.w) ).xyz) * w1 +\n           ( texture(uTexture, uv2 + vec2(0.0, d2 * texsize.w) ).xyz\n           + texture(uTexture, uv2 + vec2(0.0,-d2 * texsize.w) ).xyz) * w2;\n\n         blur.xyz *= wdiv;\n\n         float t = min(min(uv.x, uv.y), 1.0 - max(uv.x, uv.y));\n         t = sqrt(t);\n         t = ed1 + ed2 * clamp(t * ed3, 0.0, 1.0);\n         blur.xyz *= t;\n\n         fragColor = vec4(blur, 1.0);\n       }`\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n    this.texsizeLocation = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize\"\n    );\n    this.ed1Loc = this.gl.getUniformLocation(this.shaderProgram, \"ed1\");\n    this.ed2Loc = this.gl.getUniformLocation(this.shaderProgram, \"ed2\");\n    this.ed3Loc = this.gl.getUniformLocation(this.shaderProgram, \"ed3\");\n    this.wdsLocation = this.gl.getUniformLocation(this.shaderProgram, \"wds\");\n    this.wdivLoc = this.gl.getUniformLocation(this.shaderProgram, \"wdiv\");\n  }\n\n  renderQuadTexture(texture, mdVSFrame, srcTexsize) {\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.positions,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    const b1ed = this.blurLevel === 0 ? mdVSFrame.b1ed : 0.0;\n\n    this.gl.uniform4fv(this.texsizeLocation, [\n      srcTexsize[0],\n      srcTexsize[1],\n      1.0 / srcTexsize[0],\n      1.0 / srcTexsize[1],\n    ]);\n    this.gl.uniform1f(this.ed1Loc, 1.0 - b1ed);\n    this.gl.uniform1f(this.ed2Loc, b1ed);\n    this.gl.uniform1f(this.ed3Loc, 5.0);\n    this.gl.uniform4fv(this.wdsLocation, this.wds);\n    this.gl.uniform1f(this.wdivLoc, this.wDiv);\n\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n  }\n}\n","import ShaderUtils from \"../shaderUtils\";\n\nexport default class BlurHorizontal {\n  constructor(gl, blurLevel) {\n    this.gl = gl;\n    this.blurLevel = blurLevel;\n\n    const w = [4.0, 3.8, 3.5, 2.9, 1.9, 1.2, 0.7, 0.3];\n    const w1H = w[0] + w[1];\n    const w2H = w[2] + w[3];\n    const w3H = w[4] + w[5];\n    const w4H = w[6] + w[7];\n    const d1H = 0 + (2 * w[1]) / w1H;\n    const d2H = 2 + (2 * w[3]) / w2H;\n    const d3H = 4 + (2 * w[5]) / w3H;\n    const d4H = 6 + (2 * w[7]) / w4H;\n\n    this.ws = new Float32Array([w1H, w2H, w3H, w4H]);\n    this.ds = new Float32Array([d1H, d2H, d3H, d4H]);\n    this.wDiv = 0.5 / (w1H + w2H + w3H + w4H);\n\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\n\n    this.vertexBuf = this.gl.createBuffer();\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `\n      #version 300 es\n      const vec2 halfmad = vec2(0.5);\n      in vec2 aPos;\n      out vec2 uv;\n      void main(void) {\n        gl_Position = vec4(aPos, 0.0, 1.0);\n        uv = aPos * halfmad + halfmad;\n      }\n      `.trim()\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `#version 300 es\n       precision ${this.floatPrecision} float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform vec4 texsize;\n       uniform float scale;\n       uniform float bias;\n       uniform vec4 ws;\n       uniform vec4 ds;\n       uniform float wdiv;\n\n       void main(void) {\n         float w1 = ws[0];\n         float w2 = ws[1];\n         float w3 = ws[2];\n         float w4 = ws[3];\n         float d1 = ds[0];\n         float d2 = ds[1];\n         float d3 = ds[2];\n         float d4 = ds[3];\n\n         vec2 uv2 = uv.xy;\n\n         vec3 blur =\n           ( texture(uTexture, uv2 + vec2( d1 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d1 * texsize.z,0.0) ).xyz) * w1 +\n           ( texture(uTexture, uv2 + vec2( d2 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d2 * texsize.z,0.0) ).xyz) * w2 +\n           ( texture(uTexture, uv2 + vec2( d3 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d3 * texsize.z,0.0) ).xyz) * w3 +\n           ( texture(uTexture, uv2 + vec2( d4 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d4 * texsize.z,0.0) ).xyz) * w4;\n\n         blur.xyz *= wdiv;\n         blur.xyz = blur.xyz * scale + bias;\n\n         fragColor = vec4(blur, 1.0);\n       }`\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n    this.texsizeLocation = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"texsize\"\n    );\n    this.scaleLoc = this.gl.getUniformLocation(this.shaderProgram, \"scale\");\n    this.biasLoc = this.gl.getUniformLocation(this.shaderProgram, \"bias\");\n    this.wsLoc = this.gl.getUniformLocation(this.shaderProgram, \"ws\");\n    this.dsLocation = this.gl.getUniformLocation(this.shaderProgram, \"ds\");\n    this.wdivLoc = this.gl.getUniformLocation(this.shaderProgram, \"wdiv\");\n  }\n\n  getScaleAndBias(blurMins, blurMaxs) {\n    const scale = [1, 1, 1];\n    const bias = [0, 0, 0];\n\n    let tempMin;\n    let tempMax;\n    scale[0] = 1.0 / (blurMaxs[0] - blurMins[0]);\n    bias[0] = -blurMins[0] * scale[0];\n    tempMin = (blurMins[1] - blurMins[0]) / (blurMaxs[0] - blurMins[0]);\n    tempMax = (blurMaxs[1] - blurMins[0]) / (blurMaxs[0] - blurMins[0]);\n    scale[1] = 1.0 / (tempMax - tempMin);\n    bias[1] = -tempMin * scale[1];\n    tempMin = (blurMins[2] - blurMins[1]) / (blurMaxs[1] - blurMins[1]);\n    tempMax = (blurMaxs[2] - blurMins[1]) / (blurMaxs[1] - blurMins[1]);\n    scale[2] = 1.0 / (tempMax - tempMin);\n    bias[2] = -tempMin * scale[2];\n\n    return {\n      scale: scale[this.blurLevel],\n      bias: bias[this.blurLevel],\n    };\n  }\n\n  renderQuadTexture(texture, mdVSFrame, blurMins, blurMaxs, srcTexsize) {\n    this.gl.useProgram(this.shaderProgram);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.positions,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    const { scale, bias } = this.getScaleAndBias(blurMins, blurMaxs);\n\n    this.gl.uniform4fv(this.texsizeLocation, [\n      srcTexsize[0],\n      srcTexsize[1],\n      1.0 / srcTexsize[0],\n      1.0 / srcTexsize[1],\n    ]);\n    this.gl.uniform1f(this.scaleLoc, scale);\n    this.gl.uniform1f(this.biasLoc, bias);\n    this.gl.uniform4fv(this.wsLoc, this.ws);\n    this.gl.uniform4fv(this.dsLocation, this.ds);\n    this.gl.uniform1f(this.wdivLoc, this.wDiv);\n\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n  }\n}\n","import BlurVertical from \"./blurVertical\";\nimport BlurHorizontal from \"./blurHorizontal\";\n\nexport default class BlurShader {\n  constructor(blurLevel, blurRatios, gl, opts = {}) {\n    this.blurLevel = blurLevel;\n    this.blurRatios = blurRatios;\n    this.gl = gl;\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n\n    this.anisoExt =\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\n\n    this.blurHorizontalFrameBuffer = this.gl.createFramebuffer();\n    this.blurVerticalFrameBuffer = this.gl.createFramebuffer();\n\n    this.blurHorizontalTexture = this.gl.createTexture();\n    this.blurVerticalTexture = this.gl.createTexture();\n\n    this.setupFrameBufferTextures();\n\n    this.blurHorizontal = new BlurHorizontal(gl, this.blurLevel, opts);\n    this.blurVertical = new BlurVertical(gl, this.blurLevel, opts);\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n\n    this.setupFrameBufferTextures();\n  }\n\n  getTextureSize(sizeRatio) {\n    let sizeX = Math.max(this.texsizeX * sizeRatio, 16);\n    sizeX = Math.floor((sizeX + 3) / 16) * 16;\n    let sizeY = Math.max(this.texsizeY * sizeRatio, 16);\n    sizeY = Math.floor((sizeY + 3) / 4) * 4;\n    return [sizeX, sizeY];\n  }\n\n  setupFrameBufferTextures() {\n    const srcBlurRatios =\n      this.blurLevel > 0 ? this.blurRatios[this.blurLevel - 1] : [1, 1];\n    const dstBlurRatios = this.blurRatios[this.blurLevel];\n    const srcTexsizeHorizontal = this.getTextureSize(srcBlurRatios[1]);\n    const dstTexsizeHorizontal = this.getTextureSize(dstBlurRatios[0]);\n    this.bindFrameBufferTexture(\n      this.blurHorizontalFrameBuffer,\n      this.blurHorizontalTexture,\n      dstTexsizeHorizontal\n    );\n\n    const srcTexsizeVertical = dstTexsizeHorizontal;\n    const dstTexsizeVertical = this.getTextureSize(dstBlurRatios[1]);\n    this.bindFrameBufferTexture(\n      this.blurVerticalFrameBuffer,\n      this.blurVerticalTexture,\n      dstTexsizeVertical\n    );\n\n    this.horizontalTexsizes = [srcTexsizeHorizontal, dstTexsizeHorizontal];\n    this.verticalTexsizes = [srcTexsizeVertical, dstTexsizeVertical];\n  }\n\n  bindFrambufferAndSetViewport(fb, texsize) {\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, fb);\n    this.gl.viewport(0, 0, texsize[0], texsize[1]);\n  }\n\n  bindFrameBufferTexture(targetFrameBuffer, targetTexture, texsize) {\n    this.gl.bindTexture(this.gl.TEXTURE_2D, targetTexture);\n\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\n    this.gl.texImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      texsize[0],\n      texsize[1],\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      new Uint8Array(texsize[0] * texsize[1] * 4)\n    );\n\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.CLAMP_TO_EDGE\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.CLAMP_TO_EDGE\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.LINEAR_MIPMAP_LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.LINEAR\n    );\n    if (this.anisoExt) {\n      const max = this.gl.getParameter(\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\n      );\n      this.gl.texParameterf(\n        this.gl.TEXTURE_2D,\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\n        max\n      );\n    }\n\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, targetFrameBuffer);\n    this.gl.framebufferTexture2D(\n      this.gl.FRAMEBUFFER,\n      this.gl.COLOR_ATTACHMENT0,\n      this.gl.TEXTURE_2D,\n      targetTexture,\n      0\n    );\n  }\n\n  renderBlurTexture(prevTexture, mdVSFrame, blurMins, blurMaxs) {\n    this.bindFrambufferAndSetViewport(\n      this.blurHorizontalFrameBuffer,\n      this.horizontalTexsizes[1]\n    );\n    this.blurHorizontal.renderQuadTexture(\n      prevTexture,\n      mdVSFrame,\n      blurMins,\n      blurMaxs,\n      this.horizontalTexsizes[0]\n    );\n\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.blurHorizontalTexture);\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.bindFrambufferAndSetViewport(\n      this.blurVerticalFrameBuffer,\n      this.verticalTexsizes[1]\n    );\n    this.blurVertical.renderQuadTexture(\n      this.blurHorizontalTexture,\n      mdVSFrame,\n      this.verticalTexsizes[0]\n    );\n\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.blurVerticalTexture);\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n  }\n}\n","export default class Noise {\n  constructor(gl) {\n    this.gl = gl;\n\n    this.anisoExt =\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\n\n    this.noiseTexLQ = this.gl.createTexture();\n    this.noiseTexLQLite = this.gl.createTexture();\n    this.noiseTexMQ = this.gl.createTexture();\n    this.noiseTexHQ = this.gl.createTexture();\n\n    this.noiseTexVolLQ = this.gl.createTexture();\n    this.noiseTexVolHQ = this.gl.createTexture();\n\n    this.nTexArrLQ = Noise.createNoiseTex(256, 1);\n    this.nTexArrLQLite = Noise.createNoiseTex(32, 1);\n    this.nTexArrMQ = Noise.createNoiseTex(256, 4);\n    this.nTexArrHQ = Noise.createNoiseTex(256, 8);\n\n    this.nTexArrVolLQ = Noise.createNoiseVolTex(32, 1);\n    this.nTexArrVolHQ = Noise.createNoiseVolTex(32, 4);\n\n    this.bindTexture(this.noiseTexLQ, this.nTexArrLQ, 256, 256);\n    this.bindTexture(this.noiseTexLQLite, this.nTexArrLQLite, 32, 32);\n    this.bindTexture(this.noiseTexMQ, this.nTexArrMQ, 256, 256);\n    this.bindTexture(this.noiseTexHQ, this.nTexArrHQ, 256, 256);\n\n    this.bindTexture3D(this.noiseTexVolLQ, this.nTexArrVolLQ, 32, 32, 32);\n    this.bindTexture3D(this.noiseTexVolHQ, this.nTexArrVolHQ, 32, 32, 32);\n\n    this.noiseTexPointLQ = this.gl.createSampler();\n    gl.samplerParameteri(\n      this.noiseTexPointLQ,\n      gl.TEXTURE_MIN_FILTER,\n      gl.NEAREST_MIPMAP_NEAREST\n    );\n    gl.samplerParameteri(\n      this.noiseTexPointLQ,\n      gl.TEXTURE_MAG_FILTER,\n      gl.NEAREST\n    );\n    gl.samplerParameteri(this.noiseTexPointLQ, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.samplerParameteri(this.noiseTexPointLQ, gl.TEXTURE_WRAP_T, gl.REPEAT);\n  }\n\n  bindTexture(texture, data, width, height) {\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\n    this.gl.texImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      width,\n      height,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      data\n    );\n\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.LINEAR_MIPMAP_LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.LINEAR\n    );\n    if (this.anisoExt) {\n      const max = this.gl.getParameter(\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\n      );\n      this.gl.texParameterf(\n        this.gl.TEXTURE_2D,\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\n        max\n      );\n    }\n  }\n\n  bindTexture3D(texture, data, width, height, depth) {\n    this.gl.bindTexture(this.gl.TEXTURE_3D, texture);\n\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\n    this.gl.texImage3D(\n      this.gl.TEXTURE_3D,\n      0,\n      this.gl.RGBA,\n      width,\n      height,\n      depth,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      data\n    );\n\n    this.gl.generateMipmap(this.gl.TEXTURE_3D);\n\n    this.gl.texParameteri(\n      this.gl.TEXTURE_3D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_3D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_3D,\n      this.gl.TEXTURE_WRAP_R,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_3D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.LINEAR_MIPMAP_LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_3D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.LINEAR\n    );\n    if (this.anisoExt) {\n      const max = this.gl.getParameter(\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\n      );\n      this.gl.texParameterf(\n        this.gl.TEXTURE_3D,\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\n        max\n      );\n    }\n  }\n\n  static fCubicInterpolate(y0, y1, y2, y3, t) {\n    const t2 = t * t;\n    const t3 = t * t2;\n    const a0 = y3 - y2 - y0 + y1;\n    const a1 = y0 - y1 - a0;\n    const a2 = y2 - y0;\n    const a3 = y1;\n\n    return a0 * t3 + a1 * t2 + a2 * t + a3;\n  }\n\n  static dwCubicInterpolate(y0, y1, y2, y3, t) {\n    const ret = [];\n    for (let i = 0; i < 4; i++) {\n      let f = Noise.fCubicInterpolate(\n        y0[i] / 255.0,\n        y1[i] / 255.0,\n        y2[i] / 255.0,\n        y3[i] / 255.0,\n        t\n      );\n      f = Math.clamp(f, 0, 1);\n      ret[i] = f * 255;\n    }\n\n    return ret;\n  }\n\n  static createNoiseVolTex(noiseSize, zoom) {\n    const nsize = noiseSize * noiseSize * noiseSize;\n    const texArr = new Uint8Array(nsize * 4);\n    const texRange = zoom > 1 ? 216 : 256;\n    const halfTexRange = texRange * 0.5;\n    for (let i = 0; i < nsize; i++) {\n      texArr[i * 4 + 0] = Math.floor(Math.random() * texRange + halfTexRange);\n      texArr[i * 4 + 1] = Math.floor(Math.random() * texRange + halfTexRange);\n      texArr[i * 4 + 2] = Math.floor(Math.random() * texRange + halfTexRange);\n      texArr[i * 4 + 3] = Math.floor(Math.random() * texRange + halfTexRange);\n    }\n\n    const wordsPerSlice = noiseSize * noiseSize;\n    const wordsPerLine = noiseSize;\n    if (zoom > 1) {\n      for (let z = 0; z < noiseSize; z += zoom) {\n        for (let y = 0; y < noiseSize; y += zoom) {\n          for (let x = 0; x < noiseSize; x++) {\n            if (x % zoom !== 0) {\n              const baseX = Math.floor(x / zoom) * zoom + noiseSize;\n              const baseY = z * wordsPerSlice + y * wordsPerLine;\n\n              const y0 = [];\n              const y1 = [];\n              const y2 = [];\n              const y3 = [];\n              for (let i = 0; i < 4; i++) {\n                y0[i] =\n                  texArr[baseY * 4 + ((baseX - zoom) % noiseSize) * 4 + i];\n                y1[i] = texArr[baseY * 4 + (baseX % noiseSize) * 4 + i];\n                y2[i] =\n                  texArr[baseY * 4 + ((baseX + zoom) % noiseSize) * 4 + i];\n                y3[i] =\n                  texArr[baseY * 4 + ((baseX + zoom * 2) % noiseSize) * 4 + i];\n              }\n\n              const t = (x % zoom) / zoom;\n              const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\n\n              for (let i = 0; i < 4; i++) {\n                const offset = x * 4 + i;\n                texArr[z * wordsPerSlice * 4 + y * wordsPerLine * 4 + offset] =\n                  result[i];\n              }\n            }\n          }\n        }\n      }\n\n      for (let z = 0; z < noiseSize; z += zoom) {\n        for (let x = 0; x < noiseSize; x++) {\n          for (let y = 0; y < noiseSize; y++) {\n            if (y % zoom !== 0) {\n              const baseY = Math.floor(y / zoom) * zoom + noiseSize;\n              const baseZ = z * wordsPerSlice;\n\n              const y0 = [];\n              const y1 = [];\n              const y2 = [];\n              const y3 = [];\n              for (let i = 0; i < 4; i++) {\n                const offset = x * 4 + baseZ * 4 + i;\n                y0[i] =\n                  texArr[\n                    ((baseY - zoom) % noiseSize) * wordsPerLine * 4 + offset\n                  ];\n                y1[i] = texArr[(baseY % noiseSize) * wordsPerLine * 4 + offset];\n                y2[i] =\n                  texArr[\n                    ((baseY + zoom) % noiseSize) * wordsPerLine * 4 + offset\n                  ];\n                y3[i] =\n                  texArr[\n                    ((baseY + zoom * 2) % noiseSize) * wordsPerLine * 4 + offset\n                  ];\n              }\n\n              const t = (y % zoom) / zoom;\n              const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\n\n              for (let i = 0; i < 4; i++) {\n                const offset = x * 4 + baseZ * 4 + i;\n                texArr[y * wordsPerLine * 4 + offset] = result[i];\n              }\n            }\n          }\n        }\n      }\n\n      for (let x = 0; x < noiseSize; x++) {\n        for (let y = 0; y < noiseSize; y++) {\n          for (let z = 0; z < noiseSize; z++) {\n            if (z % zoom !== 0) {\n              const baseY = y * wordsPerLine;\n              const baseZ = Math.floor(z / zoom) * zoom + noiseSize;\n\n              const y0 = [];\n              const y1 = [];\n              const y2 = [];\n              const y3 = [];\n              for (let i = 0; i < 4; i++) {\n                const offset = x * 4 + baseY * 4 + i;\n                y0[i] =\n                  texArr[\n                    ((baseZ - zoom) % noiseSize) * wordsPerSlice * 4 + offset\n                  ];\n                y1[i] =\n                  texArr[(baseZ % noiseSize) * wordsPerSlice * 4 + offset];\n                y2[i] =\n                  texArr[\n                    ((baseZ + zoom) % noiseSize) * wordsPerSlice * 4 + offset\n                  ];\n                y3[i] =\n                  texArr[\n                    ((baseZ + zoom * 2) % noiseSize) * wordsPerSlice * 4 +\n                      offset\n                  ];\n              }\n\n              const t = (y % zoom) / zoom;\n              const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\n\n              for (let i = 0; i < 4; i++) {\n                const offset = x * 4 + baseY * 4 + i;\n                texArr[z * wordsPerSlice * 4 + offset] = result[i];\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return texArr;\n  }\n\n  static createNoiseTex(noiseSize, zoom) {\n    const nsize = noiseSize * noiseSize;\n    const texArr = new Uint8Array(nsize * 4);\n    const texRange = zoom > 1 ? 216 : 256;\n    const halfTexRange = texRange * 0.5;\n    for (let i = 0; i < nsize; i++) {\n      texArr[i * 4 + 0] = Math.floor(Math.random() * texRange + halfTexRange);\n      texArr[i * 4 + 1] = Math.floor(Math.random() * texRange + halfTexRange);\n      texArr[i * 4 + 2] = Math.floor(Math.random() * texRange + halfTexRange);\n      texArr[i * 4 + 3] = Math.floor(Math.random() * texRange + halfTexRange);\n    }\n\n    if (zoom > 1) {\n      for (let y = 0; y < noiseSize; y += zoom) {\n        for (let x = 0; x < noiseSize; x++) {\n          if (x % zoom !== 0) {\n            const baseX = Math.floor(x / zoom) * zoom + noiseSize;\n            const baseY = y * noiseSize;\n\n            const y0 = [];\n            const y1 = [];\n            const y2 = [];\n            const y3 = [];\n            for (let z = 0; z < 4; z++) {\n              y0[z] = texArr[baseY * 4 + ((baseX - zoom) % noiseSize) * 4 + z];\n              y1[z] = texArr[baseY * 4 + (baseX % noiseSize) * 4 + z];\n              y2[z] = texArr[baseY * 4 + ((baseX + zoom) % noiseSize) * 4 + z];\n              y3[z] =\n                texArr[baseY * 4 + ((baseX + zoom * 2) % noiseSize) * 4 + z];\n            }\n\n            const t = (x % zoom) / zoom;\n            const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\n\n            for (let z = 0; z < 4; z++) {\n              texArr[y * noiseSize * 4 + x * 4 + z] = result[z];\n            }\n          }\n        }\n      }\n\n      for (let x = 0; x < noiseSize; x++) {\n        for (let y = 0; y < noiseSize; y++) {\n          if (y % zoom !== 0) {\n            const baseY = Math.floor(y / zoom) * zoom + noiseSize;\n\n            const y0 = [];\n            const y1 = [];\n            const y2 = [];\n            const y3 = [];\n            for (let z = 0; z < 4; z++) {\n              y0[z] =\n                texArr[\n                  ((baseY - zoom) % noiseSize) * noiseSize * 4 + x * 4 + z\n                ];\n              y1[z] = texArr[(baseY % noiseSize) * noiseSize * 4 + x * 4 + z];\n              y2[z] =\n                texArr[\n                  ((baseY + zoom) % noiseSize) * noiseSize * 4 + x * 4 + z\n                ];\n              y3[z] =\n                texArr[\n                  ((baseY + zoom * 2) % noiseSize) * noiseSize * 4 + x * 4 + z\n                ];\n            }\n\n            const t = (y % zoom) / zoom;\n            const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\n\n            for (let z = 0; z < 4; z++) {\n              texArr[y * noiseSize * 4 + x * 4 + z] = result[z];\n            }\n          }\n        }\n      }\n    }\n\n    return texArr;\n  }\n}\n","export default class ImageTextures {\n  constructor(gl) {\n    this.gl = gl;\n\n    this.anisoExt =\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\n\n    this.samplers = {};\n\n    /* eslint-disable max-len */\n    //this.clouds2Image = new Image();\n    //this.clouds2Image.onload = () => {\n    //  this.samplers.clouds2 = this.gl.createTexture();\n    //  this.bindTexture(this.samplers.clouds2, this.clouds2Image, 128, 128);\n    //};\n    //this.clouds2Image.src =\n    //  \"data:image/jpeg;base64,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\";\n\n    //this.emptyImage = new Image();\n    //this.emptyImage.onload = () => {\n    //  this.samplers.empty = this.gl.createTexture();\n    //  this.bindTexture(this.samplers.empty, this.emptyImage, 1, 1);\n    //};\n    //this.emptyImage.src =\n    //  \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\";\n\n    this.samplers.empty = this.gl.createTexture();\n    this.bindTexture(this.samplers.empty, null, 1, 1);\n    /* eslint-enable max-len */\n  }\n\n  bindTexture(texture, data, width, height) {\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\n    this.gl.texImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      width,\n      height,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      data\n    );\n\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.REPEAT\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.LINEAR_MIPMAP_LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.LINEAR\n    );\n    if (this.anisoExt) {\n      const max = this.gl.getParameter(\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\n      );\n      this.gl.texParameterf(\n        this.gl.TEXTURE_2D,\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\n        max\n      );\n    }\n  }\n\n  loadExtraImages(imageData) {\n    Object.keys(imageData).forEach((imageName) => {\n      const { data, width, height } = imageData[imageName];\n      if (!this.samplers[imageName]) {\n        const image = new Image();\n        image.onload = () => {\n          this.samplers[imageName] = this.gl.createTexture();\n          this.bindTexture(this.samplers[imageName], image, width, height);\n        };\n        image.src = data;\n      }\n    });\n  }\n\n  getTexture(sampler) {\n    const tex = this.samplers[sampler];\n    if (tex) {\n      return tex;\n    }\n\n    return this.samplers.empty;\n  }\n}\n","import ShaderUtils from \"../shaders/shaderUtils\";\n\nexport default class TitleText {\n  constructor(gl, opts = {}) {\n    this.gl = gl;\n\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.buildPositions();\n\n    this.textTexture = this.gl.createTexture();\n    this.indexBuf = gl.createBuffer();\n    this.positionVertexBuf = this.gl.createBuffer();\n    this.vertexBuf = this.gl.createBuffer();\n\n    if (window.OffscreenCanvas) {\n      this.canvas = new OffscreenCanvas(this.texsizeX, this.texsizeY);\n    } else {\n      this.canvas = document.createElement(\"canvas\");\n      this.canvas.width = this.texsizeX;\n      this.canvas.height = this.texsizeY;\n    }\n    this.context2D = this.canvas.getContext(\"2d\");\n\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\n    this.createShader();\n  }\n\n  generateTitleTexture(text) {\n    this.context2D.clearRect(0, 0, this.texsizeX, this.texsizeY);\n\n    this.fontSize = Math.floor(16 * (this.texsizeX / 256));\n    this.fontSize = Math.max(this.fontSize, 6);\n    this.context2D.font = `italic ${this.fontSize}px Times New Roman`;\n\n    let titleText = text;\n    let textLength = this.context2D.measureText(titleText).width;\n    if (textLength > this.texsizeX) {\n      const percentToKeep = 0.91 * (this.texsizeX / textLength);\n      titleText = `${titleText.substring(\n        0,\n        Math.floor(titleText.length * percentToKeep)\n      )}...`;\n      textLength = this.context2D.measureText(titleText).width;\n    }\n\n    this.context2D.fillStyle = \"#FFFFFF\";\n    this.context2D.fillText(\n      titleText,\n      (this.texsizeX - textLength) / 2,\n      this.texsizeY / 2\n    );\n\n    const imageData = new Uint8Array(\n      this.context2D.getImageData(\n        0,\n        0,\n        this.texsizeX,\n        this.texsizeY\n      ).data.buffer\n    );\n\n    this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, true);\n\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.textTexture);\n    this.gl.texImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      this.texsizeX,\n      this.texsizeY,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      imageData\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.LINEAR_MIPMAP_LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.CLAMP_TO_EDGE\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.CLAMP_TO_EDGE\n    );\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n  }\n\n  updateGlobals(opts) {\n    this.texsizeX = opts.texsizeX;\n    this.texsizeY = opts.texsizeY;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.canvas.width = this.texsizeX;\n    this.canvas.height = this.texsizeY;\n  }\n\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\n  buildPositions() {\n    const width = 2;\n    const height = 2;\n\n    const widthHalf = width / 2;\n    const heightHalf = height / 2;\n\n    const gridX = 15;\n    const gridY = 7;\n\n    const gridX1 = gridX + 1;\n    const gridY1 = gridY + 1;\n\n    const segmentWidth = width / gridX;\n    const segmentHeight = height / gridY;\n\n    const vertices = [];\n    for (let iy = 0; iy < gridY1; iy++) {\n      const y = iy * segmentHeight - heightHalf;\n      for (let ix = 0; ix < gridX1; ix++) {\n        const x = ix * segmentWidth - widthHalf;\n        vertices.push(x, -y, 0);\n      }\n    }\n\n    const indices = [];\n    for (let iy = 0; iy < gridY; iy++) {\n      for (let ix = 0; ix < gridX; ix++) {\n        const a = ix + gridX1 * iy;\n        const b = ix + gridX1 * (iy + 1);\n        const c = ix + 1 + gridX1 * (iy + 1);\n        const d = ix + 1 + gridX1 * iy;\n\n        indices.push(a, b, d);\n        indices.push(b, c, d);\n      }\n    }\n\n    this.vertices = new Float32Array(vertices);\n    this.indices = new Uint16Array(indices);\n  }\n\n  createShader() {\n    this.shaderProgram = this.gl.createProgram();\n\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n    this.gl.shaderSource(\n      vertShader,\n      `#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       in vec2 aUv;\n       out vec2 uv_orig;\n       out vec2 uv;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n         uv_orig = aPos * halfmad + halfmad;\n         uv = aUv;\n       }`\n    );\n    this.gl.compileShader(vertShader);\n\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n    this.gl.shaderSource(\n      fragShader,\n      `#version 300 es\n       precision ${this.floatPrecision} float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv_orig;\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform float textColor;\n\n       void main(void) {\n         fragColor = texture(uTexture, uv) * vec4(textColor);\n       }`\n    );\n    this.gl.compileShader(fragShader);\n\n    this.gl.attachShader(this.shaderProgram, vertShader);\n    this.gl.attachShader(this.shaderProgram, fragShader);\n    this.gl.linkProgram(this.shaderProgram);\n\n    this.positionLocation = this.gl.getAttribLocation(\n      this.shaderProgram,\n      \"aPos\"\n    );\n    this.uvLocation = this.gl.getAttribLocation(this.shaderProgram, \"aUv\");\n    this.textureLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"uTexture\"\n    );\n    this.textColorLoc = this.gl.getUniformLocation(\n      this.shaderProgram,\n      \"textColor\"\n    );\n  }\n\n  generateUvs(progress, flip, globalVars) {\n    const gridX = 15;\n    const gridY = 7;\n\n    const gridX1 = gridX + 1;\n    const gridY1 = gridY + 1;\n\n    const uvs = [];\n    const vertClip = 0.75;\n    for (let j = 0; j < gridY1; j++) {\n      for (let i = 0; i < gridX1; i++) {\n        const u = i / gridX;\n        const v = (j / gridY - 0.5) * vertClip + 0.5;\n        const x = u * 2.0 - 1.0;\n        let y = v * 2.0 - 1.0;\n        if (progress >= 1) {\n          y += 1.0 / this.texsizeY;\n        }\n\n        uvs.push(x, flip ? y : -y);\n      }\n    }\n\n    const rampedProgress = Math.max(0, 1 - progress * 1.5);\n    const t2 = rampedProgress ** 1.8 * 1.3;\n    for (let j = 0; j < gridY1; j++) {\n      for (let i = 0; i < gridX1; i++) {\n        const idx = j * gridX1 + i;\n        uvs[idx] +=\n          t2 *\n          0.07 *\n          Math.sin(\n            globalVars.time * 0.31 + uvs[idx] * 0.39 - uvs[idx + 1] * 1.94\n          );\n        uvs[idx] +=\n          t2 *\n          0.044 *\n          Math.sin(\n            globalVars.time * 0.81 - uvs[idx] * 1.91 + uvs[idx + 1] * 0.27\n          );\n        uvs[idx] +=\n          t2 *\n          0.061 *\n          Math.sin(\n            globalVars.time * 1.31 + uvs[idx] * 0.61 + uvs[idx + 1] * 0.74\n          );\n\n        uvs[idx + 1] +=\n          t2 *\n          0.061 *\n          Math.sin(\n            globalVars.time * 0.37 + uvs[idx] * 1.83 + uvs[idx + 1] * 0.69\n          );\n        uvs[idx + 1] +=\n          t2 *\n          0.07 *\n          Math.sin(\n            globalVars.time * 0.67 + uvs[idx] * 0.42 - uvs[idx + 1] * 1.39\n          );\n        uvs[idx + 1] +=\n          t2 *\n          0.087 *\n          Math.sin(\n            globalVars.time * 1.07 + uvs[idx] * 3.55 + uvs[idx + 1] * 0.89\n          );\n      }\n    }\n\n    const scale = 1.01 / (progress ** 0.21 + 0.01);\n    for (let i = 0; i < uvs.length / 2; i++) {\n      uvs[i * 2] *= scale;\n      uvs[i * 2 + 1] *= scale * this.invAspecty;\n\n      // get back UVs\n      uvs[i * 2] = (uvs[i * 2] + 1) / 2.0;\n      uvs[i * 2 + 1] = (uvs[i * 2 + 1] + 1) / 2.0;\n    }\n\n    return new Float32Array(uvs);\n  }\n\n  renderTitle(progress, flip, globalVars) {\n    this.gl.useProgram(this.shaderProgram);\n\n    const progressUvs = this.generateUvs(progress, flip, globalVars);\n\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\n    this.gl.bufferData(\n      this.gl.ELEMENT_ARRAY_BUFFER,\n      this.indices,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.vertices,\n      this.gl.STATIC_DRAW\n    );\n\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      3,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, progressUvs, this.gl.STATIC_DRAW);\n\n    this.gl.vertexAttribPointer(this.uvLocation, 2, this.gl.FLOAT, false, 0, 0);\n    this.gl.enableVertexAttribArray(this.uvLocation);\n\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.textTexture);\n\n    this.gl.uniform1i(this.textureLoc, 0);\n\n    this.gl.uniform1f(this.textColorLoc, progress ** 0.3);\n\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    this.gl.drawElements(\n      this.gl.TRIANGLES,\n      this.indices.length,\n      this.gl.UNSIGNED_SHORT,\n      0\n    );\n  }\n}\n","export default class BlendPattern {\n  constructor(opts) {\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n\n    this.vertInfoA = new Float32Array(\n      (this.mesh_width + 1) * (this.mesh_height + 1)\n    );\n    this.vertInfoC = new Float32Array(\n      (this.mesh_width + 1) * (this.mesh_height + 1)\n    );\n\n    this.createBlendPattern();\n  }\n\n  static resizeMatrixValues(oldMat, oldWidth, oldHeight, newWidth, newHeight) {\n    const newMat = new Float32Array((newWidth + 1) * (newHeight + 1));\n    let nVert = 0;\n    for (let j = 0; j < newHeight + 1; j++) {\n      for (let i = 0; i < newWidth + 1; i++) {\n        let x = i / newHeight;\n        let y = j / newWidth;\n\n        x *= oldWidth + 1;\n        y *= oldHeight + 1;\n        x = Math.clamp(x, 0, oldWidth - 1);\n        y = Math.clamp(y, 0, oldHeight - 1);\n        const nx = Math.floor(x);\n        const ny = Math.floor(y);\n        const dx = x - nx;\n        const dy = y - ny;\n        const val00 = oldMat[ny * (oldWidth + 1) + nx];\n        const val01 = oldMat[ny * (oldWidth + 1) + (nx + 1)];\n        const val10 = oldMat[(ny + 1) * (oldWidth + 1) + nx];\n        const val11 = oldMat[(ny + 1) * (oldWidth + 1) + (nx + 1)];\n        newMat[nVert] =\n          val00 * (1 - dx) * (1 - dy) +\n          val01 * dx * (1 - dy) +\n          val10 * (1 - dx) * dy +\n          val11 * dx * dy;\n\n        nVert += 1;\n      }\n    }\n\n    return newMat;\n  }\n\n  updateGlobals(opts) {\n    const oldMeshWidth = this.mesh_width;\n    const oldMeshHeight = this.mesh_height;\n\n    this.mesh_width = opts.mesh_width;\n    this.mesh_height = opts.mesh_height;\n    this.aspectx = opts.aspectx;\n    this.aspecty = opts.aspecty;\n\n    if (\n      this.mesh_width !== oldMeshWidth ||\n      this.mesh_height !== oldMeshHeight\n    ) {\n      this.vertInfoA = BlendPattern.resizeMatrixValues(\n        this.vertInfoA,\n        oldMeshWidth,\n        oldMeshHeight,\n        this.mesh_width,\n        this.mesh_height\n      );\n      this.vertInfoC = BlendPattern.resizeMatrixValues(\n        this.vertInfoC,\n        oldMeshWidth,\n        oldMeshHeight,\n        this.mesh_width,\n        this.mesh_height\n      );\n    }\n  }\n\n  genPlasma(x0, x1, y0, y1, dt) {\n    const midx = Math.floor((x0 + x1) / 2);\n    const midy = Math.floor((y0 + y1) / 2);\n    let t00 = this.vertInfoC[y0 * (this.mesh_width + 1) + x0];\n    let t01 = this.vertInfoC[y0 * (this.mesh_width + 1) + x1];\n    let t10 = this.vertInfoC[y1 * (this.mesh_width + 1) + x0];\n    let t11 = this.vertInfoC[y1 * (this.mesh_width + 1) + x1];\n\n    if (y1 - y0 >= 2) {\n      if (x0 === 0) {\n        this.vertInfoC[midy * (this.mesh_width + 1) + x0] =\n          0.5 * (t00 + t10) + (Math.random() * 2 - 1) * dt * this.aspecty;\n      }\n      this.vertInfoC[midy * (this.mesh_width + 1) + x1] =\n        0.5 * (t01 + t11) + (Math.random() * 2 - 1) * dt * this.aspecty;\n    }\n    if (x1 - x0 >= 2) {\n      if (y0 === 0) {\n        this.vertInfoC[y0 * (this.mesh_width + 1) + midx] =\n          0.5 * (t00 + t01) + (Math.random() * 2 - 1) * dt * this.aspectx;\n      }\n      this.vertInfoC[y1 * (this.mesh_width + 1) + midx] =\n        0.5 * (t10 + t11) + (Math.random() * 2 - 1) * dt * this.aspectx;\n    }\n\n    if (y1 - y0 >= 2 && x1 - x0 >= 2) {\n      t00 = this.vertInfoC[midy * (this.mesh_width + 1) + x0];\n      t01 = this.vertInfoC[midy * (this.mesh_width + 1) + x1];\n      t10 = this.vertInfoC[y0 * (this.mesh_width + 1) + midx];\n      t11 = this.vertInfoC[y1 * (this.mesh_width + 1) + midx];\n      this.vertInfoC[midy * (this.mesh_width + 1) + midx] =\n        0.25 * (t10 + t11 + t00 + t01) + (Math.random() * 2 - 1) * dt;\n\n      this.genPlasma(x0, midx, y0, midy, dt * 0.5);\n      this.genPlasma(midx, x1, y0, midy, dt * 0.5);\n      this.genPlasma(x0, midx, midy, y1, dt * 0.5);\n      this.genPlasma(midx, x1, midy, y1, dt * 0.5);\n    }\n  }\n\n  createBlendPattern() {\n    const mixType = 1 + Math.floor(Math.random() * 3);\n    if (mixType === 0) {\n      // not currently used\n      let nVert = 0;\n      for (let y = 0; y <= this.mesh_height; y++) {\n        for (let x = 0; x <= this.mesh_width; x++) {\n          this.vertInfoA[nVert] = 1;\n          this.vertInfoC[nVert] = 0;\n          nVert += 1;\n        }\n      }\n    } else if (mixType === 1) {\n      const ang = Math.random() * 6.28;\n      const vx = Math.cos(ang);\n      const vy = Math.sin(ang);\n      const band = 0.1 + 0.2 * Math.random();\n      const invBand = 1.0 / band;\n\n      let nVert = 0;\n      for (let y = 0; y <= this.mesh_height; y++) {\n        const fy = (y / this.mesh_height) * this.aspecty;\n        for (let x = 0; x <= this.mesh_width; x++) {\n          const fx = (x / this.mesh_width) * this.aspectx;\n\n          let t = (fx - 0.5) * vx + (fy - 0.5) * vy + 0.5;\n          t = (t - 0.5) / Math.sqrt(2) + 0.5;\n\n          this.vertInfoA[nVert] = invBand * (1 + band);\n          this.vertInfoC[nVert] = -invBand + invBand * t;\n          nVert += 1;\n        }\n      }\n    } else if (mixType === 2) {\n      const band = 0.12 + 0.13 * Math.random();\n      const invBand = 1.0 / band;\n\n      this.vertInfoC[0] = Math.random();\n      this.vertInfoC[this.mesh_width] = Math.random();\n      this.vertInfoC[this.mesh_height * (this.mesh_width + 1)] = Math.random();\n      this.vertInfoC[\n        this.mesh_height * (this.mesh_width + 1) + this.mesh_width\n      ] = Math.random();\n      this.genPlasma(0, this.mesh_width, 0, this.mesh_height, 0.25);\n\n      let minc = this.vertInfoC[0];\n      let maxc = this.vertInfoC[0];\n\n      let nVert = 0;\n      for (let y = 0; y <= this.mesh_height; y++) {\n        for (let x = 0; x <= this.mesh_width; x++) {\n          if (minc > this.vertInfoC[nVert]) {\n            minc = this.vertInfoC[nVert];\n          }\n          if (maxc < this.vertInfoC[nVert]) {\n            maxc = this.vertInfoC[nVert];\n          }\n          nVert += 1;\n        }\n      }\n\n      const mult = 1.0 / (maxc - minc);\n      nVert = 0;\n      for (let y = 0; y <= this.mesh_height; y++) {\n        for (let x = 0; x <= this.mesh_width; x++) {\n          const t = (this.vertInfoC[nVert] - minc) * mult;\n          this.vertInfoA[nVert] = invBand * (1 + band);\n          this.vertInfoC[nVert] = -invBand + invBand * t;\n          nVert += 1;\n        }\n      }\n    } else if (mixType === 3) {\n      const band = 0.02 + 0.14 * Math.random() + 0.34 * Math.random();\n      const invBand = 1.0 / band;\n      const dir = Math.floor(Math.random() * 2) * 2 - 1;\n\n      let nVert = 0;\n      for (let y = 0; y <= this.mesh_height; y++) {\n        const dy = (y / this.mesh_height - 0.5) * this.aspecty;\n        for (let x = 0; x <= this.mesh_width; x++) {\n          const dx = (x / this.mesh_width - 0.5) * this.aspectx;\n          let t = Math.sqrt(dx * dx + dy * dy) * 1.41421;\n          if (dir === -1) {\n            t = 1 - t;\n          }\n\n          this.vertInfoA[nVert] = invBand * (1 + band);\n          this.vertInfoC[nVert] = -invBand + invBand * t;\n          nVert += 1;\n        }\n      }\n    }\n  }\n}\n","import AudioLevels from \"../audio/audioLevels\";\nimport blankPreset from \"../blankPreset\";\nimport PresetEquationRunner from \"../equations/presetEquationRunner\";\nimport PresetEquationRunnerWASM from \"../equations/presetEquationRunnerWASM\";\nimport BasicWaveform from \"./waves/basicWaveform\";\nimport CustomWaveform from \"./waves/customWaveform\";\nimport CustomShape from \"./shapes/customShape\";\nimport Border from \"./sprites/border\";\nimport DarkenCenter from \"./sprites/darkenCenter\";\nimport MotionVectors from \"./motionVectors/motionVectors\";\nimport WarpShader from \"./shaders/warp\";\nimport CompShader from \"./shaders/comp\";\nimport OutputShader from \"./shaders/output\";\nimport ResampleShader from \"./shaders/resample\";\nimport BlurShader from \"./shaders/blur/blur\";\nimport Noise from \"../noise/noise\";\nimport ImageTextures from \"../image/imageTextures\";\nimport TitleText from \"./text/titleText\";\nimport BlendPattern from \"./blendPattern\";\nimport Utils from \"../utils\";\n\nexport default class Renderer {\n  constructor(gl, audio, opts) {\n    this.gl = gl;\n    this.audio = audio;\n\n    this.frameNum = 0;\n    this.fps = 30;\n    this.time = 0;\n    this.presetTime = 0;\n    this.lastTime = performance.now();\n    this.timeHist = [0];\n    this.timeHistMax = 120;\n    this.blending = false;\n    this.blendStartTime = 0;\n    this.blendProgress = 0;\n    this.blendDuration = 0;\n\n    this.width = opts.width || 1200;\n    this.height = opts.height || 900;\n    this.mesh_width = opts.meshWidth || 48;\n    this.mesh_height = opts.meshHeight || 36;\n    this.pixelRatio = opts.pixelRatio || window.devicePixelRatio || 1;\n    this.textureRatio = opts.textureRatio || 1;\n    this.outputFXAA = opts.outputFXAA || false;\n    this.texsizeX = this.width * this.pixelRatio * this.textureRatio;\n    this.texsizeY = this.height * this.pixelRatio * this.textureRatio;\n    this.aspectx =\n      this.texsizeY > this.texsizeX ? this.texsizeX / this.texsizeY : 1;\n    this.aspecty =\n      this.texsizeX > this.texsizeY ? this.texsizeY / this.texsizeX : 1;\n    this.invAspectx = 1.0 / this.aspectx;\n    this.invAspecty = 1.0 / this.aspecty;\n\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\n    this.regs = Utils.range(0, 100).map((x) => {\n      if (x < 10) {\n        return `reg0${x}`;\n      }\n      return `reg${x}`;\n    });\n\n    this.blurRatios = [\n      [0.5, 0.25],\n      [0.125, 0.125],\n      [0.0625, 0.0625],\n    ];\n\n    this.audioLevels = new AudioLevels(this.audio);\n\n    this.prevFrameBuffer = this.gl.createFramebuffer();\n    this.targetFrameBuffer = this.gl.createFramebuffer();\n    this.prevTexture = this.gl.createTexture();\n    this.targetTexture = this.gl.createTexture();\n\n    this.compFrameBuffer = this.gl.createFramebuffer();\n    this.compTexture = this.gl.createTexture();\n\n    this.anisoExt =\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\n\n    this.bindFrameBufferTexture(this.prevFrameBuffer, this.prevTexture);\n    this.bindFrameBufferTexture(this.targetFrameBuffer, this.targetTexture);\n    this.bindFrameBufferTexture(this.compFrameBuffer, this.compTexture);\n\n    const params = {\n      pixelRatio: this.pixelRatio,\n      textureRatio: this.textureRatio,\n      texsizeX: this.texsizeX,\n      texsizeY: this.texsizeY,\n      mesh_width: this.mesh_width,\n      mesh_height: this.mesh_height,\n      aspectx: this.aspectx,\n      aspecty: this.aspecty,\n    };\n    this.noise = new Noise(gl);\n    this.image = new ImageTextures(gl);\n    this.warpShader = new WarpShader(gl, this.noise, this.image, params);\n    this.compShader = new CompShader(gl, this.noise, this.image, params);\n    this.outputShader = new OutputShader(gl, params);\n    this.prevWarpShader = new WarpShader(gl, this.noise, this.image, params);\n    this.prevCompShader = new CompShader(gl, this.noise, this.image, params);\n    this.numBlurPasses = 0;\n    this.blurShader1 = new BlurShader(0, this.blurRatios, gl, params);\n    this.blurShader2 = new BlurShader(1, this.blurRatios, gl, params);\n    this.blurShader3 = new BlurShader(2, this.blurRatios, gl, params);\n    this.blurTexture1 = this.blurShader1.blurVerticalTexture;\n    this.blurTexture2 = this.blurShader2.blurVerticalTexture;\n    this.blurTexture3 = this.blurShader3.blurVerticalTexture;\n    this.basicWaveform = new BasicWaveform(gl, params);\n    this.customWaveforms = Utils.range(4).map(\n      (i) => new CustomWaveform(i, gl, params)\n    );\n    this.customShapes = Utils.range(4).map(\n      (i) => new CustomShape(i, gl, params)\n    );\n    this.prevCustomWaveforms = Utils.range(4).map(\n      (i) => new CustomWaveform(i, gl, params)\n    );\n    this.prevCustomShapes = Utils.range(4).map(\n      (i) => new CustomShape(i, gl, params)\n    );\n    this.darkenCenter = new DarkenCenter(gl, params);\n    this.innerBorder = new Border(gl, params);\n    this.outerBorder = new Border(gl, params);\n    this.motionVectors = new MotionVectors(gl, params);\n    this.titleText = new TitleText(gl, params);\n    this.blendPattern = new BlendPattern(params);\n    this.resampleShader = new ResampleShader(gl);\n\n    this.supertext = {\n      startTime: -1,\n    };\n\n    this.warpUVs = new Float32Array(\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 2\n    );\n    this.warpColor = new Float32Array(\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 4\n    );\n\n    this.gl.clearColor(0, 0, 0, 1);\n\n    this.blankPreset = blankPreset;\n\n    const globalVars = {\n      frame: 0,\n      time: 0,\n      fps: 45,\n      bass: 1,\n      bass_att: 1,\n      mid: 1,\n      mid_att: 1,\n      treb: 1,\n      treb_att: 1,\n    };\n\n    this.preset = blankPreset;\n    this.prevPreset = this.preset;\n    this.presetEquationRunner = new PresetEquationRunner(\n      this.preset,\n      globalVars,\n      params\n    );\n    this.prevPresetEquationRunner = new PresetEquationRunner(\n      this.prevPreset,\n      globalVars,\n      params\n    );\n\n    if (!this.preset.useWASM) {\n      this.regVars = this.presetEquationRunner.mdVSRegs;\n    }\n  }\n\n  static createCanvas(width, height) {\n    if (window.OffscreenCanvas) {\n      const canvas = new OffscreenCanvas(width, height);\n      return canvas;\n    }\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n\n  static getHighestBlur(t) {\n    if (/sampler_blur3/.test(t)) {\n      return 3;\n    } else if (/sampler_blur2/.test(t)) {\n      return 2;\n    } else if (/sampler_blur1/.test(t)) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  loadPreset(preset, blendTime) {\n    this.blendPattern.createBlendPattern();\n    this.blending = true;\n    this.blendStartTime = this.time;\n    this.blendDuration = blendTime;\n    this.blendProgress = 0;\n\n    this.prevPresetEquationRunner = this.presetEquationRunner;\n\n    this.prevPreset = this.preset;\n    this.preset = preset;\n\n    this.presetTime = this.time;\n\n    const globalVars = {\n      frame: this.frameNum,\n      time: this.time,\n      fps: this.fps,\n      bass: this.audioLevels.bass,\n      bass_att: this.audioLevels.bass_att,\n      mid: this.audioLevels.mid,\n      mid_att: this.audioLevels.mid_att,\n      treb: this.audioLevels.treb,\n      treb_att: this.audioLevels.treb_att,\n    };\n    const params = {\n      pixelRatio: this.pixelRatio,\n      textureRatio: this.textureRatio,\n      texsizeX: this.texsizeX,\n      texsizeY: this.texsizeY,\n      mesh_width: this.mesh_width,\n      mesh_height: this.mesh_height,\n      aspectx: this.aspectx,\n      aspecty: this.aspecty,\n    };\n\n    if (preset.useWASM) {\n      this.preset.globalPools.perFrame.old_wave_mode.value = this.prevPreset.baseVals.wave_mode;\n      this.preset.baseVals.old_wave_mode = this.prevPreset.baseVals.wave_mode;\n      this.presetEquationRunner = new PresetEquationRunnerWASM(\n        this.preset,\n        globalVars,\n        params\n      );\n      if (this.preset.pixel_eqs_initialize_array) {\n        this.preset.pixel_eqs_initialize_array(\n          this.mesh_width,\n          this.mesh_height\n        );\n      }\n    } else {\n      this.preset.baseVals.old_wave_mode = this.prevPreset.baseVals.wave_mode;\n      this.presetEquationRunner = new PresetEquationRunner(\n        this.preset,\n        globalVars,\n        params\n      );\n      this.regVars = this.presetEquationRunner.mdVSRegs;\n    }\n\n    const tmpWarpShader = this.prevWarpShader;\n    this.prevWarpShader = this.warpShader;\n    this.warpShader = tmpWarpShader;\n\n    const tmpCompShader = this.prevCompShader;\n    this.prevCompShader = this.compShader;\n    this.compShader = tmpCompShader;\n\n    const warpText = this.preset.warp.trim();\n    const compText = this.preset.comp.trim();\n\n    this.warpShader.updateShader(warpText);\n    this.compShader.updateShader(compText);\n\n    if (warpText.length === 0) {\n      this.numBlurPasses = 0;\n    } else {\n      this.numBlurPasses = Renderer.getHighestBlur(warpText);\n    }\n\n    if (compText.length !== 0) {\n      this.numBlurPasses = Math.max(\n        this.numBlurPasses,\n        Renderer.getHighestBlur(compText)\n      );\n    }\n  }\n\n  loadExtraImages(imageData) {\n    this.image.loadExtraImages(imageData);\n  }\n\n  setRendererSize(width, height, opts) {\n    const oldTexsizeX = this.texsizeX;\n    const oldTexsizeY = this.texsizeY;\n\n    this.width = width;\n    this.height = height;\n    this.mesh_width = opts.meshWidth || this.mesh_width;\n    this.mesh_height = opts.meshHeight || this.mesh_height;\n    this.pixelRatio = opts.pixelRatio || this.pixelRatio;\n    this.textureRatio = opts.textureRatio || this.textureRatio;\n    this.texsizeX = width * this.pixelRatio * this.textureRatio;\n    this.texsizeY = height * this.pixelRatio * this.textureRatio;\n    this.aspectx =\n      this.texsizeY > this.texsizeX ? this.texsizeX / this.texsizeY : 1;\n    this.aspecty =\n      this.texsizeX > this.texsizeY ? this.texsizeY / this.texsizeX : 1;\n\n    if (this.texsizeX !== oldTexsizeX || this.texsizeY !== oldTexsizeY) {\n      // copy target texture, because we flip prev/target at start of render\n      const targetTextureNew = this.gl.createTexture();\n      this.bindFrameBufferTexture(this.targetFrameBuffer, targetTextureNew);\n      this.bindFrambufferAndSetViewport(\n        this.targetFrameBuffer,\n        this.texsizeX,\n        this.texsizeY\n      );\n\n      this.resampleShader.renderQuadTexture(this.targetTexture);\n\n      this.targetTexture = targetTextureNew;\n\n      this.bindFrameBufferTexture(this.prevFrameBuffer, this.prevTexture);\n      this.bindFrameBufferTexture(this.compFrameBuffer, this.compTexture);\n    }\n\n    this.updateGlobals();\n\n    // rerender current frame at new size\n    if (this.frameNum > 0) {\n      this.renderToScreen();\n    }\n  }\n\n  setInternalMeshSize(width, height) {\n    this.mesh_width = width;\n    this.mesh_height = height;\n\n    this.updateGlobals();\n  }\n\n  setOutputAA(useAA) {\n    this.outputFXAA = useAA;\n  }\n\n  updateGlobals() {\n    const params = {\n      pixelRatio: this.pixelRatio,\n      textureRatio: this.textureRatio,\n      texsizeX: this.texsizeX,\n      texsizeY: this.texsizeY,\n      mesh_width: this.mesh_width,\n      mesh_height: this.mesh_height,\n      aspectx: this.aspectx,\n      aspecty: this.aspecty,\n    };\n    this.presetEquationRunner.updateGlobals(params);\n    this.prevPresetEquationRunner.updateGlobals(params);\n    this.warpShader.updateGlobals(params);\n    this.prevWarpShader.updateGlobals(params);\n    this.compShader.updateGlobals(params);\n    this.prevCompShader.updateGlobals(params);\n    this.outputShader.updateGlobals(params);\n    this.blurShader1.updateGlobals(params);\n    this.blurShader2.updateGlobals(params);\n    this.blurShader3.updateGlobals(params);\n    this.basicWaveform.updateGlobals(params);\n    this.customWaveforms.forEach((wave) => wave.updateGlobals(params));\n    this.customShapes.forEach((shape) => shape.updateGlobals(params));\n    this.prevCustomWaveforms.forEach((wave) => wave.updateGlobals(params));\n    this.prevCustomShapes.forEach((shape) => shape.updateGlobals(params));\n    this.darkenCenter.updateGlobals(params);\n    this.innerBorder.updateGlobals(params);\n    this.outerBorder.updateGlobals(params);\n    this.motionVectors.updateGlobals(params);\n    this.titleText.updateGlobals(params);\n    this.blendPattern.updateGlobals(params);\n\n    this.warpUVs = new Float32Array(\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 2\n    );\n    this.warpColor = new Float32Array(\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 4\n    );\n\n    if (this.preset.pixel_eqs_initialize_array) {\n      this.preset.pixel_eqs_initialize_array(this.mesh_width, this.mesh_height);\n    }\n  }\n\n  calcTimeAndFPS(elapsedTime) {\n    let elapsed;\n    if (elapsedTime) {\n      elapsed = elapsedTime;\n    } else {\n      const newTime = performance.now();\n      elapsed = (newTime - this.lastTime) / 1000.0;\n      if (elapsed > 1.0 || elapsed < 0.0 || this.frame < 2) {\n        elapsed = 1.0 / 30.0;\n      }\n      this.lastTime = newTime;\n    }\n\n    this.time += 1.0 / this.fps;\n\n    if (this.blending) {\n      this.blendProgress =\n        (this.time - this.blendStartTime) / this.blendDuration;\n      if (this.blendProgress > 1.0) {\n        this.blending = false;\n      }\n    }\n\n    const newHistTime = this.timeHist[this.timeHist.length - 1] + elapsed;\n    this.timeHist.push(newHistTime);\n    if (this.timeHist.length > this.timeHistMax) {\n      this.timeHist.shift();\n    }\n\n    const newFPS = this.timeHist.length / (newHistTime - this.timeHist[0]);\n    if (Math.abs(newFPS - this.fps) > 3.0 && this.frame > this.timeHistMax) {\n      this.fps = newFPS;\n    } else {\n      const damping = 0.93;\n      this.fps = damping * this.fps + (1.0 - damping) * newFPS;\n    }\n  }\n\n  runPixelEquations(presetEquationRunner, mdVSFrame, globalVars, blending) {\n    const gridX = this.mesh_width;\n    const gridZ = this.mesh_height;\n\n    const gridX1 = gridX + 1;\n    const gridZ1 = gridZ + 1;\n\n    const warpTimeV = this.time * mdVSFrame.warpanimspeed;\n    const warpScaleInv = 1.0 / mdVSFrame.warpscale;\n\n    const warpf0 = 11.68 + 4.0 * Math.cos(warpTimeV * 1.413 + 10);\n    const warpf1 = 8.77 + 3.0 * Math.cos(warpTimeV * 1.113 + 7);\n    const warpf2 = 10.54 + 3.0 * Math.cos(warpTimeV * 1.233 + 3);\n    const warpf3 = 11.49 + 4.0 * Math.cos(warpTimeV * 0.933 + 5);\n\n    const texelOffsetX = 0.0 / this.texsizeX;\n    const texelOffsetY = 0.0 / this.texsizeY;\n\n    const aspectx = this.aspectx;\n    const aspecty = this.aspecty;\n\n    let offset = 0;\n    let offsetColor = 0;\n    if (!presetEquationRunner.preset.useWASM) {\n      let mdVSVertex = Utils.cloneVars(mdVSFrame);\n\n      let warp = mdVSVertex.warp;\n      let zoom = mdVSVertex.zoom;\n      let zoomExp = mdVSVertex.zoomexp;\n      let cx = mdVSVertex.cx;\n      let cy = mdVSVertex.cy;\n      let sx = mdVSVertex.sx;\n      let sy = mdVSVertex.sy;\n      let dx = mdVSVertex.dx;\n      let dy = mdVSVertex.dy;\n      let rot = mdVSVertex.rot;\n\n      for (let iz = 0; iz < gridZ1; iz++) {\n        for (let ix = 0; ix < gridX1; ix++) {\n          const x = (ix / gridX) * 2.0 - 1.0;\n          const y = (iz / gridZ) * 2.0 - 1.0;\n          const rad = Math.sqrt(\n            x * x * aspectx * aspectx + y * y * aspecty * aspecty\n          );\n\n          if (presetEquationRunner.runVertEQs) {\n            let ang;\n            if (iz === gridZ / 2 && ix === gridX / 2) {\n              ang = 0;\n            } else {\n              ang = Utils.atan2(y * aspecty, x * aspectx);\n            }\n\n            mdVSVertex.x = x * 0.5 * aspectx + 0.5;\n            mdVSVertex.y = y * -0.5 * aspecty + 0.5;\n            mdVSVertex.rad = rad;\n            mdVSVertex.ang = ang;\n\n            mdVSVertex.zoom = mdVSFrame.zoom;\n            mdVSVertex.zoomexp = mdVSFrame.zoomexp;\n            mdVSVertex.rot = mdVSFrame.rot;\n            mdVSVertex.warp = mdVSFrame.warp;\n            mdVSVertex.cx = mdVSFrame.cx;\n            mdVSVertex.cy = mdVSFrame.cy;\n            mdVSVertex.dx = mdVSFrame.dx;\n            mdVSVertex.dy = mdVSFrame.dy;\n            mdVSVertex.sx = mdVSFrame.sx;\n            mdVSVertex.sy = mdVSFrame.sy;\n\n            mdVSVertex = presetEquationRunner.runPixelEquations(mdVSVertex);\n\n            warp = mdVSVertex.warp;\n            zoom = mdVSVertex.zoom;\n            zoomExp = mdVSVertex.zoomexp;\n            cx = mdVSVertex.cx;\n            cy = mdVSVertex.cy;\n            sx = mdVSVertex.sx;\n            sy = mdVSVertex.sy;\n            dx = mdVSVertex.dx;\n            dy = mdVSVertex.dy;\n            rot = mdVSVertex.rot;\n          }\n\n          const zoom2V = zoom ** (zoomExp ** (rad * 2.0 - 1.0));\n          const zoom2Inv = 1.0 / zoom2V;\n\n          let u = x * 0.5 * aspectx * zoom2Inv + 0.5;\n          let v = -y * 0.5 * aspecty * zoom2Inv + 0.5;\n\n          u = (u - cx) / sx + cx;\n          v = (v - cy) / sy + cy;\n\n          if (warp !== 0) {\n            u +=\n              warp *\n              0.0035 *\n              Math.sin(\n                warpTimeV * 0.333 + warpScaleInv * (x * warpf0 - y * warpf3)\n              );\n            v +=\n              warp *\n              0.0035 *\n              Math.cos(\n                warpTimeV * 0.375 - warpScaleInv * (x * warpf2 + y * warpf1)\n              );\n            u +=\n              warp *\n              0.0035 *\n              Math.cos(\n                warpTimeV * 0.753 - warpScaleInv * (x * warpf1 - y * warpf2)\n              );\n            v +=\n              warp *\n              0.0035 *\n              Math.sin(\n                warpTimeV * 0.825 + warpScaleInv * (x * warpf0 + y * warpf3)\n              );\n          }\n\n          const u2 = u - cx;\n          const v2 = v - cy;\n\n          const cosRot = Math.cos(rot);\n          const sinRot = Math.sin(rot);\n          u = u2 * cosRot - v2 * sinRot + cx;\n          v = u2 * sinRot + v2 * cosRot + cy;\n\n          u -= dx;\n          v -= dy;\n\n          u = (u - 0.5) / aspectx + 0.5;\n          v = (v - 0.5) / aspecty + 0.5;\n\n          u += texelOffsetX;\n          v += texelOffsetY;\n\n          if (!blending) {\n            this.warpUVs[offset] = u;\n            this.warpUVs[offset + 1] = v;\n\n            this.warpColor[offsetColor + 0] = 1;\n            this.warpColor[offsetColor + 1] = 1;\n            this.warpColor[offsetColor + 2] = 1;\n            this.warpColor[offsetColor + 3] = 1;\n          } else {\n            let mix2 =\n              this.blendPattern.vertInfoA[offset / 2] * this.blendProgress +\n              this.blendPattern.vertInfoC[offset / 2];\n            mix2 = Math.clamp(mix2, 0, 1);\n\n            this.warpUVs[offset] = this.warpUVs[offset] * mix2 + u * (1 - mix2);\n            this.warpUVs[offset + 1] =\n              this.warpUVs[offset + 1] * mix2 + v * (1 - mix2);\n\n            this.warpColor[offsetColor + 0] = 1;\n            this.warpColor[offsetColor + 1] = 1;\n            this.warpColor[offsetColor + 2] = 1;\n            this.warpColor[offsetColor + 3] = mix2;\n          }\n\n          offset += 2;\n          offsetColor += 4;\n        }\n      }\n\n      this.mdVSVertex = mdVSVertex;\n    } else {\n      const varPool = presetEquationRunner.preset.globalPools.perVertex;\n\n      Utils.setWasm(varPool, globalVars, presetEquationRunner.globalKeys);\n      Utils.setWasm(\n        varPool,\n        presetEquationRunner.mdVSQAfterFrame,\n        presetEquationRunner.qs\n      );\n\n      varPool.zoom.value = mdVSFrame.zoom;\n      varPool.zoomexp.value = mdVSFrame.zoomexp;\n      varPool.rot.value = mdVSFrame.rot;\n      varPool.warp.value = mdVSFrame.warp;\n      varPool.cx.value = mdVSFrame.cx;\n      varPool.cy.value = mdVSFrame.cy;\n      varPool.dx.value = mdVSFrame.dx;\n      varPool.dy.value = mdVSFrame.dy;\n      varPool.sx.value = mdVSFrame.sx;\n      varPool.sy.value = mdVSFrame.sy;\n\n      presetEquationRunner.preset.pixel_eqs_wasm(\n        presetEquationRunner.runVertEQs,\n        this.mesh_width,\n        this.mesh_height,\n        this.time,\n        mdVSFrame.warpanimspeed,\n        mdVSFrame.warpscale,\n        this.aspectx,\n        this.aspecty\n      );\n\n      if (!blending) {\n        this.warpUVs = presetEquationRunner.preset.pixel_eqs_get_array();\n        this.warpColor.fill(1);\n      } else {\n        const newWarpUVs = presetEquationRunner.preset.pixel_eqs_get_array();\n\n        let offset = 0;\n        let offsetColor = 0;\n        for (let iz = 0; iz < gridZ1; iz++) {\n          for (let ix = 0; ix < gridX1; ix++) {\n            const u = newWarpUVs[offset];\n            const v = newWarpUVs[offset + 1];\n\n            let mix2 =\n              this.blendPattern.vertInfoA[offset / 2] * this.blendProgress +\n              this.blendPattern.vertInfoC[offset / 2];\n            mix2 = Math.clamp(mix2, 0, 1);\n\n            this.warpUVs[offset] = this.warpUVs[offset] * mix2 + u * (1 - mix2);\n            this.warpUVs[offset + 1] =\n              this.warpUVs[offset + 1] * mix2 + v * (1 - mix2);\n\n            this.warpColor[offsetColor + 0] = 1;\n            this.warpColor[offsetColor + 1] = 1;\n            this.warpColor[offsetColor + 2] = 1;\n            this.warpColor[offsetColor + 3] = mix2;\n\n            offset += 2;\n            offsetColor += 4;\n          }\n        }\n      }\n    }\n  }\n\n  static mixFrameEquations(blendProgress, mdVSFrame, mdVSFramePrev) {\n    const mix = 0.5 - 0.5 * Math.cos(blendProgress * Math.PI);\n    const mix2 = 1 - mix;\n    const snapPoint = 0.5;\n\n    const mixedFrame = Utils.cloneVars(mdVSFrame);\n\n    mixedFrame.decay = mix * mdVSFrame.decay + mix2 * mdVSFramePrev.decay;\n    mixedFrame.wave_a = mix * mdVSFrame.wave_a + mix2 * mdVSFramePrev.wave_a;\n    mixedFrame.wave_r = mix * mdVSFrame.wave_r + mix2 * mdVSFramePrev.wave_r;\n    mixedFrame.wave_g = mix * mdVSFrame.wave_g + mix2 * mdVSFramePrev.wave_g;\n    mixedFrame.wave_b = mix * mdVSFrame.wave_b + mix2 * mdVSFramePrev.wave_b;\n    mixedFrame.wave_x = mix * mdVSFrame.wave_x + mix2 * mdVSFramePrev.wave_x;\n    mixedFrame.wave_y = mix * mdVSFrame.wave_y + mix2 * mdVSFramePrev.wave_y;\n    mixedFrame.wave_mystery =\n      mix * mdVSFrame.wave_mystery + mix2 * mdVSFramePrev.wave_mystery;\n    mixedFrame.ob_size = mix * mdVSFrame.ob_size + mix2 * mdVSFramePrev.ob_size;\n    mixedFrame.ob_r = mix * mdVSFrame.ob_r + mix2 * mdVSFramePrev.ob_r;\n    mixedFrame.ob_g = mix * mdVSFrame.ob_g + mix2 * mdVSFramePrev.ob_g;\n    mixedFrame.ob_b = mix * mdVSFrame.ob_b + mix2 * mdVSFramePrev.ob_b;\n    mixedFrame.ob_a = mix * mdVSFrame.ob_a + mix2 * mdVSFramePrev.ob_a;\n    mixedFrame.ib_size = mix * mdVSFrame.ib_size + mix2 * mdVSFramePrev.ib_size;\n    mixedFrame.ib_r = mix * mdVSFrame.ib_r + mix2 * mdVSFramePrev.ib_r;\n    mixedFrame.ib_g = mix * mdVSFrame.ib_g + mix2 * mdVSFramePrev.ib_g;\n    mixedFrame.ib_b = mix * mdVSFrame.ib_b + mix2 * mdVSFramePrev.ib_b;\n    mixedFrame.ib_a = mix * mdVSFrame.ib_a + mix2 * mdVSFramePrev.ib_a;\n    mixedFrame.mv_x = mix * mdVSFrame.mv_x + mix2 * mdVSFramePrev.mv_x;\n    mixedFrame.mv_y = mix * mdVSFrame.mv_y + mix2 * mdVSFramePrev.mv_y;\n    mixedFrame.mv_dx = mix * mdVSFrame.mv_dx + mix2 * mdVSFramePrev.mv_dx;\n    mixedFrame.mv_dy = mix * mdVSFrame.mv_dy + mix2 * mdVSFramePrev.mv_dy;\n    mixedFrame.mv_l = mix * mdVSFrame.mv_l + mix2 * mdVSFramePrev.mv_l;\n    mixedFrame.mv_r = mix * mdVSFrame.mv_r + mix2 * mdVSFramePrev.mv_r;\n    mixedFrame.mv_g = mix * mdVSFrame.mv_g + mix2 * mdVSFramePrev.mv_g;\n    mixedFrame.mv_b = mix * mdVSFrame.mv_b + mix2 * mdVSFramePrev.mv_b;\n    mixedFrame.mv_a = mix * mdVSFrame.mv_a + mix2 * mdVSFramePrev.mv_a;\n    mixedFrame.echo_zoom =\n      mix * mdVSFrame.echo_zoom + mix2 * mdVSFramePrev.echo_zoom;\n    mixedFrame.echo_alpha =\n      mix * mdVSFrame.echo_alpha + mix2 * mdVSFramePrev.echo_alpha;\n    mixedFrame.echo_orient =\n      mix * mdVSFrame.echo_orient + mix2 * mdVSFramePrev.echo_orient;\n    mixedFrame.wave_dots =\n      mix < snapPoint ? mdVSFramePrev.wave_dots : mdVSFrame.wave_dots;\n    mixedFrame.wave_thick =\n      mix < snapPoint ? mdVSFramePrev.wave_thick : mdVSFrame.wave_thick;\n    mixedFrame.additivewave =\n      mix < snapPoint ? mdVSFramePrev.additivewave : mdVSFrame.additivewave;\n    mixedFrame.wave_brighten =\n      mix < snapPoint ? mdVSFramePrev.wave_brighten : mdVSFrame.wave_brighten;\n    mixedFrame.darken_center =\n      mix < snapPoint ? mdVSFramePrev.darken_center : mdVSFrame.darken_center;\n    mixedFrame.gammaadj =\n      mix < snapPoint ? mdVSFramePrev.gammaadj : mdVSFrame.gammaadj;\n    mixedFrame.wrap = mix < snapPoint ? mdVSFramePrev.wrap : mdVSFrame.wrap;\n    mixedFrame.invert =\n      mix < snapPoint ? mdVSFramePrev.invert : mdVSFrame.invert;\n    mixedFrame.brighten =\n      mix < snapPoint ? mdVSFramePrev.brighten : mdVSFrame.brighten;\n    mixedFrame.darken =\n      mix < snapPoint ? mdVSFramePrev.darken : mdVSFrame.darken;\n    mixedFrame.solarize =\n      mix < snapPoint ? mdVSFramePrev.brighten : mdVSFrame.solarize;\n    mixedFrame.b1n = mix * mdVSFrame.b1n + mix2 * mdVSFramePrev.b1n;\n    mixedFrame.b2n = mix * mdVSFrame.b2n + mix2 * mdVSFramePrev.b2n;\n    mixedFrame.b3n = mix * mdVSFrame.b3n + mix2 * mdVSFramePrev.b3n;\n    mixedFrame.b1x = mix * mdVSFrame.b1x + mix2 * mdVSFramePrev.b1x;\n    mixedFrame.b2x = mix * mdVSFrame.b2x + mix2 * mdVSFramePrev.b2x;\n    mixedFrame.b3x = mix * mdVSFrame.b3x + mix2 * mdVSFramePrev.b3x;\n    mixedFrame.b1ed = mix * mdVSFrame.b1ed + mix2 * mdVSFramePrev.b1ed;\n\n    return mixedFrame;\n  }\n\n  static getBlurValues(mdVSFrame) {\n    let blurMin1 = mdVSFrame.b1n;\n    let blurMin2 = mdVSFrame.b2n;\n    let blurMin3 = mdVSFrame.b3n;\n    let blurMax1 = mdVSFrame.b1x;\n    let blurMax2 = mdVSFrame.b2x;\n    let blurMax3 = mdVSFrame.b3x;\n\n    const fMinDist = 0.1;\n    if (blurMax1 - blurMin1 < fMinDist) {\n      const avg = (blurMin1 + blurMax1) * 0.5;\n      blurMin1 = avg - fMinDist * 0.5;\n      blurMax1 = avg - fMinDist * 0.5;\n    }\n    blurMax2 = Math.min(blurMax1, blurMax2);\n    blurMin2 = Math.max(blurMin1, blurMin2);\n    if (blurMax2 - blurMin2 < fMinDist) {\n      const avg = (blurMin2 + blurMax2) * 0.5;\n      blurMin2 = avg - fMinDist * 0.5;\n      blurMax2 = avg - fMinDist * 0.5;\n    }\n    blurMax3 = Math.min(blurMax2, blurMax3);\n    blurMin3 = Math.max(blurMin2, blurMin3);\n    if (blurMax3 - blurMin3 < fMinDist) {\n      const avg = (blurMin3 + blurMax3) * 0.5;\n      blurMin3 = avg - fMinDist * 0.5;\n      blurMax3 = avg - fMinDist * 0.5;\n    }\n\n    return {\n      blurMins: [blurMin1, blurMin2, blurMin3],\n      blurMaxs: [blurMax1, blurMax2, blurMax3],\n    };\n  }\n\n  bindFrambufferAndSetViewport(fb, width, height) {\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, fb);\n    this.gl.viewport(0, 0, width, height);\n  }\n\n  bindFrameBufferTexture(targetFrameBuffer, targetTexture) {\n    this.gl.bindTexture(this.gl.TEXTURE_2D, targetTexture);\n\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\n    this.gl.texImage2D(\n      this.gl.TEXTURE_2D,\n      0,\n      this.gl.RGBA,\n      this.texsizeX,\n      this.texsizeY,\n      0,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      new Uint8Array(this.texsizeX * this.texsizeY * 4)\n    );\n\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_S,\n      this.gl.CLAMP_TO_EDGE\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_WRAP_T,\n      this.gl.CLAMP_TO_EDGE\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MIN_FILTER,\n      this.gl.LINEAR_MIPMAP_LINEAR\n    );\n    this.gl.texParameteri(\n      this.gl.TEXTURE_2D,\n      this.gl.TEXTURE_MAG_FILTER,\n      this.gl.LINEAR\n    );\n    if (this.anisoExt) {\n      const max = this.gl.getParameter(\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\n      );\n      this.gl.texParameterf(\n        this.gl.TEXTURE_2D,\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\n        max\n      );\n    }\n\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, targetFrameBuffer);\n    this.gl.framebufferTexture2D(\n      this.gl.FRAMEBUFFER,\n      this.gl.COLOR_ATTACHMENT0,\n      this.gl.TEXTURE_2D,\n      targetTexture,\n      0\n    );\n  }\n\n  render({ audioLevels, elapsedTime } = {}) {\n    this.calcTimeAndFPS(elapsedTime);\n    this.frameNum += 1;\n\n    if (audioLevels) {\n      this.audio.updateAudio(\n        audioLevels.timeByteArray,\n        audioLevels.timeByteArrayL,\n        audioLevels.timeByteArrayR\n      );\n    } else {\n      this.audio.sampleAudio();\n    }\n    this.audioLevels.updateAudioLevels(this.fps, this.frameNum);\n\n    const globalVars = {\n      frame: this.frameNum,\n      time: this.time,\n      fps: this.fps,\n      bass: this.audioLevels.bass,\n      bass_att: this.audioLevels.bass_att,\n      mid: this.audioLevels.mid,\n      mid_att: this.audioLevels.mid_att,\n      treb: this.audioLevels.treb,\n      treb_att: this.audioLevels.treb_att,\n      meshx: this.mesh_width,\n      meshy: this.mesh_height,\n      aspectx: this.invAspectx,\n      aspecty: this.invAspecty,\n      pixelsx: this.texsizeX,\n      pixelsy: this.texsizeY,\n    };\n\n    const prevGlobalVars = Object.assign({}, globalVars);\n    if (!this.prevPreset.useWASM) {\n      prevGlobalVars.gmegabuf = this.prevPresetEquationRunner.gmegabuf;\n    }\n\n    if (!this.preset.useWASM) {\n      globalVars.gmegabuf = this.presetEquationRunner.gmegabuf;\n      Object.assign(globalVars, this.regVars);\n    }\n\n    const mdVSFrame = this.presetEquationRunner.runFrameEquations(globalVars);\n\n    this.runPixelEquations(\n      this.presetEquationRunner,\n      mdVSFrame,\n      globalVars,\n      false\n    );\n\n    if (!this.preset.useWASM) {\n      Object.assign(this.regVars, Utils.pick(this.mdVSVertex, this.regs));\n      Object.assign(globalVars, this.regVars);\n    }\n\n    let mdVSFrameMixed;\n    if (this.blending) {\n      this.prevMDVSFrame = this.prevPresetEquationRunner.runFrameEquations(\n        prevGlobalVars\n      );\n      this.runPixelEquations(\n        this.prevPresetEquationRunner,\n        this.prevMDVSFrame,\n        prevGlobalVars,\n        true\n      );\n\n      mdVSFrameMixed = Renderer.mixFrameEquations(\n        this.blendProgress,\n        mdVSFrame,\n        this.prevMDVSFrame\n      );\n    } else {\n      mdVSFrameMixed = mdVSFrame;\n    }\n\n    const swapTexture = this.targetTexture;\n    this.targetTexture = this.prevTexture;\n    this.prevTexture = swapTexture;\n\n    const swapFrameBuffer = this.targetFrameBuffer;\n    this.targetFrameBuffer = this.prevFrameBuffer;\n    this.prevFrameBuffer = swapFrameBuffer;\n\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.prevTexture);\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n    this.bindFrambufferAndSetViewport(\n      this.targetFrameBuffer,\n      this.texsizeX,\n      this.texsizeY\n    );\n\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n    this.gl.enable(this.gl.BLEND);\n    this.gl.blendEquation(this.gl.FUNC_ADD);\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    const { blurMins, blurMaxs } = Renderer.getBlurValues(mdVSFrameMixed);\n\n    if (!this.blending) {\n      this.warpShader.renderQuadTexture(\n        false,\n        this.prevTexture,\n        this.blurTexture1,\n        this.blurTexture2,\n        this.blurTexture3,\n        blurMins,\n        blurMaxs,\n        mdVSFrame,\n        this.presetEquationRunner.mdVSQAfterFrame,\n        this.warpUVs,\n        this.warpColor\n      );\n    } else {\n      this.prevWarpShader.renderQuadTexture(\n        false,\n        this.prevTexture,\n        this.blurTexture1,\n        this.blurTexture2,\n        this.blurTexture3,\n        blurMins,\n        blurMaxs,\n        this.prevMDVSFrame,\n        this.prevPresetEquationRunner.mdVSQAfterFrame,\n        this.warpUVs,\n        this.warpColor\n      );\n\n      this.warpShader.renderQuadTexture(\n        true,\n        this.prevTexture,\n        this.blurTexture1,\n        this.blurTexture2,\n        this.blurTexture3,\n        blurMins,\n        blurMaxs,\n        mdVSFrameMixed,\n        this.presetEquationRunner.mdVSQAfterFrame,\n        this.warpUVs,\n        this.warpColor\n      );\n    }\n\n    if (this.numBlurPasses > 0) {\n      this.blurShader1.renderBlurTexture(\n        this.targetTexture,\n        mdVSFrame,\n        blurMins,\n        blurMaxs\n      );\n\n      if (this.numBlurPasses > 1) {\n        this.blurShader2.renderBlurTexture(\n          this.blurTexture1,\n          mdVSFrame,\n          blurMins,\n          blurMaxs\n        );\n\n        if (this.numBlurPasses > 2) {\n          this.blurShader3.renderBlurTexture(\n            this.blurTexture2,\n            mdVSFrame,\n            blurMins,\n            blurMaxs\n          );\n        }\n      }\n\n      // rebind target texture framebuffer\n      this.bindFrambufferAndSetViewport(\n        this.targetFrameBuffer,\n        this.texsizeX,\n        this.texsizeY\n      );\n    }\n\n    this.motionVectors.drawMotionVectors(mdVSFrameMixed, this.warpUVs);\n\n    if (this.preset.shapes && this.preset.shapes.length > 0) {\n      this.customShapes.forEach((shape, i) => {\n        shape.drawCustomShape(\n          this.blending ? this.blendProgress : 1,\n          globalVars,\n          this.presetEquationRunner,\n          this.preset.shapes[i],\n          this.prevTexture\n        );\n      });\n    }\n\n    if (this.preset.waves && this.preset.waves.length > 0) {\n      this.customWaveforms.forEach((waveform, i) => {\n        waveform.drawCustomWaveform(\n          this.blending ? this.blendProgress : 1,\n          this.audio.timeArrayL,\n          this.audio.timeArrayR,\n          this.audio.freqArrayL,\n          this.audio.freqArrayR,\n          globalVars,\n          this.presetEquationRunner,\n          this.preset.waves[i]\n        );\n      });\n    }\n\n    if (this.blending) {\n      if (this.prevPreset.shapes && this.prevPreset.shapes.length > 0) {\n        this.prevCustomShapes.forEach((shape, i) => {\n          shape.drawCustomShape(\n            1.0 - this.blendProgress,\n            prevGlobalVars,\n            this.prevPresetEquationRunner,\n            this.prevPreset.shapes[i],\n            this.prevTexture\n          );\n        });\n      }\n\n      if (this.prevPreset.waves && this.prevPreset.waves.length > 0) {\n        this.prevCustomWaveforms.forEach((waveform, i) => {\n          waveform.drawCustomWaveform(\n            1.0 - this.blendProgress,\n            this.audio.timeArrayL,\n            this.audio.timeArrayR,\n            this.audio.freqArrayL,\n            this.audio.freqArrayR,\n            prevGlobalVars,\n            this.prevPresetEquationRunner,\n            this.prevPreset.waves[i]\n          );\n        });\n      }\n    }\n\n    this.basicWaveform.drawBasicWaveform(\n      this.blending,\n      this.blendProgress,\n      this.audio.timeArrayL,\n      this.audio.timeArrayR,\n      mdVSFrameMixed\n    );\n\n    this.darkenCenter.drawDarkenCenter(mdVSFrameMixed);\n\n    const outerColor = [\n      mdVSFrameMixed.ob_r,\n      mdVSFrameMixed.ob_g,\n      mdVSFrameMixed.ob_b,\n      mdVSFrameMixed.ob_a,\n    ];\n    this.outerBorder.drawBorder(outerColor, mdVSFrameMixed.ob_size, 0);\n\n    const innerColor = [\n      mdVSFrameMixed.ib_r,\n      mdVSFrameMixed.ib_g,\n      mdVSFrameMixed.ib_b,\n      mdVSFrameMixed.ib_a,\n    ];\n    this.innerBorder.drawBorder(\n      innerColor,\n      mdVSFrameMixed.ib_size,\n      mdVSFrameMixed.ob_size\n    );\n\n    if (this.supertext.startTime >= 0) {\n      const progress =\n        (this.time - this.supertext.startTime) / this.supertext.duration;\n      if (progress >= 1) {\n        this.titleText.renderTitle(progress, true, globalVars);\n      }\n    }\n\n    // Store variables in case we need to rerender\n    this.globalVars = globalVars;\n    this.mdVSFrame = mdVSFrame;\n    this.mdVSFrameMixed = mdVSFrameMixed;\n\n    this.renderToScreen();\n  }\n\n  renderToScreen() {\n    if (this.outputFXAA) {\n      this.bindFrambufferAndSetViewport(\n        this.compFrameBuffer,\n        this.texsizeX,\n        this.texsizeY\n      );\n    } else {\n      this.bindFrambufferAndSetViewport(null, this.width, this.height);\n    }\n\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n    this.gl.enable(this.gl.BLEND);\n    this.gl.blendEquation(this.gl.FUNC_ADD);\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    const { blurMins, blurMaxs } = Renderer.getBlurValues(this.mdVSFrameMixed);\n\n    if (!this.blending) {\n      this.compShader.renderQuadTexture(\n        false,\n        this.targetTexture,\n        this.blurTexture1,\n        this.blurTexture2,\n        this.blurTexture3,\n        blurMins,\n        blurMaxs,\n        this.mdVSFrame,\n        this.presetEquationRunner.mdVSQAfterFrame,\n        this.warpColor\n      );\n    } else {\n      this.prevCompShader.renderQuadTexture(\n        false,\n        this.targetTexture,\n        this.blurTexture1,\n        this.blurTexture2,\n        this.blurTexture3,\n        blurMins,\n        blurMaxs,\n        this.prevMDVSFrame,\n        this.prevPresetEquationRunner.mdVSQAfterFrame,\n        this.warpColor\n      );\n\n      this.compShader.renderQuadTexture(\n        true,\n        this.targetTexture,\n        this.blurTexture1,\n        this.blurTexture2,\n        this.blurTexture3,\n        blurMins,\n        blurMaxs,\n        this.mdVSFrameMixed,\n        this.presetEquationRunner.mdVSQAfterFrame,\n        this.warpColor\n      );\n    }\n\n    if (this.supertext.startTime >= 0) {\n      const progress =\n        (this.time - this.supertext.startTime) / this.supertext.duration;\n      this.titleText.renderTitle(progress, false, this.globalVars);\n\n      if (progress >= 1) {\n        this.supertext.startTime = -1;\n      }\n    }\n\n    if (this.outputFXAA) {\n      this.gl.bindTexture(this.gl.TEXTURE_2D, this.compTexture);\n      this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n      this.bindFrambufferAndSetViewport(null, this.width, this.height);\n      this.outputShader.renderQuadTexture(this.compTexture);\n    }\n  }\n\n  launchSongTitleAnim(text) {\n    this.supertext = {\n      startTime: this.time,\n      duration: 1.7,\n    };\n    this.titleText.generateTitleTexture(text);\n  }\n\n  toDataURL() {\n    const data = new Uint8Array(this.texsizeX * this.texsizeY * 4);\n\n    const compFrameBuffer = this.gl.createFramebuffer();\n    const compTexture = this.gl.createTexture();\n\n    this.bindFrameBufferTexture(compFrameBuffer, compTexture);\n\n    const { blurMins, blurMaxs } = Renderer.getBlurValues(this.mdVSFrameMixed);\n    this.compShader.renderQuadTexture(\n      false,\n      this.targetTexture,\n      this.blurTexture1,\n      this.blurTexture2,\n      this.blurTexture3,\n      blurMins,\n      blurMaxs,\n      this.mdVSFrame,\n      this.presetEquationRunner.mdVSQAfterFrame,\n      this.warpColor\n    );\n\n    this.gl.readPixels(\n      0,\n      0,\n      this.texsizeX,\n      this.texsizeY,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      data\n    );\n\n    // flip data\n    Array.from({ length: this.texsizeY }, (val, i) =>\n      data.slice(i * this.texsizeX * 4, (i + 1) * this.texsizeX * 4)\n    ).forEach((val, i) =>\n      data.set(val, (this.texsizeY - i - 1) * this.texsizeX * 4)\n    );\n\n    const canvas = this.createCanvas(this.texsizeX, this.texsizeY);\n\n    const context = canvas.getContext(\"2d\");\n    const imageData = context.createImageData(this.texsizeX, this.texsizeY);\n    imageData.data.set(data);\n    context.putImageData(imageData, 0, 0);\n\n    this.gl.deleteTexture(compTexture);\n    this.gl.deleteFramebuffer(compFrameBuffer);\n\n    return canvas.toDataURL();\n  }\n\n  warpBufferToDataURL() {\n    const data = new Uint8Array(this.texsizeX * this.texsizeY * 4);\n\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.targetFrameBuffer);\n    this.gl.readPixels(\n      0,\n      0,\n      this.texsizeX,\n      this.texsizeY,\n      this.gl.RGBA,\n      this.gl.UNSIGNED_BYTE,\n      data\n    );\n\n    const canvas = this.createCanvas(this.texsizeX, this.texsizeY);\n\n    const context = canvas.getContext(\"2d\");\n    const imageData = context.createImageData(this.texsizeX, this.texsizeY);\n    imageData.data.set(data);\n    context.putImageData(imageData, 0, 0);\n\n    return canvas.toDataURL();\n  }\n}\n","import { loadModule } from \"eel-wasm\";\nimport ascLoader from \"@assemblyscript/loader\";\nimport AudioProcessor from \"./audio/audioProcessor\";\nimport Renderer from \"./rendering/renderer\";\nimport Utils from \"./utils\";\nimport loadPresetFunctionsBuffer from \"./assemblyscript/presetFunctions.ts\";\n\nexport default class Visualizer {\n  constructor(audioContext, canvas, opts) {\n    this.opts = opts;\n    this.audio = new AudioProcessor(audioContext);\n\n    const vizWidth = opts.width || 1200;\n    const vizHeight = opts.height || 900;\n    const reuseCanvas = opts.reuseCanvas || false;\n\n    this.internalCanvas = canvas;\n    if (!reuseCanvas) {\n        if (window.OffscreenCanvas) {\n          this.internalCanvas = new OffscreenCanvas(vizWidth, vizHeight);\n        } else {\n          this.internalCanvas = document.createElement(\"canvas\");\n          this.internalCanvas.width = vizWidth;\n          this.internalCanvas.height = vizHeight;\n        }\n    }\n\n    this.gl = this.internalCanvas.getContext(\"webgl2\", {\n      alpha: false,\n      antialias: false,\n      depth: false,\n      stencil: false,\n      premultipliedAlpha: false,\n    });\n\n    this.outputGl = canvas.getContext('2d');\n\n    this.baseValsDefaults = {\n      decay: 0.98,\n      gammaadj: 2,\n      echo_zoom: 2,\n      echo_alpha: 0,\n      echo_orient: 0,\n      red_blue: 0,\n      brighten: 0,\n      darken: 0,\n      wrap: 1,\n      darken_center: 0,\n      solarize: 0,\n      invert: 0,\n      bmotionvectorson: 1,\n      fshader: 0,\n      b1n: 0,\n      b2n: 0,\n      b3n: 0,\n      b1x: 1,\n      b2x: 1,\n      b3x: 1,\n      b1ed: 0.25,\n      wave_mode: 0,\n      additivewave: 0,\n      wave_dots: 0,\n      wave_thick: 0,\n      wave_a: 0.8,\n      wave_scale: 1,\n      wave_smoothing: 0.75,\n      wave_mystery: 0,\n      modwavealphabyvolume: 0,\n      modwavealphastart: 0.75,\n      modwavealphaend: 0.95,\n      wave_r: 1,\n      wave_g: 1,\n      wave_b: 1,\n      wave_x: 0.5,\n      wave_y: 0.5,\n      wave_brighten: 1,\n      mv_x: 12,\n      mv_y: 9,\n      mv_dx: 0,\n      mv_dy: 0,\n      mv_l: 0.9,\n      mv_r: 1,\n      mv_g: 1,\n      mv_b: 1,\n      mv_a: 1,\n      warpanimspeed: 1,\n      warpscale: 1,\n      zoomexp: 1,\n      zoom: 1,\n      rot: 0,\n      cx: 0.5,\n      cy: 0.5,\n      dx: 0,\n      dy: 0,\n      warp: 1,\n      sx: 1,\n      sy: 1,\n      ob_size: 0.01,\n      ob_r: 0,\n      ob_g: 0,\n      ob_b: 0,\n      ob_a: 0,\n      ib_size: 0.01,\n      ib_r: 0.25,\n      ib_g: 0.25,\n      ib_b: 0.25,\n      ib_a: 0,\n    };\n\n    this.shapeBaseValsDefaults = {\n      enabled: 0,\n      sides: 4,\n      additive: 0,\n      thickoutline: 0,\n      textured: 0,\n      num_inst: 1,\n      tex_zoom: 1,\n      tex_ang: 0,\n      x: 0.5,\n      y: 0.5,\n      rad: 0.1,\n      ang: 0,\n      r: 1,\n      g: 0,\n      b: 0,\n      a: 1,\n      r2: 0,\n      g2: 1,\n      b2: 0,\n      a2: 0,\n      border_r: 1,\n      border_g: 1,\n      border_b: 1,\n      border_a: 0.1,\n    };\n\n    this.waveBaseValsDefaults = {\n      enabled: 0,\n      samples: 512,\n      sep: 0,\n      scaling: 1,\n      smoothing: 0.5,\n      r: 1,\n      g: 1,\n      b: 1,\n      a: 1,\n      spectrum: 0,\n      usedots: 0,\n      thick: 0,\n      additive: 0,\n    };\n\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\n\n    this.globalPerFrameVars = [\n      \"old_wave_mode\",\n      // globals\n      \"frame\",\n      \"time\",\n      \"fps\",\n      \"bass\",\n      \"bass_att\",\n      \"mid\",\n      \"mid_att\",\n      \"treb\",\n      \"treb_att\",\n      \"meshx\",\n      \"meshy\",\n      \"aspectx\",\n      \"aspecty\",\n      \"pixelsx\",\n      \"pixelsy\",\n      \"rand_start\",\n      \"rand_preset\",\n    ];\n\n    this.globalPerPixelVars = [\n      // globals\n      \"frame\",\n      \"time\",\n      \"fps\",\n      \"bass\",\n      \"bass_att\",\n      \"mid\",\n      \"mid_att\",\n      \"treb\",\n      \"treb_att\",\n      \"meshx\",\n      \"meshy\",\n      \"aspectx\",\n      \"aspecty\",\n      \"pixelsx\",\n      \"pixelsy\",\n      \"rand_start\",\n      \"rand_preset\",\n      // for pixel eqs\n      \"x\",\n      \"y\",\n      \"rad\",\n      \"ang\",\n    ];\n\n    this.globalShapeVars = [\n      // globals\n      \"frame\",\n      \"time\",\n      \"fps\",\n      \"bass\",\n      \"bass_att\",\n      \"mid\",\n      \"mid_att\",\n      \"treb\",\n      \"treb_att\",\n      \"meshx\",\n      \"meshy\",\n      \"aspectx\",\n      \"aspecty\",\n      \"pixelsx\",\n      \"pixelsy\",\n      \"rand_start\",\n      \"rand_preset\",\n      // for shape eqs\n      \"instance\",\n    ];\n\n    this.shapeBaseVars = [\n      \"x\",\n      \"y\",\n      \"rad\",\n      \"ang\",\n      \"r\",\n      \"g\",\n      \"b\",\n      \"a\",\n      \"r2\",\n      \"g2\",\n      \"b2\",\n      \"a2\",\n      \"border_r\",\n      \"border_g\",\n      \"border_b\",\n      \"border_a\",\n      \"thickoutline\",\n      \"textured\",\n      \"tex_zoom\",\n      \"tex_ang\",\n      \"additive\",\n    ];\n\n    this.globalWaveVars = [\n      // globals\n      \"frame\",\n      \"time\",\n      \"fps\",\n      \"bass\",\n      \"bass_att\",\n      \"mid\",\n      \"mid_att\",\n      \"treb\",\n      \"treb_att\",\n      \"meshx\",\n      \"meshy\",\n      \"aspectx\",\n      \"aspecty\",\n      \"pixelsx\",\n      \"pixelsy\",\n      \"rand_start\",\n      \"rand_preset\",\n      // for wave eqs\n      \"x\",\n      \"y\",\n      \"sample\",\n      \"value1\",\n      \"value2\",\n    ];\n\n    this.renderer = new Renderer(this.gl, this.audio, opts);\n  }\n\n  loseGLContext() {\n    this.gl.getExtension(\"WEBGL_lose_context\").loseContext();\n    this.outputGl = null;\n  }\n\n  connectAudio(audioNode) {\n    this.audioNode = audioNode;\n    this.audio.connectAudio(audioNode);\n  }\n\n  disconnectAudio(audioNode) {\n    this.audio.disconnectAudio(audioNode);\n  }\n\n  // Override defaults, but only include variables in default map\n  static overrideDefaultVars(baseValsDefaults, baseVals) {\n    const combinedVals = {};\n\n    Object.keys(baseValsDefaults).forEach((key) => {\n      if (Object.prototype.hasOwnProperty.call(baseVals, key)) {\n        combinedVals[key] = baseVals[key];\n      } else {\n        combinedVals[key] = baseValsDefaults[key];\n      }\n    });\n\n    return combinedVals;\n  }\n\n  createQVars() {\n    const wasmVars = {};\n\n    this.qs.forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        0\n      );\n    });\n\n    return wasmVars;\n  }\n\n  createTVars() {\n    const wasmVars = {};\n\n    this.ts.forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        0\n      );\n    });\n\n    return wasmVars;\n  }\n\n  createPerFramePool(baseVals) {\n    const wasmVars = {};\n\n    Object.keys(this.baseValsDefaults).forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        baseVals[key]\n      );\n    });\n\n    this.globalPerFrameVars.forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        0\n      );\n    });\n\n    return wasmVars;\n  }\n\n  createPerPixelPool(baseVals) {\n    const wasmVars = {};\n\n    Object.keys(this.baseValsDefaults).forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        baseVals[key]\n      );\n    });\n\n    this.globalPerPixelVars.forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        0\n      );\n    });\n\n    return wasmVars;\n  }\n\n  createCustomShapePerFramePool(baseVals) {\n    const wasmVars = {};\n\n    Object.keys(this.shapeBaseValsDefaults).forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        baseVals[key]\n      );\n    });\n\n    this.globalShapeVars.forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        0\n      );\n    });\n\n    return wasmVars;\n  }\n\n  createCustomWavePerFramePool(baseVals) {\n    const wasmVars = {};\n\n    Object.keys(this.waveBaseValsDefaults).forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        baseVals[key]\n      );\n    });\n\n    this.globalWaveVars.forEach((key) => {\n      wasmVars[key] = new WebAssembly.Global(\n        { value: \"f64\", mutable: true },\n        0\n      );\n    });\n\n    return wasmVars;\n  }\n\n  static makeShapeResetPool(pool, variables, idx) {\n    return variables.reduce((acc, variable) => {\n      return { ...acc, [`${variable}_${idx}`]: pool[variable] };\n    }, {});\n  }\n\n  static base64ToArrayBuffer(base64) {\n    var binaryString = window.atob(base64);\n    var len = binaryString.length;\n    var bytes = new Uint8Array(len);\n    for (var i = 0; i < len; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n  }\n\n  async loadPreset(presetMap, blendTime = 0) {\n    const preset = JSON.parse(JSON.stringify(presetMap));\n    preset.baseVals = Visualizer.overrideDefaultVars(\n      this.baseValsDefaults,\n      preset.baseVals\n    );\n    for (let i = 0; i < preset.shapes.length; i++) {\n      preset.shapes[i].baseVals = Visualizer.overrideDefaultVars(\n        this.shapeBaseValsDefaults,\n        preset.shapes[i].baseVals\n      );\n    }\n\n    for (let i = 0; i < preset.waves.length; i++) {\n      preset.waves[i].baseVals = Visualizer.overrideDefaultVars(\n        this.waveBaseValsDefaults,\n        preset.waves[i].baseVals\n      );\n    }\n\n    const forceJS = preset.useJS && !this.opts.onlyUseWASM;\n\n    if (\n      Object.prototype.hasOwnProperty.call(preset, \"init_eqs_eel\") &&\n      !forceJS\n    ) {\n      preset.useWASM = true;\n      await this.loadWASMPreset(preset, blendTime);\n    } else if (!this.opts.onlyUseWASM) {\n      if (Object.prototype.hasOwnProperty.call(preset, \"init_eqs_str\")) {\n        this.loadJSPreset(preset, blendTime);\n      } else {\n        console.warn(\n          \"Tried to load a JS preset that doesn't have converted strings\"\n        );\n      }\n    } else {\n      console.warn(\n        \"Tried to load a preset that doesn't support WASM with onlyUseWASM on\"\n      );\n    }\n  }\n\n  async loadWASMPreset(preset, blendTime) {\n    const qWasmVars = this.createQVars();\n    const tWasmVars = this.createTVars();\n\n    const wasmVarPools = {\n      perFrame: { ...qWasmVars, ...this.createPerFramePool(preset.baseVals) },\n      perVertex: {\n        ...qWasmVars,\n        ...this.createPerPixelPool(preset.baseVals),\n      },\n    };\n\n    const wasmFunctions = {\n      presetInit: { pool: \"perFrame\", code: preset.init_eqs_eel },\n      perFrame: { pool: \"perFrame\", code: preset.frame_eqs_eel },\n    };\n\n    if (preset.pixel_eqs_eel !== \"\") {\n      wasmFunctions.perPixel = {\n        pool: \"perVertex\",\n        code: preset.pixel_eqs_eel,\n      };\n    }\n\n    for (let i = 0; i < preset.shapes.length; i++) {\n      wasmVarPools[`shapePerFrame${i}`] = {\n        ...qWasmVars,\n        ...tWasmVars,\n        ...this.createCustomShapePerFramePool(preset.shapes[i].baseVals),\n      };\n\n      if (preset.shapes[i].baseVals.enabled !== 0) {\n        wasmFunctions[`shapes_${i}_init_eqs`] = {\n          pool: `shapePerFrame${i}`,\n          code: preset.shapes[i].init_eqs_eel,\n        };\n        wasmFunctions[`shapes_${i}_frame_eqs`] = {\n          pool: `shapePerFrame${i}`,\n          code: preset.shapes[i].frame_eqs_eel,\n        };\n      }\n    }\n\n    for (let i = 0; i < preset.waves.length; i++) {\n      if (preset.waves[i].baseVals.enabled !== 0) {\n        wasmVarPools[`wavePerFrame${i}`] = {\n          ...qWasmVars,\n          ...tWasmVars,\n          ...this.createCustomWavePerFramePool(preset.waves[i].baseVals),\n        };\n        wasmFunctions[`waves_${i}_init_eqs`] = {\n          pool: `wavePerFrame${i}`,\n          code: preset.waves[i].init_eqs_eel,\n        };\n        wasmFunctions[`waves_${i}_frame_eqs`] = {\n          pool: `wavePerFrame${i}`,\n          code: preset.waves[i].frame_eqs_eel,\n        };\n\n        if (\n          preset.waves[i].point_eqs_eel &&\n          preset.waves[i].point_eqs_eel !== \"\"\n        ) {\n          wasmFunctions[`waves_${i}_point_eqs`] = {\n            pool: `wavePerFrame${i}`,\n            code: preset.waves[i].point_eqs_eel,\n          };\n        }\n      }\n    }\n\n    const mod = await loadModule({\n      pools: wasmVarPools,\n      functions: wasmFunctions,\n      eelVersion: preset.version || 2,\n    });\n\n    // eel-wasm returns null if the function was empty\n    const handleEmptyFunction = (f) => {\n      return f ? f : () => {};\n    };\n\n    const presetFunctionsMod = await ascLoader.instantiate(\n      Visualizer.base64ToArrayBuffer(loadPresetFunctionsBuffer()),\n      {\n        pixelEqs: {\n          perPixelEqs: handleEmptyFunction(mod.exports.perPixel),\n        },\n        // For resetting pixel eq vars\n        pixelVarPool: {\n          warp: wasmVarPools.perVertex.warp,\n          zoom: wasmVarPools.perVertex.zoom,\n          zoomexp: wasmVarPools.perVertex.zoomexp,\n          cx: wasmVarPools.perVertex.cx,\n          cy: wasmVarPools.perVertex.cy,\n          sx: wasmVarPools.perVertex.sx,\n          sy: wasmVarPools.perVertex.sy,\n          dx: wasmVarPools.perVertex.dx,\n          dy: wasmVarPools.perVertex.dy,\n          rot: wasmVarPools.perVertex.rot,\n          x: wasmVarPools.perVertex.x,\n          y: wasmVarPools.perVertex.y,\n          ang: wasmVarPools.perVertex.ang,\n          rad: wasmVarPools.perVertex.rad,\n        },\n        // For resetting qs/ts\n        qVarPool: qWasmVars,\n        tVarPool: tWasmVars,\n        // For resetting shape vars\n        shapePool0: Visualizer.makeShapeResetPool(\n          wasmVarPools[\"shapePerFrame0\"],\n          this.shapeBaseVars,\n          0\n        ),\n        shapePool1: Visualizer.makeShapeResetPool(\n          wasmVarPools[\"shapePerFrame1\"],\n          this.shapeBaseVars,\n          1\n        ),\n        shapePool2: Visualizer.makeShapeResetPool(\n          wasmVarPools[\"shapePerFrame2\"],\n          this.shapeBaseVars,\n          2\n        ),\n        shapePool3: Visualizer.makeShapeResetPool(\n          wasmVarPools[\"shapePerFrame3\"],\n          this.shapeBaseVars,\n          3\n        ),\n        console: {\n          logi: (value) => {\n            // eslint-disable-next-line no-console\n            console.log(\"logi: \" + value);\n          },\n          logf: (value) => {\n            // eslint-disable-next-line no-console\n            console.log(\"logf: \" + value);\n          },\n        },\n        env: {\n          abort: () => {\n            // No idea why we need this.\n          },\n        },\n      }\n    );\n\n    preset.globalPools = wasmVarPools;\n    preset.init_eqs = handleEmptyFunction(mod.exports.presetInit);\n    preset.frame_eqs = handleEmptyFunction(mod.exports.perFrame);\n    preset.save_qs = presetFunctionsMod.exports.saveQs;\n    preset.restore_qs = presetFunctionsMod.exports.restoreQs;\n    preset.save_ts = presetFunctionsMod.exports.saveTs;\n    preset.restore_ts = presetFunctionsMod.exports.restoreTs;\n    if (mod.exports.perPixel) {\n      preset.pixel_eqs = mod.exports.perPixel;\n    }\n    preset.pixel_eqs_initialize_array = (meshWidth, meshHeight) => {\n      const arrPtr = presetFunctionsMod.exports.createFloat32Array(\n        (meshWidth + 1) * (meshHeight + 1) * 2\n      );\n      preset.pixel_eqs_array = arrPtr;\n    };\n    preset.pixel_eqs_get_array = () => {\n      return presetFunctionsMod.exports.__getFloat32ArrayView(\n        preset.pixel_eqs_array\n      );\n    };\n    preset.pixel_eqs_wasm = (...args) =>\n      presetFunctionsMod.exports.runPixelEquations(\n        preset.pixel_eqs_array,\n        ...args\n      );\n\n    for (let i = 0; i < preset.shapes.length; i++) {\n      if (preset.shapes[i].baseVals.enabled !== 0) {\n        preset.shapes[i].init_eqs = handleEmptyFunction(\n          mod.exports[`shapes_${i}_init_eqs`]\n        );\n        // Not wrapped because we check if null in customShapes\n        preset.shapes[i].frame_eqs = mod.exports[`shapes_${i}_frame_eqs`];\n\n        preset.shapes[i].frame_eqs_save = () =>\n          presetFunctionsMod.exports[`shape${i}_save`]();\n        preset.shapes[i].frame_eqs_restore = () =>\n          presetFunctionsMod.exports[`shape${i}_restore`]();\n      }\n    }\n\n    for (let i = 0; i < preset.waves.length; i++) {\n      if (preset.waves[i].baseVals.enabled !== 0) {\n        const wave = {\n          init_eqs: handleEmptyFunction(mod.exports[`waves_${i}_init_eqs`]),\n          frame_eqs: handleEmptyFunction(mod.exports[`waves_${i}_frame_eqs`]),\n        };\n\n        if (\n          preset.waves[i].point_eqs_eel &&\n          preset.waves[i].point_eqs_eel !== \"\"\n        ) {\n          // Not wrapped because we check if null in customWaves\n          wave.point_eqs = mod.exports[`waves_${i}_point_eqs`];\n        } else {\n          wave.point_eqs = \"\";\n        }\n\n        preset.waves[i] = Object.assign({}, preset.waves[i], wave);\n      }\n    }\n\n    this.renderer.loadPreset(preset, blendTime);\n  }\n\n  loadJSPreset(preset, blendTime) {\n    // If init_eqs is already a function, it means we've already prepared the preset to run\n    if (typeof preset.init_eqs !== \"function\") {\n      /* eslint-disable no-param-reassign, no-new-func */\n      preset.init_eqs = new Function(\"a\", `${preset.init_eqs_str} return a;`);\n      preset.frame_eqs = new Function(\"a\", `${preset.frame_eqs_str} return a;`);\n      if (preset.pixel_eqs_str && preset.pixel_eqs_str !== \"\") {\n        preset.pixel_eqs = new Function(\n          \"a\",\n          `${preset.pixel_eqs_str} return a;`\n        );\n      } else {\n        preset.pixel_eqs = \"\";\n      }\n\n      for (let i = 0; i < preset.shapes.length; i++) {\n        if (preset.shapes[i].baseVals.enabled !== 0) {\n          preset.shapes[i] = Object.assign({}, preset.shapes[i], {\n            init_eqs: new Function(\n              \"a\",\n              `${preset.shapes[i].init_eqs_str} return a;`\n            ),\n            frame_eqs: new Function(\n              \"a\",\n              `${preset.shapes[i].frame_eqs_str} return a;`\n            ),\n          });\n        }\n      }\n\n      for (let i = 0; i < preset.waves.length; i++) {\n        if (preset.waves[i].baseVals.enabled !== 0) {\n          const wave = {\n            init_eqs: new Function(\n              \"a\",\n              `${preset.waves[i].init_eqs_str} return a;`\n            ),\n            frame_eqs: new Function(\n              \"a\",\n              `${preset.waves[i].frame_eqs_str} return a;`\n            ),\n          };\n\n          if (\n            preset.waves[i].point_eqs_str &&\n            preset.waves[i].point_eqs_str !== \"\"\n          ) {\n            wave.point_eqs = new Function(\n              \"a\",\n              `${preset.waves[i].point_eqs_str} return a;`\n            );\n          } else {\n            wave.point_eqs = \"\";\n          }\n\n          preset.waves[i] = Object.assign({}, preset.waves[i], wave);\n        }\n      }\n      /* eslint-enable no-param-reassign, no-new-func */\n    }\n    this.renderer.loadPreset(preset, blendTime);\n  }\n\n  loadExtraImages(imageData) {\n    this.renderer.loadExtraImages(imageData);\n  }\n\n  setRendererSize(width, height, opts = {}) {\n    this.internalCanvas.width = width;\n    this.internalCanvas.height = height;\n    this.renderer.setRendererSize(width, height, opts);\n  }\n\n  setInternalMeshSize(width, height) {\n    this.renderer.setInternalMeshSize(width, height);\n  }\n\n  setOutputAA(useAA) {\n    this.renderer.setOutputAA(useAA);\n  }\n\n  setCanvas(canvas) {\n    this.outputGl = canvas.getContext('2d');\n  }\n\n  render(opts) {\n    const renderOutput = this.renderer.render(opts);\n\n    if (this.outputGl) {\n      this.outputGl.drawImage(this.internalCanvas, 0, 0);\n    }\n\n    return renderOutput;\n  }\n\n  launchSongTitleAnim(text) {\n    this.renderer.launchSongTitleAnim(text);\n  }\n\n  toDataURL() {\n    return this.renderer.toDataURL();\n  }\n\n  warpBufferToDataURL() {\n    return this.renderer.warpBufferToDataURL();\n  }\n}\n","import \"ecma-proposal-math-extensions\";\nimport \"./presetBase\";\nimport Visualizer from \"./visualizer\";\n\nexport default class Butterchurn {\n  static createVisualizer(context, canvas, opts) {\n    return new Visualizer(context, canvas, opts);\n  }\n}\n","/* eslint-disable */\nvar EPSILON = 0.00001;\n\nwindow.sqr = function sqr(x) {\n  return x * x;\n};\n\nwindow.sqrt = function sqrt(x) {\n  return Math.sqrt(Math.abs(x));\n};\n\nwindow.log10 = function log10(val) {\n  return Math.log(val) * Math.LOG10E;\n};\n\nwindow.sign = function sign(x) {\n  return x > 0 ? 1 : x < 0 ? -1 : 0;\n};\n\nwindow.rand = function rand(x) {\n  var xf = Math.floor(x);\n  if (xf < 1) {\n    return Math.random();\n  }\n  return Math.random() * xf;\n};\n\nwindow.randint = function randint(x) {\n  return Math.floor(rand(x));\n};\n\nwindow.bnot = function bnot(x) {\n  return Math.abs(x) < EPSILON ? 1 : 0;\n};\n\nfunction isFiniteNumber(num) {\n  return isFinite(num) && !isNaN(num);\n}\n\nwindow.pow = function pow(x, y) {\n  var z = Math.pow(x, y);\n  if (!isFiniteNumber(z)) {\n    // mostly from complex results\n    return 0;\n  }\n  return z;\n};\n\nwindow.div = function div(x, y) {\n  if (y === 0) {\n    return 0;\n  }\n  return x / y;\n};\n\nwindow.mod = function mod(x, y) {\n  if (y === 0) {\n    return 0;\n  }\n  var z = Math.floor(x) % Math.floor(y);\n  return z;\n};\n\nwindow.bitor = function bitor(x, y) {\n  var z = Math.floor(x) | Math.floor(y);\n  return z;\n};\n\nwindow.bitand = function bitand(x, y) {\n  var z = Math.floor(x) & Math.floor(y);\n  return z;\n};\n\nwindow.sigmoid = function sigmoid(x, y) {\n  var t = 1 + Math.exp(-x * y);\n  return Math.abs(t) > EPSILON ? 1.0 / t : 0;\n};\n\nwindow.bor = function bor(x, y) {\n  return Math.abs(x) > EPSILON || Math.abs(y) > EPSILON ? 1 : 0;\n};\n\nwindow.band = function band(x, y) {\n  return Math.abs(x) > EPSILON && Math.abs(y) > EPSILON ? 1 : 0;\n};\n\nwindow.equal = function equal(x, y) {\n  return Math.abs(x - y) < EPSILON ? 1 : 0;\n};\n\nwindow.above = function above(x, y) {\n  return x > y ? 1 : 0;\n};\n\nwindow.below = function below(x, y) {\n  return x < y ? 1 : 0;\n};\n\nwindow.ifcond = function ifcond(x, y, z) {\n  return Math.abs(x) > EPSILON ? y : z;\n};\n\nwindow.memcpy = function memcpy(megabuf, dst, src, len) {\n  let destOffset = dst;\n  let srcOffset = src;\n  let copyLen = len;\n\n  if (srcOffset < 0) {\n    copyLen += srcOffset;\n    destOffset -= srcOffset;\n    srcOffset = 0;\n  }\n\n  if (destOffset < 0) {\n    copyLen += destOffset;\n    srcOffset -= destOffset;\n    destOffset = 0;\n  }\n\n  if (copyLen > 0) {\n    megabuf.copyWithin(destOffset, srcOffset, copyLen);\n  }\n\n  return dst;\n};\n/* eslint-enable */\n","\"use strict\";\n\n{\n  const defineMath = (name, assignment) => {\n    var configurable = typeof assignment === \"function\" ? true : false;\n    var writable = typeof assignment === \"function\" ? true : false;\n    var enumerable = typeof assignment === \"function\" ? true : false;\n\n    Object.defineProperty(Math, name, {\n      configurable: configurable,\n      enumerable: enumerable,\n      writable: writable,\n      value: assignment\n    });\n  };\n\n  defineMath(\"DEG_PER_RAD\", Math.PI / 180);\n  defineMath(\"RAD_PER_DEG\", 180 / Math.PI);\n\n  const f32A = new Float32Array(1);\n\n  defineMath(\"scale\", function scale(x, inLow, inHigh, outLow, outHigh) {\n    if (arguments.length === 0) {\n      return NaN;\n    }\n\n    if (Number.isNaN(x) ||\n        Number.isNaN(inLow) ||\n        Number.isNaN(inHigh) ||\n        Number.isNaN(outLow) ||\n        Number.isNaN(outHigh)) {\n      return NaN;\n    }\n\n    if (x === Infinity ||\n        x === -Infinity) {\n      return x;\n    }\n\n    return (x - inLow) * (outHigh - outLow) /\n      (inHigh - inLow) + outLow;\n  });\n\n  defineMath(\"fscale\", function fscale(x, inLow, inHigh, outLow, outHigh) {\n    f32A[0] = Math.scale(x, inLow, inHigh, outLow, outHigh);\n    return f32A[0];\n  });\n\n  defineMath(\"clamp\", function clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  });\n\n  defineMath(\"radians\", function radians(degrees) {\n    return degrees * Math.DEG_PER_RAD;\n  });\n\n  defineMath(\"degrees\", function degrees(radians) {\n    return radians * Math.RAD_PER_DEG;\n  });\n}\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function () {\n    var o = function (k, v, o, l) { for (o = o || {}, l = k.length; l--; o[k[l]] = v)\n        ; return o; }, $V0 = [1, 18], $V1 = [1, 7], $V2 = [1, 19], $V3 = [1, 20], $V4 = [1, 14], $V5 = [1, 15], $V6 = [1, 16], $V7 = [1, 33], $V8 = [1, 31], $V9 = [1, 23], $Va = [1, 22], $Vb = [1, 24], $Vc = [1, 25], $Vd = [1, 26], $Ve = [1, 27], $Vf = [1, 28], $Vg = [1, 29], $Vh = [1, 30], $Vi = [5, 8, 15, 18, 20, 28, 29, 32, 33, 34, 35, 36, 37, 38], $Vj = [5, 15, 18], $Vk = [5, 12, 15, 17, 18, 24, 25, 28, 29, 30], $Vl = [1, 57], $Vm = [5, 8, 12, 15, 17, 18, 24, 25, 28, 29, 30], $Vn = [15, 18], $Vo = [5, 8, 15, 18, 28, 29, 38], $Vp = [5, 8, 15, 18, 28, 29, 32, 33, 38], $Vq = [5, 8, 15, 18, 28, 29, 32, 33, 34, 37, 38], $Vr = [5, 8, 15, 18, 28, 29, 32, 33, 34, 35, 36, 37, 38], $Vs = [5, 8, 15, 18], $Vt = [5, 8, 15, 18, 20, 22, 28, 29, 32, 33, 34, 35, 36, 37, 38];\n    var parser = { trace: function trace() { },\n        yy: {},\n        symbols_: { \"error\": 2, \"SCRIPT\": 3, \"expression\": 4, \"EOF\": 5, \"expressionsOptionalTrailingSemi\": 6, \"separator\": 7, \";\": 8, \"expressions\": 9, \"EXPRESSION_BLOCK\": 10, \"IDENTIFIER\": 11, \"IDENTIFIER_TOKEN\": 12, \"argument\": 13, \"arguments\": 14, \",\": 15, \"FUNCTION_CALL\": 16, \"(\": 17, \")\": 18, \"LOGICAL_EXPRESSION\": 19, \"LOGICAL_OPERATOR_TOKEN\": 20, \"ASSIGNMENT\": 21, \"ASSIGNMENT_OPERATOR_TOKEN\": 22, \"number\": 23, \"DIGITS_TOKEN\": 24, \".\": 25, \"NUMBER_LITERAL\": 26, \"UNARY_EXPRESSION\": 27, \"-\": 28, \"+\": 29, \"!\": 30, \"BINARY_EXPRESSION\": 31, \"*\": 32, \"/\": 33, \"%\": 34, \"&\": 35, \"|\": 36, \"^\": 37, \"COMPARISON_TOKEN\": 38, \"$accept\": 0, \"$end\": 1 },\n        terminals_: { 2: \"error\", 5: \"EOF\", 8: \";\", 12: \"IDENTIFIER_TOKEN\", 15: \",\", 17: \"(\", 18: \")\", 20: \"LOGICAL_OPERATOR_TOKEN\", 22: \"ASSIGNMENT_OPERATOR_TOKEN\", 24: \"DIGITS_TOKEN\", 25: \".\", 28: \"-\", 29: \"+\", 30: \"!\", 32: \"*\", 33: \"/\", 34: \"%\", 35: \"&\", 36: \"|\", 37: \"^\", 38: \"COMPARISON_TOKEN\" },\n        productions_: [0, [3, 2], [3, 2], [3, 1], [7, 1], [7, 2], [9, 2], [9, 3], [6, 1], [6, 2], [10, 1], [11, 1], [13, 1], [13, 1], [14, 1], [14, 3], [16, 3], [16, 4], [19, 3], [21, 3], [21, 3], [23, 1], [23, 2], [23, 3], [23, 2], [23, 1], [26, 1], [27, 2], [27, 2], [27, 2], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [4, 1], [4, 1], [4, 3], [4, 1], [4, 1], [4, 1], [4, 1], [4, 1], [4, 3]],\n        performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n            /* this == yyval */\n            var $0 = $$.length - 1;\n            switch (yystate) {\n                case 1:\n                    return { type: 'SCRIPT', body: [$$[$0 - 1]], loc: this._$ };\n                    break;\n                case 2:\n                    return { type: 'SCRIPT', body: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 3:\n                    return { type: 'SCRIPT', body: [], loc: this._$ };\n                    break;\n                case 6:\n                    this.$ = [$$[$0 - 1]];\n                    break;\n                case 7:\n                    this.$ = $$[$0 - 2].concat([$$[$0 - 1]]);\n                    break;\n                case 8:\n                    this.$ = $$[$0];\n                    break;\n                case 9:\n                    this.$ = $$[$0 - 1].concat([$$[$0]]);\n                    break;\n                case 10:\n                    this.$ = { type: 'EXPRESSION_BLOCK', body: $$[$0], loc: this._$ };\n                    break;\n                case 11:\n                    this.$ = { type: 'IDENTIFIER', value: $$[$0].toLowerCase(), loc: this._$ };\n                    break;\n                case 14:\n                    this.$ = [$$[$0]];\n                    break;\n                case 15:\n                    this.$ = $$[$0 - 2].concat([$$[$0]]);\n                    break;\n                case 16:\n                    this.$ = { type: 'CALL_EXPRESSION', callee: $$[$0 - 2], arguments: [], loc: this._$ };\n                    break;\n                case 17:\n                    this.$ = { type: 'CALL_EXPRESSION', callee: $$[$0 - 3], arguments: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 18:\n                    this.$ = { type: 'LOGICAL_EXPRESSION', left: $$[$0 - 2], right: $$[$0], operator: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 19:\n                case 20:\n                    this.$ = { type: 'ASSIGNMENT_EXPRESSION', left: $$[$0 - 2], operator: $$[$0 - 1], right: $$[$0], loc: this._$ };\n                    break;\n                case 21:\n                    this.$ = Number($$[$0]);\n                    break;\n                case 22:\n                    this.$ = Number($$[$0 - 1]);\n                    break;\n                case 23:\n                    this.$ = Number($$[$0 - 2] + $$[$0 - 1] + $$[$0]);\n                    break;\n                case 24:\n                    this.$ = Number('0' + $$[$0 - 1] + $$[$0]);\n                    break;\n                case 25:\n                    this.$ = 0;\n                    break;\n                case 26:\n                    this.$ = { type: 'NUMBER_LITERAL', value: $$[$0], loc: this._$ };\n                    break;\n                case 27:\n                case 28:\n                case 29:\n                    this.$ = { type: 'UNARY_EXPRESSION', value: $$[$0], operator: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 30:\n                case 31:\n                case 32:\n                case 33:\n                case 34:\n                case 35:\n                case 36:\n                case 37:\n                case 38:\n                    this.$ = { type: 'BINARY_EXPRESSION', left: $$[$0 - 2], right: $$[$0], operator: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 41:\n                case 47:\n                    this.$ = $$[$0 - 1];\n                    break;\n            }\n        },\n        table: [{ 3: 1, 4: 2, 5: [1, 4], 6: 3, 9: 13, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 1: [3] }, { 5: [1, 21], 7: 32, 8: $V7, 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }, { 5: [1, 34] }, { 1: [2, 3] }, o($Vi, [2, 39]), o($Vi, [2, 40]), { 4: 35, 6: 37, 9: 13, 10: 36, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vi, [2, 42]), o($Vi, [2, 43]), o($Vi, [2, 44], { 22: [1, 38] }), o($Vi, [2, 45], { 17: [1, 40], 22: [1, 39] }), o($Vi, [2, 46]), o($Vj, [2, 8], { 31: 5, 27: 6, 26: 8, 21: 9, 16: 10, 11: 11, 19: 12, 23: 17, 4: 41, 12: $V0, 17: $V1, 24: $V2, 25: $V3, 28: $V4, 29: $V5, 30: $V6 }), { 4: 42, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 43, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 44, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vi, [2, 26]), o([5, 8, 15, 17, 18, 20, 22, 28, 29, 32, 33, 34, 35, 36, 37, 38], [2, 11]), o($Vi, [2, 21], { 25: [1, 45] }), o($Vi, [2, 25], { 24: [1, 46] }), { 1: [2, 1] }, { 4: 47, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 48, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 49, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 50, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 51, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 52, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 53, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 54, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 55, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 56, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vk, [2, 6], { 8: $Vl }), o($Vm, [2, 4]), { 1: [2, 2] }, { 7: 32, 8: $V7, 18: [1, 58], 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }, { 18: [1, 59] }, o($Vn, [2, 10]), { 4: 60, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 61, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 65, 6: 37, 9: 13, 10: 66, 11: 11, 12: $V0, 13: 64, 14: 63, 16: 10, 17: $V1, 18: [1, 62], 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vj, [2, 9], { 7: 67, 8: $V7, 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vo, [2, 27], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vo, [2, 28], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vo, [2, 29], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vi, [2, 22], { 24: [1, 68] }), o($Vi, [2, 24]), o($Vo, [2, 30], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vo, [2, 31], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vp, [2, 32], { 20: $V8, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vp, [2, 33], { 20: $V8, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vq, [2, 34], { 20: $V8, 35: $Ve, 36: $Vf }), o($Vr, [2, 35], { 20: $V8 }), o($Vr, [2, 36], { 20: $V8 }), o($Vq, [2, 37], { 20: $V8, 35: $Ve, 36: $Vf }), o($Vs, [2, 38], { 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vi, [2, 18]), o($Vm, [2, 5]), o($Vi, [2, 41]), o($Vi, [2, 47]), o($Vs, [2, 20], { 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vs, [2, 19], { 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vt, [2, 16]), { 15: [1, 70], 18: [1, 69] }, o($Vn, [2, 14]), o($Vn, [2, 12], { 7: 32, 8: $V7, 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vn, [2, 13]), o($Vk, [2, 7], { 8: $Vl }), o($Vi, [2, 23]), o($Vt, [2, 17]), { 4: 65, 6: 37, 9: 13, 10: 66, 11: 11, 12: $V0, 13: 71, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vn, [2, 15])],\n        defaultActions: { 4: [2, 3], 21: [2, 1], 34: [2, 2] },\n        parseError: function parseError(str, hash) {\n            if (hash.recoverable) {\n                this.trace(str);\n            }\n            else {\n                var error = new Error(str);\n                error.hash = hash;\n                throw error;\n            }\n        },\n        parse: function parse(input) {\n            var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n            var args = lstack.slice.call(arguments, 1);\n            var lexer = Object.create(this.lexer);\n            var sharedState = { yy: {} };\n            for (var k in this.yy) {\n                if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n                    sharedState.yy[k] = this.yy[k];\n                }\n            }\n            lexer.setInput(input, sharedState.yy);\n            sharedState.yy.lexer = lexer;\n            sharedState.yy.parser = this;\n            if (typeof lexer.yylloc == 'undefined') {\n                lexer.yylloc = {};\n            }\n            var yyloc = lexer.yylloc;\n            lstack.push(yyloc);\n            var ranges = lexer.options && lexer.options.ranges;\n            if (typeof sharedState.yy.parseError === 'function') {\n                this.parseError = sharedState.yy.parseError;\n            }\n            else {\n                this.parseError = Object.getPrototypeOf(this).parseError;\n            }\n            function popStack(n) {\n                stack.length = stack.length - 2 * n;\n                vstack.length = vstack.length - n;\n                lstack.length = lstack.length - n;\n            }\n            _token_stack: var lex = function () {\n                var token;\n                token = lexer.lex() || EOF;\n                if (typeof token !== 'number') {\n                    token = self.symbols_[token] || token;\n                }\n                return token;\n            };\n            var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n            while (true) {\n                state = stack[stack.length - 1];\n                if (this.defaultActions[state]) {\n                    action = this.defaultActions[state];\n                }\n                else {\n                    if (symbol === null || typeof symbol == 'undefined') {\n                        symbol = lex();\n                    }\n                    action = table[state] && table[state][symbol];\n                }\n                if (typeof action === 'undefined' || !action.length || !action[0]) {\n                    var errStr = '';\n                    expected = [];\n                    for (p in table[state]) {\n                        if (this.terminals_[p] && p > TERROR) {\n                            expected.push('\\'' + this.terminals_[p] + '\\'');\n                        }\n                    }\n                    if (lexer.showPosition) {\n                        errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n                    }\n                    else {\n                        errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n                    }\n                    this.parseError(errStr, {\n                        text: lexer.match,\n                        token: this.terminals_[symbol] || symbol,\n                        line: lexer.yylineno,\n                        loc: yyloc,\n                        expected: expected\n                    });\n                }\n                if (action[0] instanceof Array && action.length > 1) {\n                    throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n                }\n                switch (action[0]) {\n                    case 1:\n                        stack.push(symbol);\n                        vstack.push(lexer.yytext);\n                        lstack.push(lexer.yylloc);\n                        stack.push(action[1]);\n                        symbol = null;\n                        if (!preErrorSymbol) {\n                            yyleng = lexer.yyleng;\n                            yytext = lexer.yytext;\n                            yylineno = lexer.yylineno;\n                            yyloc = lexer.yylloc;\n                            if (recovering > 0) {\n                                recovering--;\n                            }\n                        }\n                        else {\n                            symbol = preErrorSymbol;\n                            preErrorSymbol = null;\n                        }\n                        break;\n                    case 2:\n                        len = this.productions_[action[1]][1];\n                        yyval.$ = vstack[vstack.length - len];\n                        yyval._$ = {\n                            first_line: lstack[lstack.length - (len || 1)].first_line,\n                            last_line: lstack[lstack.length - 1].last_line,\n                            first_column: lstack[lstack.length - (len || 1)].first_column,\n                            last_column: lstack[lstack.length - 1].last_column\n                        };\n                        if (ranges) {\n                            yyval._$.range = [\n                                lstack[lstack.length - (len || 1)].range[0],\n                                lstack[lstack.length - 1].range[1]\n                            ];\n                        }\n                        r = this.performAction.apply(yyval, [\n                            yytext,\n                            yyleng,\n                            yylineno,\n                            sharedState.yy,\n                            action[1],\n                            vstack,\n                            lstack\n                        ].concat(args));\n                        if (typeof r !== 'undefined') {\n                            return r;\n                        }\n                        if (len) {\n                            stack = stack.slice(0, -1 * len * 2);\n                            vstack = vstack.slice(0, -1 * len);\n                            lstack = lstack.slice(0, -1 * len);\n                        }\n                        stack.push(this.productions_[action[1]][0]);\n                        vstack.push(yyval.$);\n                        lstack.push(yyval._$);\n                        newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n                        stack.push(newState);\n                        break;\n                    case 3:\n                        return true;\n                }\n            }\n            return true;\n        } };\n    /* generated by jison-lex 0.3.4 */\n    var lexer = (function () {\n        var lexer = ({\n            EOF: 1,\n            parseError: function parseError(str, hash) {\n                if (this.yy.parser) {\n                    this.yy.parser.parseError(str, hash);\n                }\n                else {\n                    throw new Error(str);\n                }\n            },\n            // resets the lexer, sets new input\n            setInput: function (input, yy) {\n                this.yy = yy || this.yy || {};\n                this._input = input;\n                this._more = this._backtrack = this.done = false;\n                this.yylineno = this.yyleng = 0;\n                this.yytext = this.matched = this.match = '';\n                this.conditionStack = ['INITIAL'];\n                this.yylloc = {\n                    first_line: 1,\n                    first_column: 0,\n                    last_line: 1,\n                    last_column: 0\n                };\n                if (this.options.ranges) {\n                    this.yylloc.range = [0, 0];\n                }\n                this.offset = 0;\n                return this;\n            },\n            // consumes and returns one char from the input\n            input: function () {\n                var ch = this._input[0];\n                this.yytext += ch;\n                this.yyleng++;\n                this.offset++;\n                this.match += ch;\n                this.matched += ch;\n                var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n                if (lines) {\n                    this.yylineno++;\n                    this.yylloc.last_line++;\n                }\n                else {\n                    this.yylloc.last_column++;\n                }\n                if (this.options.ranges) {\n                    this.yylloc.range[1]++;\n                }\n                this._input = this._input.slice(1);\n                return ch;\n            },\n            // unshifts one char (or a string) into the input\n            unput: function (ch) {\n                var len = ch.length;\n                var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n                this._input = ch + this._input;\n                this.yytext = this.yytext.substr(0, this.yytext.length - len);\n                //this.yyleng -= len;\n                this.offset -= len;\n                var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n                this.match = this.match.substr(0, this.match.length - 1);\n                this.matched = this.matched.substr(0, this.matched.length - 1);\n                if (lines.length - 1) {\n                    this.yylineno -= lines.length - 1;\n                }\n                var r = this.yylloc.range;\n                this.yylloc = {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.yylineno + 1,\n                    first_column: this.yylloc.first_column,\n                    last_column: lines ?\n                        (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                            + oldLines[oldLines.length - lines.length].length - lines[0].length :\n                        this.yylloc.first_column - len\n                };\n                if (this.options.ranges) {\n                    this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n                }\n                this.yyleng = this.yytext.length;\n                return this;\n            },\n            // When called from action, caches matched text and appends it on next action\n            more: function () {\n                this._more = true;\n                return this;\n            },\n            // When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\n            reject: function () {\n                if (this.options.backtrack_lexer) {\n                    this._backtrack = true;\n                }\n                else {\n                    return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                        text: \"\",\n                        token: null,\n                        line: this.yylineno\n                    });\n                }\n                return this;\n            },\n            // retain first n characters of the match\n            less: function (n) {\n                this.unput(this.match.slice(n));\n            },\n            // displays already matched input, i.e. for error messages\n            pastInput: function () {\n                var past = this.matched.substr(0, this.matched.length - this.match.length);\n                return (past.length > 20 ? '...' : '') + past.substr(-20).replace(/\\n/g, \"\");\n            },\n            // displays upcoming input, i.e. for error messages\n            upcomingInput: function () {\n                var next = this.match;\n                if (next.length < 20) {\n                    next += this._input.substr(0, 20 - next.length);\n                }\n                return (next.substr(0, 20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n            },\n            // displays the character position where the lexing error occurred, i.e. for error messages\n            showPosition: function () {\n                var pre = this.pastInput();\n                var c = new Array(pre.length + 1).join(\"-\");\n                return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n            },\n            // test the lexed token: return FALSE when not a match, otherwise return token\n            test_match: function (match, indexed_rule) {\n                var token, lines, backup;\n                if (this.options.backtrack_lexer) {\n                    // save context\n                    backup = {\n                        yylineno: this.yylineno,\n                        yylloc: {\n                            first_line: this.yylloc.first_line,\n                            last_line: this.last_line,\n                            first_column: this.yylloc.first_column,\n                            last_column: this.yylloc.last_column\n                        },\n                        yytext: this.yytext,\n                        match: this.match,\n                        matches: this.matches,\n                        matched: this.matched,\n                        yyleng: this.yyleng,\n                        offset: this.offset,\n                        _more: this._more,\n                        _input: this._input,\n                        yy: this.yy,\n                        conditionStack: this.conditionStack.slice(0),\n                        done: this.done\n                    };\n                    if (this.options.ranges) {\n                        backup.yylloc.range = this.yylloc.range.slice(0);\n                    }\n                }\n                lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n                if (lines) {\n                    this.yylineno += lines.length;\n                }\n                this.yylloc = {\n                    first_line: this.yylloc.last_line,\n                    last_line: this.yylineno + 1,\n                    first_column: this.yylloc.last_column,\n                    last_column: lines ?\n                        lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                        this.yylloc.last_column + match[0].length\n                };\n                this.yytext += match[0];\n                this.match += match[0];\n                this.matches = match;\n                this.yyleng = this.yytext.length;\n                if (this.options.ranges) {\n                    this.yylloc.range = [this.offset, this.offset += this.yyleng];\n                }\n                this._more = false;\n                this._backtrack = false;\n                this._input = this._input.slice(match[0].length);\n                this.matched += match[0];\n                token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n                if (this.done && this._input) {\n                    this.done = false;\n                }\n                if (token) {\n                    return token;\n                }\n                else if (this._backtrack) {\n                    // recover context\n                    for (var k in backup) {\n                        this[k] = backup[k];\n                    }\n                    return false; // rule action called reject() implying the next rule should be tested instead.\n                }\n                return false;\n            },\n            // return next match in input\n            next: function () {\n                if (this.done) {\n                    return this.EOF;\n                }\n                if (!this._input) {\n                    this.done = true;\n                }\n                var token, match, tempMatch, index;\n                if (!this._more) {\n                    this.yytext = '';\n                    this.match = '';\n                }\n                var rules = this._currentRules();\n                for (var i = 0; i < rules.length; i++) {\n                    tempMatch = this._input.match(this.rules[rules[i]]);\n                    if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                        match = tempMatch;\n                        index = i;\n                        if (this.options.backtrack_lexer) {\n                            token = this.test_match(tempMatch, rules[i]);\n                            if (token !== false) {\n                                return token;\n                            }\n                            else if (this._backtrack) {\n                                match = false;\n                                continue; // rule action called reject() implying a rule MISmatch.\n                            }\n                            else {\n                                // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                                return false;\n                            }\n                        }\n                        else if (!this.options.flex) {\n                            break;\n                        }\n                    }\n                }\n                if (match) {\n                    token = this.test_match(match, rules[index]);\n                    if (token !== false) {\n                        return token;\n                    }\n                    // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                    return false;\n                }\n                if (this._input === \"\") {\n                    return this.EOF;\n                }\n                else {\n                    return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                        text: \"\",\n                        token: null,\n                        line: this.yylineno\n                    });\n                }\n            },\n            // return next match that has a token\n            lex: function lex() {\n                var r = this.next();\n                if (r) {\n                    return r;\n                }\n                else {\n                    return this.lex();\n                }\n            },\n            // activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\n            begin: function begin(condition) {\n                this.conditionStack.push(condition);\n            },\n            // pop the previously active lexer condition state off the condition stack\n            popState: function popState() {\n                var n = this.conditionStack.length - 1;\n                if (n > 0) {\n                    return this.conditionStack.pop();\n                }\n                else {\n                    return this.conditionStack[0];\n                }\n            },\n            // produce the lexer rule set which is active for the currently active lexer condition state\n            _currentRules: function _currentRules() {\n                if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n                    return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n                }\n                else {\n                    return this.conditions[\"INITIAL\"].rules;\n                }\n            },\n            // return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\n            topState: function topState(n) {\n                n = this.conditionStack.length - 1 - Math.abs(n || 0);\n                if (n >= 0) {\n                    return this.conditionStack[n];\n                }\n                else {\n                    return \"INITIAL\";\n                }\n            },\n            // alias for begin(condition)\n            pushState: function pushState(condition) {\n                this.begin(condition);\n            },\n            // return the number of states currently on the stack\n            stateStackSize: function stateStackSize() {\n                return this.conditionStack.length;\n            },\n            options: {},\n            performAction: function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {\n                var YYSTATE = YY_START;\n                switch ($avoiding_name_collisions) {\n                    case 0: /* skip whitespace */\n                        break;\n                    case 1:\n                        return 24;\n                        break;\n                    case 2:\n                        return 38;\n                        break;\n                    case 3:\n                        return 22;\n                        break;\n                    case 4:\n                        return 20;\n                        break;\n                    case 5:\n                        return 12;\n                        break;\n                    case 6:\n                        return 5;\n                        break;\n                    case 7:\n                        return yy_.yytext[0];\n                        break;\n                }\n            },\n            rules: [/^(?:\\s+)/, /^(?:[0-9]+)/, /^(?:(==|!=|<=|>=|<|>))/, /^(?:[+\\-*/%]?=)/, /^(?:(\\&\\&)|\\|\\|)/, /^(?:[a-zA-Z_][a-zA-Z0-9._]*)/, /^(?:$)/, /^(?:.)/],\n            conditions: { \"INITIAL\": { \"rules\": [0, 1, 2, 3, 4, 5, 6, 7], \"inclusive\": true } }\n        });\n        return lexer;\n    })();\n    parser.lexer = lexer;\n    function Parser() {\n        this.yy = {};\n    }\n    Parser.prototype = parser;\n    parser.Parser = Parser;\n    return new Parser;\n})();\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\n    exports.parser = parser;\n    exports.Parser = parser.Parser;\n    exports.parse = function () { return parser.parse.apply(parser, arguments); };\n    exports.main = () => { };\n    if (typeof module !== 'undefined' && require.main === module) {\n        exports.main(process.argv.slice(1));\n    }\n}\n//# sourceMappingURL=parser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CHILDREN = {\n    ASSIGNMENT_EXPRESSION: [\n        { type: \"NODE\", key: \"right\" },\n    ],\n    SCRIPT: [{ type: \"ARRAY\", key: \"body\" }],\n    EXPRESSION_BLOCK: [{ type: \"ARRAY\", key: \"body\" }],\n    UNARY_EXPRESSION: [{ type: \"NODE\", key: \"value\" }],\n    NUMBER_LITERAL: [],\n    IDENTIFIER: [],\n    CALL_EXPRESSION: [\n        { type: \"ARRAY\", key: \"arguments\" },\n        { type: \"NODE\", key: \"callee\" },\n    ],\n    BINARY_EXPRESSION: [\n        { type: \"NODE\", key: \"left\" },\n        { type: \"NODE\", key: \"right\" },\n    ],\n    LOGICAL_EXPRESSION: [\n        { type: \"NODE\", key: \"left\" },\n        { type: \"NODE\", key: \"right\" },\n    ],\n};\nfunction mapAst(ast, cb) {\n    const children = CHILDREN[ast.type];\n    let newAst = ast;\n    if (children == null) {\n        throw new Error(`Unknown children definition for ${ast.type}`);\n    }\n    children.forEach(child => {\n        if (child.type === \"NODE\") {\n            const orignalChild = ast[child.key];\n            const newChild = mapAst(orignalChild, cb);\n            if (newChild !== orignalChild) {\n                newAst = Object.assign(Object.assign({}, newAst), { [child.key]: newChild });\n            }\n        }\n        else if (child.type === \"ARRAY\") {\n            const orignalChildren = ast[child.key];\n            const newChildren = orignalChildren.map(originalChild => mapAst(originalChild, cb));\n            const childrenHaveChanged = orignalChildren.some((child, i) => child !== newChildren[i]);\n            if (childrenHaveChanged) {\n                newAst = Object.assign(Object.assign({}, newAst), { [child.key]: newChildren });\n            }\n        }\n    });\n    return cb(newAst);\n}\nexports.mapAst = mapAst;\n//# sourceMappingURL=astUtils.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst parser_1 = require(\"./parser\");\nconst emitter_1 = require(\"./emitter\");\nconst encoding_1 = require(\"./encoding\");\nconst shims_1 = __importDefault(require(\"./shims\"));\nconst Utils = __importStar(require(\"./utils\"));\nconst wasmFunctions_1 = require(\"./wasmFunctions\");\nconst constants_1 = require(\"./constants\");\nfunction compileModule({ pools, functions: funcs, eelVersion = 2, preParsed = false, }) {\n    if (Object.keys(pools).includes(\"shims\")) {\n        throw new Error('You may not name a pool \"shims\". \"shims\" is reserved for injected JavaScript functions.');\n    }\n    // Collect all the globals that we expect to get as imports.\n    const importedVars = [];\n    Object.entries(pools).forEach(([poolName, pool]) => {\n        pool.forEach(variableName => {\n            importedVars.push([poolName, variableName]);\n        });\n    });\n    // Ensure all the imported globals get the first ids.\n    const varResolver = new Utils.ScopedIdMap();\n    importedVars.forEach(([poolName, variableName]) => {\n        varResolver.get(poolName, variableName);\n    });\n    const functionImports = Object.entries(shims_1.default).map(([name, func]) => {\n        return {\n            args: new Array(func.length).fill(null).map(_ => encoding_1.VAL_TYPE.f64),\n            // Shims implicitly always return a number\n            returns: [encoding_1.VAL_TYPE.f64],\n            name,\n        };\n    });\n    const localFuncOrder = [];\n    const moduleFuncs = [];\n    Object.entries(funcs).forEach(([name, { pool, code }]) => {\n        if (pools[pool] == null) {\n            const poolsList = Object.keys(pools);\n            if (poolsList.length === 0) {\n                throw new Error(`The function \"${name}\" was declared as using a variable ` +\n                    `pool named \"${pool}\" but no pools were defined.`);\n            }\n            throw new Error(`The function \"${name}\" was declared as using a variable ` +\n                `pool named \"${pool}\" which is not among the variable ` +\n                `pools defined. The defined variable pools are: ` +\n                `${Utils.formatList(poolsList)}.`);\n        }\n        const ast = preParsed ? code : parser_1.parse(code);\n        if (typeof ast === \"string\") {\n            // TODO: Change the API so this can be enforced by types\n            throw new Error(\"Got passed unparsed code without setting the preParsed flag\");\n        }\n        if (ast.type !== \"SCRIPT\") {\n            throw new Error(\"Invalid AST\");\n        }\n        if (ast.body.length === 0) {\n            return;\n        }\n        const localVariables = [];\n        const context = {\n            resolveVar: name => {\n                // The `reg00`-`reg99` variables are special in that they are shared between all pools.\n                if (/^reg\\d\\d$/.test(name)) {\n                    return varResolver.get(null, name);\n                }\n                return varResolver.get(pool, name);\n            },\n            resolveLocal: type => {\n                // TODO: We could provide a way for the emitter to release a local\n                // variable so that we can reuse it, much in the same way a traditional\n                // compiler does in register allocation.\n                localVariables.push(type);\n                return localVariables.length - 1;\n            },\n            resolveFunc: name => {\n                // If this is a shim, return the shim index.\n                const shimdex = functionImports.findIndex(func => func.name === name);\n                if (shimdex !== -1) {\n                    const call = encoding_1.op.call(shimdex);\n                    if (name === \"rand\" && eelVersion === 1) {\n                        return [...call, encoding_1.op.f64_floor];\n                    }\n                    return call;\n                }\n                // If it's not a shim and it's not a defined function, return null.\n                // The emitter will generate a nice error.\n                if (wasmFunctions_1.localFuncMap[name] == null) {\n                    return null;\n                }\n                let index = localFuncOrder.indexOf(name);\n                if (index === -1) {\n                    localFuncOrder.push(name);\n                    index = localFuncOrder.length - 1;\n                }\n                return encoding_1.op.call(index + functionImports.length);\n            },\n            rawSource: code,\n        };\n        const binary = emitter_1.emit(ast, context);\n        moduleFuncs.push({\n            binary,\n            exportName: name,\n            args: [],\n            returns: [],\n            localVariables,\n        });\n    });\n    const localFuncs = localFuncOrder.map(name => {\n        const func = wasmFunctions_1.localFuncMap[name];\n        // This check is technicaly redundant since we check inside resolveLocalFunc\n        // in the compiler context. It's here just to catch potential compiler bugs.\n        if (func == null) {\n            throw new Error(`Undefined local function \"${name}\"`);\n        }\n        return func;\n    });\n    // Given a function definition, return a hashable string representation of its signature.\n    const getSignatureKey = (func) => {\n        return [...func.args, \"|\", ...func.returns].join(\"-\");\n    };\n    // https://webassembly.github.io/spec/core/binary/modules.html#type-section\n    const types = [];\n    const typeIndexByKey = new Map();\n    [...functionImports, ...localFuncs, ...moduleFuncs].forEach(func => {\n        const key = getSignatureKey(func);\n        if (typeIndexByKey.has(key)) {\n            return;\n        }\n        types.push([\n            encoding_1.FUNCTION_TYPE,\n            ...encoding_1.encodeFlatVector(func.args),\n            ...encoding_1.encodeFlatVector(func.returns),\n        ]);\n        typeIndexByKey.set(key, types.length - 1);\n    });\n    function getTypeIndex(func) {\n        const key = getSignatureKey(func);\n        const typeIndex = typeIndexByKey.get(key);\n        if (typeIndex == null) {\n            throw new Error(`Failed to get a type index for key ${key}`);\n        }\n        return typeIndex;\n    }\n    // https://webassembly.github.io/spec/core/binary/modules.html#import-section\n    const imports = [\n        ...importedVars.map(([namespace, name]) => {\n            return [\n                ...encoding_1.encodeString(namespace),\n                ...encoding_1.encodeString(name),\n                ...[encoding_1.GLOBAL_TYPE, encoding_1.VAL_TYPE.f64, encoding_1.MUTABILITY.var],\n            ];\n        }),\n        ...functionImports.map((func, i) => {\n            const typeIndex = getTypeIndex(func);\n            return [\n                ...encoding_1.encodeString(\"shims\"),\n                ...encoding_1.encodeString(func.name),\n                ...[encoding_1.TYPE_IDX, ...encoding_1.unsignedLEB128(typeIndex)],\n            ];\n        }),\n    ];\n    // https://webassembly.github.io/spec/core/binary/modules.html#function-section\n    //\n    // > Functions are referenced through function indices, starting with the smallest\n    // > index not referencing a function import.\n    const functions = [...localFuncs, ...moduleFuncs].map(func => {\n        const typeIndex = getTypeIndex(func);\n        return encoding_1.unsignedLEB128(typeIndex);\n    });\n    const memories = [\n        // Only one memory\n        [\n            0x01,\n            ...encoding_1.unsignedLEB128(constants_1.WASM_MEMORY_SIZE),\n            ...encoding_1.unsignedLEB128(constants_1.WASM_MEMORY_SIZE),\n        ],\n    ];\n    // https://webassembly.github.io/spec/core/binary/modules.html#global-section\n    const globalCount = varResolver.size() - importedVars.length;\n    const globals = Utils.times(globalCount, () => {\n        return [\n            encoding_1.VAL_TYPE.f64,\n            encoding_1.MUTABILITY.var,\n            ...encoding_1.op.f64_const(0),\n            encoding_1.op.end,\n        ];\n    });\n    // https://webassembly.github.io/spec/core/binary/modules.html#binary-exportsec\n    const xports = [...moduleFuncs].map((func, i) => {\n        const funcIndex = i + functionImports.length + localFuncs.length;\n        return [\n            ...encoding_1.encodeString(func.exportName),\n            encoding_1.EXPORT_TYPE.FUNC,\n            ...encoding_1.unsignedLEB128(funcIndex),\n        ];\n    });\n    /* Uncomment this to expose memory\n    xports.push([\n      ...encodeString(\"memory\"),\n      EXPORT_TYPE.MEMORY,\n      ...unsignedLEB128(0),\n    ]);\n    */\n    // https://webassembly.github.io/spec/core/binary/modules.html#code-section\n    const codes = [...localFuncs, ...moduleFuncs].map(func => {\n        var _a;\n        // TODO: We could collapose consecutive types here, or even move to a two\n        // pass approach where ids are resolved after the emitter is run.\n        const localTypes = ((_a = func.localVariables) !== null && _a !== void 0 ? _a : []).map(type => {\n            return [...encoding_1.unsignedLEB128(1), type];\n        });\n        // It's a bit odd that every other section is an array of arrays and this\n        // one is an array of vectors. The spec says this is so that when navigating\n        // the binary functions can be skipped efficiently.\n        return encoding_1.encodeFlatVector([\n            ...encoding_1.encodeNestedVector(localTypes),\n            ...func.binary,\n            encoding_1.op.end,\n        ]);\n    });\n    return new Uint8Array([\n        // Magic module header\n        ...encoding_1.MAGIC,\n        // Version number\n        ...encoding_1.WASM_VERSION,\n        ...encoding_1.encodeSection(encoding_1.SECTION.TYPE, types),\n        ...encoding_1.encodeSection(encoding_1.SECTION.IMPORT, imports),\n        ...encoding_1.encodeSection(encoding_1.SECTION.FUNC, functions),\n        ...encoding_1.encodeSection(encoding_1.SECTION.MEMORY, memories),\n        ...encoding_1.encodeSection(encoding_1.SECTION.GLOBAL, globals),\n        ...encoding_1.encodeSection(encoding_1.SECTION.EXPORT, xports),\n        ...encoding_1.encodeSection(encoding_1.SECTION.CODE, codes),\n    ]);\n}\nexports.compileModule = compileModule;\n//# sourceMappingURL=compiler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://webassembly.github.io/spec/core/exec/runtime.html#page-size\nconst WASM_PAGE_SIZE = 65536;\nconst BYTES_PER_F64 = 8;\nconst BUFFER_COUNT = 2;\n// https://github.com/WACUP/vis_milk2/blob/de9625a89e724afe23ed273b96b8e48496095b6c/ns-eel2/ns-eel.h#L136\nexports.MAX_LOOP_COUNT = 1048576;\n// The number of items allowed in each buffer (megabuf/gmegabuf).\n// https://github.com/WACUP/vis_milk2/blob/de9625a89e724afe23ed273b96b8e48496095b6c/ns-eel2/ns-eel.h#L145\nexports.BUFFER_SIZE = 65536 * 128;\nexports.WASM_MEMORY_SIZE = Math.ceil((exports.BUFFER_SIZE * BYTES_PER_F64 * BUFFER_COUNT) / WASM_PAGE_SIZE);\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst encoding_1 = require(\"./encoding\");\nconst shims_1 = __importDefault(require(\"./shims\"));\nconst errorUtils_1 = require(\"./errorUtils\");\nconst wasmFunctions_1 = require(\"./wasmFunctions\");\nconst utils_1 = require(\"./utils\");\nconst constants_1 = require(\"./constants\");\nfunction emit(ast, context) {\n    var _a, _b, _c;\n    switch (ast.type) {\n        case \"SCRIPT\": {\n            const body = ast.body.map((statement, i) => {\n                return [...emit(statement, context), encoding_1.op.drop];\n            });\n            return utils_1.flatten(body);\n        }\n        case \"EXPRESSION_BLOCK\": {\n            return emitExpressionBlock(ast.body, context);\n        }\n        case \"BINARY_EXPRESSION\": {\n            const left = emit(ast.left, context);\n            const right = emit(ast.right, context);\n            const operatorToOps = {\n                \"+\": [encoding_1.op.f64_add],\n                \"-\": [encoding_1.op.f64_sub],\n                \"*\": [encoding_1.op.f64_mul],\n                \"/\": context.resolveFunc(\"div\"),\n                \"%\": context.resolveFunc(\"mod\"),\n                \"|\": context.resolveFunc(\"bitwiseOr\"),\n                \"&\": context.resolveFunc(\"bitwiseAnd\"),\n                \"^\": context.resolveFunc(\"pow\"),\n                // Comparison operators\n                \"==\": [encoding_1.op.f64_sub, ...encoding_1.IS_ZEROISH, encoding_1.op.f64_convert_i32_s],\n                \"!=\": [encoding_1.op.f64_sub, ...encoding_1.IS_NOT_ZEROISH, encoding_1.op.f64_convert_i32_s],\n                \"<\": [encoding_1.op.f64_lt, encoding_1.op.f64_convert_i32_s],\n                \">\": [encoding_1.op.f64_gt, encoding_1.op.f64_convert_i32_s],\n                \"<=\": [encoding_1.op.f64_le, encoding_1.op.f64_convert_i32_s],\n                \">=\": [encoding_1.op.f64_ge, encoding_1.op.f64_convert_i32_s],\n            };\n            const code = operatorToOps[ast.operator];\n            if (code == null) {\n                throw errorUtils_1.createCompilerError(`Unknown binary expression operator ${ast.operator}`, ast.loc, context.rawSource);\n            }\n            return [...left, ...right, ...code];\n        }\n        case \"CALL_EXPRESSION\": {\n            const functionName = ast.callee.value;\n            // Destructure this so that TypeScript knows it won't get mutated.\n            const argList = ast.arguments;\n            const assertArity = (arity) => {\n                if (argList.length < arity) {\n                    throw errorUtils_1.createUserError(`Too few arguments passed to \\`${functionName}()\\`. Expected ${arity} but only got ${argList.length}.`, ast.loc, context.rawSource);\n                }\n                if (argList.length > arity) {\n                    throw errorUtils_1.createUserError(`Too many arguments passed to \\`${functionName}()\\`. Expected ${arity} but got ${argList.length}.`, argList[arity].loc, context.rawSource);\n                }\n            };\n            // Some functions have special behavior\n            switch (functionName) {\n                case \"exec2\":\n                    assertArity(2);\n                    return emitExpressionBlock(ast.arguments, context);\n                case \"exec3\":\n                    assertArity(3);\n                    return emitExpressionBlock(ast.arguments, context);\n                case \"if\":\n                    assertArity(3);\n                    const [test, consiquent, alternate] = ast.arguments;\n                    return emitConditional(test, consiquent, alternate, context);\n                case \"while\":\n                    assertArity(1);\n                    return emitWhile(ast.arguments[0], context);\n                case \"loop\":\n                    assertArity(2);\n                    return emitLoop(ast.arguments[0], ast.arguments[1], context);\n                case \"megabuf\":\n                case \"gmegabuf\":\n                    assertArity(1);\n                    const index = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n                    return [\n                        ...emit(ast.arguments[0], context),\n                        ...((_a = context.resolveFunc(\"_getBufferIndex\")) !== null && _a !== void 0 ? _a : []),\n                        ...encoding_1.op.local_tee(index),\n                        ...encoding_1.op.i32_const(-1),\n                        encoding_1.op.i32_ne,\n                        // STACK: [in range]\n                        ...encoding_1.op.if(encoding_1.BLOCK.f64),\n                        ...encoding_1.op.local_get(index),\n                        ...encoding_1.op.f64_load(3, emitAddMemoryOffset(functionName)),\n                        encoding_1.op.else,\n                        ...encoding_1.op.f64_const(0),\n                        encoding_1.op.end,\n                    ];\n                case \"assign\":\n                    assertArity(2);\n                    const variableIdentifier = ast.arguments[0];\n                    if (variableIdentifier.type != \"IDENTIFIER\") {\n                        throw errorUtils_1.createUserError(\"Expected the first argument of `assign()` to be an identifier.\", variableIdentifier.loc, context.rawSource);\n                    }\n                    const resolvedName = context.resolveVar(variableIdentifier.value);\n                    return [\n                        ...emit(ast.arguments[1], context),\n                        ...encoding_1.op.global_set(resolvedName),\n                        ...encoding_1.op.global_get(resolvedName),\n                    ];\n            }\n            // Function calls which can be linlined\n            const args = utils_1.flatten(ast.arguments.map(node => emit(node, context)));\n            // This is just a continuation of the above switch statement, but it's for functions which all parse their args the same.\n            switch (functionName) {\n                case \"abs\":\n                    assertArity(1);\n                    return [...args, encoding_1.op.f64_abs];\n                case \"sqrt\":\n                    assertArity(1);\n                    return [...args, encoding_1.op.f64_abs, encoding_1.op.f64_sqrt];\n                case \"int\":\n                    assertArity(1);\n                    return [...args, encoding_1.op.f64_floor];\n                case \"min\":\n                    assertArity(2);\n                    return [...args, encoding_1.op.f64_min];\n                case \"max\":\n                    assertArity(2);\n                    return [...args, encoding_1.op.f64_max];\n                case \"above\":\n                    assertArity(2);\n                    return [...args, encoding_1.op.f64_gt, encoding_1.op.f64_convert_i32_s];\n                case \"below\":\n                    assertArity(2);\n                    return [...args, encoding_1.op.f64_lt, encoding_1.op.f64_convert_i32_s];\n                case \"equal\":\n                    assertArity(2);\n                    return [...args, encoding_1.op.f64_sub, ...encoding_1.IS_ZEROISH, encoding_1.op.f64_convert_i32_s];\n                case \"bnot\":\n                    assertArity(1);\n                    return [...args, ...encoding_1.IS_ZEROISH, encoding_1.op.f64_convert_i32_s];\n                case \"floor\":\n                    assertArity(1);\n                    return [...args, encoding_1.op.f64_floor];\n                case \"ceil\":\n                    assertArity(1);\n                    return [...args, encoding_1.op.f64_ceil];\n            }\n            const invocation = context.resolveFunc(functionName);\n            if (invocation == null ||\n                // Ensure this isn't a private function. This is a bit awkward becuase\n                // Eel does implement some _ functions but while they are _intended_ to be\n                // private, they accidentally expose them. We should find a cleaner way\n                // to defining user accessible functions vs utility functions used by\n                // the compiler.\n                functionName.startsWith(\"_\")) {\n                throw errorUtils_1.createUserError(`\"${functionName}\" is not defined.`, ast.callee.loc, context.rawSource);\n            }\n            if (shims_1.default[functionName] != null) {\n                assertArity(shims_1.default[functionName].length);\n            }\n            else if (wasmFunctions_1.localFuncMap[functionName] != null) {\n                assertArity(wasmFunctions_1.localFuncMap[functionName].args.length);\n            }\n            else {\n                throw errorUtils_1.createCompilerError(`Missing arity information for the function \\`${functionName}()\\``, ast.callee.loc, context.rawSource);\n            }\n            return [...args, ...invocation];\n        }\n        case \"ASSIGNMENT_EXPRESSION\": {\n            const { left } = ast;\n            const rightCode = emit(ast.right, context);\n            const mutationCode = getAssignmentOperatorMutation(ast, context);\n            if (left.type === \"IDENTIFIER\") {\n                const resolvedName = context.resolveVar(left.value);\n                // TODO: In lots of cases we don't care about the return value. In those\n                // cases we should try to find a way to omit the `get/drop` combo.\n                // Peephole optimization seems to be the conventional way to do this.\n                // https://en.wikipedia.org/wiki/Peephole_optimization\n                const get = encoding_1.op.global_get(resolvedName);\n                const set = encoding_1.op.global_set(resolvedName);\n                // `=` is a special case in that it does not need the original value.\n                if (mutationCode === null) {\n                    return [...rightCode, ...set, ...get];\n                }\n                return [...get, ...rightCode, ...mutationCode, ...set, ...get];\n            }\n            if (left.type !== \"CALL_EXPRESSION\") {\n                throw errorUtils_1.createCompilerError(\n                // @ts-ignore This is a guard in case the parser has an error\n                `Unexpected left hand side type for assignment: ${left.type}`, ast.loc, context.rawSource);\n            }\n            // Special assignment case for `megabuf(n) = e` and `gmegabuf(n) = e`.\n            const localIndex = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n            if (left.arguments.length !== 1) {\n                throw errorUtils_1.createUserError(`Expected 1 argument when assinging to a buffer but got ${left.arguments.length}.`, left.arguments.length === 0 ? left.loc : left.arguments[1].loc, context.rawSource);\n            }\n            const bufferName = left.callee.value;\n            if (bufferName !== \"gmegabuf\" && bufferName !== \"megabuf\") {\n                throw errorUtils_1.createUserError(\"The only function calls which may be assigned to are `gmegabuf()` and `megabuf()`.\", left.callee.loc, context.rawSource);\n            }\n            const addOffset = emitAddMemoryOffset(bufferName);\n            if (mutationCode === null) {\n                // TODO: Move this to wasmFunctions once we know how to call functions\n                // from within functions (need to get the offset).\n                const unnormalizedIndex = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n                const rightValue = context.resolveLocal(encoding_1.VAL_TYPE.f64);\n                return [\n                    // Emit the right hand side unconditionally to ensure it always runs.\n                    ...rightCode,\n                    ...encoding_1.op.local_set(rightValue),\n                    ...emit(left.arguments[0], context),\n                    ...((_b = context.resolveFunc(\"_getBufferIndex\")) !== null && _b !== void 0 ? _b : []),\n                    ...encoding_1.op.local_tee(unnormalizedIndex),\n                    ...encoding_1.op.i32_const(0),\n                    encoding_1.op.i32_lt_s,\n                    // STACK: [is the index out of range?]\n                    ...encoding_1.op.if(encoding_1.BLOCK.f64),\n                    ...encoding_1.op.f64_const(0),\n                    encoding_1.op.else,\n                    ...encoding_1.op.local_get(unnormalizedIndex),\n                    ...encoding_1.op.local_tee(localIndex),\n                    // STACK: [buffer index]\n                    ...encoding_1.op.local_get(rightValue),\n                    // STACK: [buffer index, right]\n                    ...encoding_1.op.f64_store(3, addOffset),\n                    // STACK: []\n                    ...encoding_1.op.local_get(rightValue),\n                    // STACK: [Right/Buffer value]\n                    encoding_1.op.end,\n                ];\n            }\n            // TODO: Move this to wasmFunctions once we know how to call functions\n            // from within functions (need to get the offset).\n            const index = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n            const inBounds = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n            const rightValue = context.resolveLocal(encoding_1.VAL_TYPE.f64);\n            const result = context.resolveLocal(encoding_1.VAL_TYPE.f64);\n            return [\n                ...rightCode,\n                ...encoding_1.op.local_set(rightValue),\n                ...emit(left.arguments[0], context),\n                ...((_c = context.resolveFunc(\"_getBufferIndex\")) !== null && _c !== void 0 ? _c : []),\n                ...encoding_1.op.local_tee(index),\n                // STACK: [index]\n                ...encoding_1.op.i32_const(-1),\n                encoding_1.op.i32_ne,\n                ...encoding_1.op.local_tee(inBounds),\n                ...encoding_1.op.if(encoding_1.BLOCK.f64),\n                ...encoding_1.op.local_get(index),\n                ...encoding_1.op.f64_load(3, addOffset),\n                encoding_1.op.else,\n                ...encoding_1.op.f64_const(0),\n                encoding_1.op.end,\n                // STACK: [current value from memory || 0]\n                // Apply the mutation\n                ...encoding_1.op.local_get(rightValue),\n                ...mutationCode,\n                ...encoding_1.op.local_tee(result),\n                // STACK: [new value]\n                ...encoding_1.op.local_get(inBounds),\n                ...encoding_1.op.if(encoding_1.BLOCK.void),\n                ...encoding_1.op.local_get(index),\n                ...encoding_1.op.local_get(result),\n                ...encoding_1.op.f64_store(3, addOffset),\n                encoding_1.op.end,\n            ];\n        }\n        case \"LOGICAL_EXPRESSION\": {\n            const left = emit(ast.left, context);\n            const right = emit(ast.right, context);\n            const behaviorMap = {\n                \"&&\": {\n                    comparison: encoding_1.IS_ZEROISH,\n                    shortCircutValue: 0,\n                },\n                \"||\": {\n                    comparison: encoding_1.IS_NOT_ZEROISH,\n                    shortCircutValue: 1,\n                },\n            };\n            const behavior = behaviorMap[ast.operator];\n            if (behavior == null) {\n                throw errorUtils_1.createCompilerError(`Unknown logical expression operator ${ast.operator}`, ast.loc, context.rawSource);\n            }\n            const { comparison, shortCircutValue } = behavior;\n            return [\n                ...left,\n                ...comparison,\n                ...encoding_1.op.if(encoding_1.BLOCK.f64),\n                ...encoding_1.op.f64_const(shortCircutValue),\n                encoding_1.op.else,\n                ...right,\n                ...encoding_1.IS_NOT_ZEROISH,\n                encoding_1.op.f64_convert_i32_s,\n                encoding_1.op.end,\n            ];\n        }\n        case \"UNARY_EXPRESSION\": {\n            const value = emit(ast.value, context);\n            const operatorToCode = {\n                \"-\": [encoding_1.op.f64_neg],\n                \"+\": [],\n                \"!\": [...encoding_1.IS_ZEROISH, encoding_1.op.f64_convert_i32_s],\n            };\n            const code = operatorToCode[ast.operator];\n            if (code == null) {\n                throw errorUtils_1.createCompilerError(`Unknown logical unary operator ${ast.operator}`, ast.loc, context.rawSource);\n            }\n            return [...value, ...code];\n        }\n        case \"IDENTIFIER\":\n            const variableName = ast.value;\n            // TODO: It's a bit odd that not every IDENTIFIER node gets emitted. In\n            // function calls and assignments we just peek at the name and never emit\n            // it.\n            return encoding_1.op.global_get(context.resolveVar(variableName));\n        case \"NUMBER_LITERAL\":\n            return encoding_1.op.f64_const(ast.value);\n        default:\n            throw errorUtils_1.createCompilerError(\n            // @ts-ignore This runtime check is here because the caller may not be type-checked\n            `Unknown AST node type ${ast.type}`, \n            // @ts-ignore This runtime check is here because the caller may not be type-checked\n            ast.loc, context.rawSource);\n    }\n}\nexports.emit = emit;\nfunction emitExpressionBlock(body, context) {\n    const statements = body.map((statement, i) => {\n        return emit(statement, context);\n    });\n    return utils_1.flatten(utils_1.arrayJoin(statements, [encoding_1.op.drop]));\n}\nfunction emitWhile(expression, context) {\n    const body = emit(expression, context);\n    const iterationCount = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n    return [\n        ...encoding_1.op.i32_const(0),\n        ...encoding_1.op.local_set(iterationCount),\n        ...encoding_1.op.loop(encoding_1.BLOCK.void),\n        // Increment and check loop count\n        ...encoding_1.op.local_get(iterationCount),\n        ...encoding_1.op.i32_const(1),\n        encoding_1.op.i32_add,\n        ...encoding_1.op.local_tee(iterationCount),\n        // STACK: [iteration count]\n        ...encoding_1.op.i32_const(constants_1.MAX_LOOP_COUNT),\n        encoding_1.op.i32_lt_u,\n        // STACK: [loop in range]\n        ...body,\n        ...encoding_1.IS_NOT_ZEROISH,\n        // STACK: [loop in range, body is truthy]\n        encoding_1.op.i32_and,\n        // STACK: [can continue]\n        ...encoding_1.op.br_if(0),\n        encoding_1.op.end,\n        ...encoding_1.op.f64_const(0),\n    ];\n}\nfunction emitLoop(count, expression, context) {\n    const body = emit(expression, context);\n    const localIndex = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n    return [\n        ...encoding_1.op.block(encoding_1.BLOCK.void),\n        // Assign the count to a variable\n        ...emit(count, context),\n        encoding_1.op.i32_trunc_f64_s,\n        ...encoding_1.op.local_tee(localIndex),\n        ...encoding_1.op.i32_const(0),\n        encoding_1.op.i32_le_s,\n        ...encoding_1.op.br_if(1),\n        ...encoding_1.op.loop(encoding_1.BLOCK.void),\n        // Run the body\n        ...body,\n        encoding_1.op.drop,\n        // Decrement the count\n        ...encoding_1.op.local_get(localIndex),\n        ...encoding_1.op.i32_const(1),\n        encoding_1.op.i32_sub,\n        ...encoding_1.op.local_tee(localIndex),\n        ...encoding_1.op.i32_const(0),\n        encoding_1.op.i32_ne,\n        ...encoding_1.op.br_if(0),\n        encoding_1.op.end,\n        encoding_1.op.end,\n        ...encoding_1.op.f64_const(0),\n    ];\n}\nfunction emitConditional(test, consiquent, alternate, context) {\n    // TODO: In some cases https://webassembly.studio/ compiles these to use `select`.\n    // Is that an optimization that we might want as well?\n    return [\n        ...emit(test, context),\n        ...encoding_1.IS_NOT_ZEROISH,\n        ...encoding_1.op.if(encoding_1.BLOCK.f64),\n        ...emit(consiquent, context),\n        encoding_1.op.else,\n        ...emit(alternate, context),\n        encoding_1.op.end,\n    ];\n}\n// There are two sections of memory. This function emits code to add the correct\n// offset to an i32 index already on the stack.\nfunction emitAddMemoryOffset(name) {\n    switch (name) {\n        case \"gmegabuf\":\n            return constants_1.BUFFER_SIZE * 8;\n        case \"megabuf\":\n            return 0;\n    }\n}\nfunction getAssignmentOperatorMutation(ast, context) {\n    const operatorToCode = {\n        \"+=\": [encoding_1.op.f64_add],\n        \"-=\": [encoding_1.op.f64_sub],\n        \"*=\": [encoding_1.op.f64_mul],\n        \"/=\": [encoding_1.op.f64_div],\n        \"%=\": context.resolveFunc(\"mod\"),\n        \"=\": null,\n    };\n    const operatorCode = operatorToCode[ast.operator];\n    if (operatorCode === undefined) {\n        throw errorUtils_1.createCompilerError(`Unknown assignment operator \"${ast.operator}\"`, ast.loc, context.rawSource);\n    }\n    return operatorCode;\n}\n//# sourceMappingURL=emitter.js.map","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ieee754 = __importStar(require(\"./ieee754\"));\nconst utils_1 = require(\"./utils\");\nexports.MAGIC = [0x00, 0x61, 0x73, 0x6d];\nexports.WASM_VERSION = [0x01, 0x00, 0x00, 0x00];\nexports.EPSILON = 0.00001;\n// An intial attempt to construct a Wasm binary by hand.\n/*\n0\tcustom section\n1\ttype section\n2\timport section\n3\tfunction section\n4\ttable section\n5\tmemory section\n6\tglobal section\n7\texport section\n8\tstart section\n9\telement section\n10\tcode section\n11\tdata section\n*/\n// https://webassembly.github.io/spec/core/binary/modules.html#sections\nexports.SECTION = {\n    TYPE: 1,\n    IMPORT: 2,\n    FUNC: 3,\n    MEMORY: 5,\n    GLOBAL: 6,\n    EXPORT: 7,\n    CODE: 10,\n};\nexports.EXPORT_TYPE = {\n    FUNC: 0x00,\n    TABLE: 0x01,\n    MEMORY: 0x02,\n    GLOBAL: 0x03,\n};\nexports.op = {\n    /*\n     * Control Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#control-instructions\n     */\n    // unreachable: 0x00,\n    // nop: 0x01,\n    block: (blockType) => [0x02, blockType],\n    loop: (blockType) => [0x03, blockType],\n    if: (retType) => [0x04, retType],\n    else: 0x05,\n    end: 0x0b,\n    // br: (i: number) => [0x0c, ...signedLEB128(i)],\n    br_if: (i) => [0x0d, ...unsignedLEB128(i)],\n    // br_table: 0x0d,\n    // return: 0x0f,\n    call: (i) => [0x10, ...unsignedLEB128(i)],\n    // call_indirect: 0x11,\n    /*\n     * Parametric Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#parametric-instructions\n     */\n    drop: 0x1a,\n    select: 0x1b,\n    /*\n     * Variable Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#variable-instructions\n     */\n    local_get: (i) => [0x20, ...unsignedLEB128(i)],\n    local_set: (i) => [0x21, ...unsignedLEB128(i)],\n    local_tee: (i) => [0x22, ...unsignedLEB128(i)],\n    global_get: (i) => [0x23, ...unsignedLEB128(i)],\n    global_set: (i) => [0x24, ...unsignedLEB128(i)],\n    /*\n     * Memory Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#memory-instructions\n     */\n    f64_load: (align, offset) => [\n        0x2b,\n        ...unsignedLEB128(align),\n        ...unsignedLEB128(offset),\n    ],\n    f64_store: (align, offset) => [\n        0x39,\n        ...unsignedLEB128(align),\n        ...unsignedLEB128(offset),\n    ],\n    /*\n     * Numeric Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#numeric-instructions\n     */\n    i32_const: (i) => [0x41, ...signedLEB128(i)],\n    // i64_const: 0x42,\n    // f32_const: 0x43,\n    f64_const: (i) => [0x44, ...encodef64(i)],\n    i32_eqz: 0x45,\n    // i32_eq: 0x46,\n    i32_ne: 0x47,\n    i32_lt_s: 0x48,\n    i32_lt_u: 0x49,\n    i32_gt_s: 0x4a,\n    // i32_gt_u: 0x4b,\n    i32_le_s: 0x4c,\n    i32_le_u: 0x4d,\n    i32_ge_s: 0x4e,\n    // i32_ge_u: 0x4f,\n    // [0x50...0x5a] i64\n    // [0x5b...0x60] f32\n    f64_eq: 0x61,\n    f64_ne: 0x62,\n    f64_lt: 0x63,\n    f64_gt: 0x64,\n    f64_le: 0x65,\n    f64_ge: 0x66,\n    // i32_clz: 0x67,\n    // i32_ctz: 0x68,\n    // i32_popcnt: 0x69,\n    i32_add: 0x6a,\n    i32_sub: 0x6b,\n    i32_mul: 0x6c,\n    // i32_div_s: 0x6d,\n    // i32_div_u: 0x6e,\n    i32_rem_s: 0x6f,\n    // i32_rem_u: 0x70,\n    i32_and: 0x71,\n    i32_or: 0x72,\n    // [0x73...0x78] More i32\n    // [0x79...0x8a] More i64\n    i64_rem_s: 0x81,\n    i64_and: 0x83,\n    i64_or: 0x84,\n    // [0x8b...0x98] More f32\n    f64_abs: 0x99,\n    f64_neg: 0x9a,\n    f64_ceil: 0x9b,\n    f64_floor: 0x9c,\n    // f64_trunc: 0x9d,\n    // f64_nearest: 0x9e,\n    f64_sqrt: 0x9f,\n    f64_add: 0xa0,\n    f64_sub: 0xa1,\n    f64_mul: 0xa2,\n    f64_div: 0xa3,\n    f64_min: 0xa4,\n    f64_max: 0xa5,\n    // f64_copysign: 0xa6,\n    i32_trunc_f64_s: 0xaa,\n    i32_trunc_f64_u: 0xab,\n    i64_trunc_s_f64: 0xb0,\n    f64_convert_i64_s: 0xb9,\n    f64_convert_i32_s: 0xb7,\n};\n// https://webassembly.github.io/spec/core/binary/instructions.html#binary-blocktype\nexports.VAL_TYPE = {\n    i32: 0x7f,\n    i64: 0x7e,\n    f32: 0x7d,\n    f64: 0x7c,\n};\nexports.MUTABILITY = {\n    const: 0x00,\n    var: 0x01,\n};\nexports.BLOCK = {\n    void: 0x40,\n    i32: 0x7f,\n    i64: 0x7e,\n    f32: 0x7d,\n    f64: 0x7c,\n};\n// http://webassembly.github.io/spec/core/binary/types.html#function-types\nexports.FUNCTION_TYPE = 0x60;\n// I think these might actually be specific to importdesc\nexports.MEMORY_IDX = 0x02;\nexports.GLOBAL_TYPE = 0x03;\nexports.TYPE_IDX = 0x00;\n// Takes an f64 on the stack and leaves an int32 boolean representing if it's\n// within epsilon of zero.\nexports.IS_ZEROISH = [\n    exports.op.f64_abs,\n    ...exports.op.f64_const(exports.EPSILON),\n    exports.op.f64_lt,\n];\nexports.IS_NOT_ZEROISH = [\n    exports.op.f64_abs,\n    ...exports.op.f64_const(exports.EPSILON),\n    exports.op.f64_gt,\n];\n// f64\nfunction encodef64(num) {\n    const arr = new Uint8Array(8);\n    ieee754.write(arr, num);\n    return arr;\n}\nexports.encodef64 = encodef64;\nexports.encodeString = (str) => [str.length].concat(str.split(\"\").map(s => s.charCodeAt(0)));\nfunction unsignedLEB128(n) {\n    const buffer = [];\n    do {\n        let byte = n & 0x7f;\n        n >>>= 7;\n        if (n !== 0) {\n            byte |= 0x80;\n        }\n        buffer.push(byte);\n    } while (n !== 0);\n    return buffer;\n}\nexports.unsignedLEB128 = unsignedLEB128;\n// https://github.com/shmishtopher/wasm-LEB128/blob/2f1039636e758293e571f996e8012c4d69f4b58f/lib/index.js#L6\nfunction signedLEB128(value) {\n    let bytes = [];\n    let byte = 0x00;\n    let size = Math.ceil(Math.log2(Math.abs(value)));\n    let negative = value < 0;\n    let more = true;\n    while (more) {\n        byte = value & 127;\n        value = value >> 7;\n        if (negative) {\n            value = value | -(1 << (size - 7));\n        }\n        if ((value == 0 && (byte & 0x40) == 0) ||\n            (value == -1 && (byte & 0x40) == 0x40)) {\n            more = false;\n        }\n        else {\n            byte = byte | 128;\n        }\n        bytes.push(byte);\n    }\n    return bytes;\n}\nexports.signedLEB128 = signedLEB128;\n// https://webassembly.github.io/spec/core/binary/conventions.html#binary-vec\n// Vectors are encoded with their length followed by their element sequence\nexports.encodeFlatVector = (data) => unsignedLEB128(data.length).concat(data);\nexports.encodeNestedVector = (data) => unsignedLEB128(data.length).concat(utils_1.flatten(data));\n// subSections is an array of arrays\nfunction encodeSection(type, subSections) {\n    // Sections are all optional, so if we get an empty vector of subSections, we\n    // can omit the whole section.\n    if (subSections.length === 0) {\n        return [];\n    }\n    // The size of this vector is not needed for decoding, but can be\n    // used to skip sections when navigating through a binary.\n    // TODO: Remove this assertion once we are more confident in our output.\n    const vec = exports.encodeFlatVector(exports.encodeNestedVector(subSections));\n    vec.unshift(type);\n    return vec;\n}\nexports.encodeSection = encodeSection;\n//# sourceMappingURL=encoding.js.map","// This module is in charge of selecting either the pre-built module or the one\n// that builds it a runtime with jison.\nlet parserImpl = require(\"../build/parser\");\n/*\nlet parserImpl = null;\n// Always use the dynamic one, while we figure out why the built one doens't work.\nif (process.env.NODE_ENV === \"production\") {\n  parserImpl = require(\"../build/parser\");\n} else {\n  parserImpl = require(\"../tools/buildParser\");\n}\n*/\nmodule.exports = { parse: parserImpl.parse };\n//# sourceMappingURL=envParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\n/* Build up a string showing a formatted source location in context with line numbers.\n *\n *   2 | z = sqr(y, 10);\n * > 3 | x = wat();\n *     |     ^^^\n *   4 | y = 100;\n */\nfunction printLoc(loc, rawSource, contextLines = 1) {\n    const firstIndex = Math.max(loc.first_line - 1 - contextLines, 0);\n    const lastIndex = loc.last_line + contextLines;\n    const sourceLines = rawSource.split(\"\\n\").slice(firstIndex, lastIndex);\n    const annotatedLines = sourceLines.map((line, i) => {\n        const lineNumber = i + firstIndex + 1;\n        const inRange = lineNumber >= loc.first_line && lineNumber <= loc.last_line;\n        const gutter = inRange ? \">\" : \" \";\n        return `${gutter} ${lineNumber} | ${line}`;\n    });\n    if (loc.first_line === loc.last_line) {\n        const padding = utils_1.repeat(loc.first_column, \" \");\n        const underline = utils_1.repeat(loc.last_column - loc.first_column, \"^\");\n        const insertIndex = loc.first_line - firstIndex;\n        annotatedLines.splice(insertIndex, 0, `    | ${padding}${underline}`);\n    }\n    return annotatedLines.join(\"\\n\");\n}\nexports.printLoc = printLoc;\nclass CompilerError extends Error {\n    constructor(message, loc, rawSource) {\n        super(message);\n        // TODO: Create an error message that encourages users to open an issue at\n        // https://github.com/captbaritone/eel-wasm/issues is they see this, and gives\n        // Them an easy way to attach the right context.\n        this.sourceContext = printLoc(loc, rawSource);\n        this.loc = loc;\n    }\n}\nclass UserError extends CompilerError {\n}\nfunction createUserError(message, loc, rawSource) {\n    return new UserError(message, loc, rawSource);\n}\nexports.createUserError = createUserError;\nfunction createCompilerError(message, loc, rawSource) {\n    return new CompilerError(message, loc, rawSource);\n}\nexports.createCompilerError = createCompilerError;\n//# sourceMappingURL=errorUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copied from https://github.com/feross/ieee754/blob/master/index.js\nfunction write(buffer, value) {\n    // Originally these four were arguments, but we only ever use it like this.\n    const offset = 0;\n    const isLE = true;\n    let mLen = 52;\n    const nBytes = 8;\n    var e, m, c;\n    var eLen = nBytes * 8 - mLen - 1;\n    var eMax = (1 << eLen) - 1;\n    var eBias = eMax >> 1;\n    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n    var i = isLE ? 0 : nBytes - 1;\n    var d = isLE ? 1 : -1;\n    var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n    value = Math.abs(value);\n    if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n    }\n    else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n        if (value * (c = Math.pow(2, -e)) < 1) {\n            e--;\n            c *= 2;\n        }\n        if (e + eBias >= 1) {\n            value += rt / c;\n        }\n        else {\n            value += rt * Math.pow(2, 1 - eBias);\n        }\n        if (value * c >= 2) {\n            e++;\n            c /= 2;\n        }\n        if (e + eBias >= eMax) {\n            m = 0;\n            e = eMax;\n        }\n        else if (e + eBias >= 1) {\n            m = (value * c - 1) * Math.pow(2, mLen);\n            e = e + eBias;\n        }\n        else {\n            m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n            e = 0;\n        }\n    }\n    for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) { }\n    e = (e << mLen) | m;\n    eLen += mLen;\n    for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) { }\n    buffer[offset + i - d] |= s * 128;\n}\nexports.write = write;\n//# sourceMappingURL=ieee754.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst parser_1 = require(\"./parser\");\nexports.parse = parser_1.parse;\nconst compiler_1 = require(\"./compiler\");\nexports.compileModule = compiler_1.compileModule;\nconst shims_1 = __importDefault(require(\"./shims\"));\nexports.shims = shims_1.default;\nconst loader_1 = require(\"./loader\");\nexports.loadModule = loader_1.loadModule;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst shims_1 = __importDefault(require(\"./shims\"));\nconst compiler_1 = require(\"./compiler\");\nasync function loadModule({ pools, functions, eelVersion = 2, }) {\n    let compilerPools = {};\n    Object.entries(pools).forEach(([key, globals]) => {\n        compilerPools[key] = new Set(Object.keys(globals));\n    });\n    const buffer = compiler_1.compileModule({\n        pools: compilerPools,\n        functions,\n        eelVersion,\n    });\n    const mod = await WebAssembly.compile(buffer);\n    var importObject = Object.assign(Object.assign({}, pools), { shims: shims_1.default });\n    return await WebAssembly.instantiate(mod, importObject);\n}\nexports.loadModule = loadModule;\n//# sourceMappingURL=loader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preProcessor_1 = require(\"./preProcessor\");\nconst envParser_1 = require(\"./envParser\");\nconst astUtils_1 = require(\"./astUtils\");\nconst errorUtils_1 = require(\"./errorUtils\");\nfunction mapLoc(loc, mapper) {\n    const first = preProcessor_1.getLoc(mapper, loc.first_column);\n    const last = preProcessor_1.getLoc(mapper, loc.last_column);\n    return {\n        first_column: first.column,\n        last_column: last.column,\n        first_line: first.line,\n        last_line: last.line,\n    };\n}\nfunction parse(code) {\n    const [processedCode, mapper] = preProcessor_1.preProcess(code);\n    try {\n        const ast = envParser_1.parse(processedCode);\n        return astUtils_1.mapAst(ast, (node) => {\n            if (node.loc.first_line !== 1 || node.loc.last_line != 1) {\n                throw errorUtils_1.createCompilerError(\"Unexpected multiline\", node.loc, code);\n            }\n            return Object.assign(Object.assign({}, node), { loc: mapLoc(node.loc, mapper) });\n        });\n    }\n    catch (e) {\n        if (e.hash == null) {\n            throw e;\n        }\n        throw errorUtils_1.createUserError(`Parse Error: ${e.message.split(\"\\n\")[3]}`, mapLoc(e.hash.loc, mapper), code);\n    }\n}\nexports.parse = parse;\n//# sourceMappingURL=parser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getLoc(mapper, destCol) {\n    let previousAnchor = { destCol: 1, srcCol: 1, srcLine: 1 };\n    // Find the last anchor with a destCol > destCol.\n    // Reversed: Find the first anchor with a destCol <= destCol\n    // TODO: Use binary search\n    mapper.forEach(anchor => {\n        if (anchor.destCol > destCol) {\n            return;\n        }\n        previousAnchor = anchor;\n    });\n    const remainingColumns = destCol - previousAnchor.destCol;\n    return {\n        column: previousAnchor.srcCol + remainingColumns,\n        line: previousAnchor.srcLine,\n    };\n}\nexports.getLoc = getLoc;\n// Started with this function: https://github.com/WACUP/vis_milk2/blob/cc2e85aed44373d0b6b2115c0806ec035856860a/vis_milk2/state.cpp#L1532-L1557\nfunction preProcess(src) {\n    const mapper = [];\n    let srcLine = 1;\n    let dest = \"\";\n    let lineStart = 0;\n    let inlineComment = false;\n    let blockComment = false;\n    let emitAnchor = false;\n    for (let i = 0; i < src.length; i++) {\n        const char = src[i];\n        if (emitAnchor) {\n            const destCol = dest.length + 1;\n            const srcCol = i - lineStart + 1;\n            mapper.push({ destCol, srcCol, srcLine });\n            emitAnchor = false;\n        }\n        if (char === \"\\n\") {\n            inlineComment = false;\n            srcLine++;\n            lineStart = i + 1;\n            emitAnchor = true;\n        }\n        else if (char === \"\\r\" && src[i + 1] === \"\\n\") {\n            i++;\n            inlineComment = false;\n            srcLine++;\n            lineStart = i + 1;\n            emitAnchor = true;\n        }\n        else if (blockComment && char === \"*\" && src[i + 1] === \"/\") {\n            // TODO: What if we are not currently in a block comment?\n            blockComment = false;\n            i++;\n            emitAnchor = true;\n        }\n        else if ((char === \"\\\\\" && src[i + 1] === \"\\\\\") ||\n            (char === \"/\" && src[i + 1] === \"/\")) {\n            inlineComment = true;\n            i++;\n        }\n        else if (char === \"/\" && src[i + 1] === \"*\") {\n            blockComment = true;\n            i++;\n        }\n        else if (!inlineComment && !blockComment) {\n            dest += char;\n        }\n    }\n    return [dest, mapper];\n}\nexports.preProcess = preProcess;\n//# sourceMappingURL=preProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EPSILON = 0.00001;\nconst shims = {\n    // TODO: Reimplement some of these functions natively in Wasm?\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    atan2: Math.atan2,\n    rand: a => Math.random() * a,\n    pow: Math.pow,\n    log: Math.log,\n    log10: Math.log10,\n    exp: Math.exp,\n    sigmoid: function (x, y) {\n        const t = 1 + Math.exp(-x * y);\n        return Math.abs(t) > EPSILON ? 1.0 / t : 0;\n    },\n};\nexports.default = shims;\n//# sourceMappingURL=shims.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction arrayJoin(arr, joiner) {\n    const newArr = [];\n    for (let i = 0; i < arr.length; i++) {\n        newArr.push(arr[i]);\n        const last = i === arr.length - 1;\n        if (!last) {\n            newArr.push(joiner);\n        }\n    }\n    return newArr;\n}\nexports.arrayJoin = arrayJoin;\nfunction flatten(arr) {\n    return [].concat.apply([], arr);\n}\nexports.flatten = flatten;\nfunction times(n, cb) {\n    return new Array(n).fill(null).map((_, i) => cb(i));\n}\nexports.times = times;\nfunction repeat(n, char) {\n    return new Array(n).fill(char).join(\"\");\n}\nexports.repeat = repeat;\n// Maintain an ordered list of indexes for namespace/key pairs.\n// In Wasm binary variables are referenced by their index. In our emitter we\n// want to emit variables indexes as we encounter their names. This data\n// structure lets us issue variable indexes on demmand and then iterate through\n// them post facto.\n//\n// `null` may be passed for the namespace argument in order to get a global\n// variable that exists in all namespaces.\nclass ScopedIdMap {\n    constructor() {\n        this._map = new Map();\n    }\n    // Get the index of a given namespace/key pair\n    get(namespace, key) {\n        const jointKey = namespace == null ? key : `${namespace}::${key}`;\n        if (!this._map.has(jointKey)) {\n            this._map.set(jointKey, this._map.size);\n        }\n        // @ts-ignore We know the key is here.\n        return this._map.get(jointKey);\n    }\n    size() {\n        return this._map.size;\n    }\n}\nexports.ScopedIdMap = ScopedIdMap;\nfunction formatList(list) {\n    if (list.length === 0) {\n        throw new Error(\"Cannot format an empty list\");\n    }\n    if (list.length === 1) {\n        return list[0];\n    }\n    const quoted = list.map(name => `\"${name}\"`);\n    const last = quoted.pop();\n    return quoted.join(\", \") + ` and ${last}`;\n}\nexports.formatList = formatList;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst encoding_1 = require(\"./encoding\");\nconst constants_1 = require(\"./constants\");\nexports.localFuncMap = {\n    sqr: {\n        args: [encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: [...encoding_1.op.local_get(0), ...encoding_1.op.local_get(0), encoding_1.op.f64_mul],\n    },\n    bor: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: [\n            ...encoding_1.op.local_get(0),\n            ...encoding_1.IS_NOT_ZEROISH,\n            ...encoding_1.op.local_get(1),\n            ...encoding_1.IS_NOT_ZEROISH,\n            encoding_1.op.i32_or,\n            ...encoding_1.op.i32_const(0),\n            encoding_1.op.i32_ne,\n            encoding_1.op.f64_convert_i32_s,\n        ],\n    },\n    band: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: [\n            ...encoding_1.op.local_get(0),\n            ...encoding_1.IS_NOT_ZEROISH,\n            ...encoding_1.op.local_get(1),\n            ...encoding_1.IS_NOT_ZEROISH,\n            encoding_1.op.i32_and,\n            ...encoding_1.op.i32_const(0),\n            encoding_1.op.i32_ne,\n            encoding_1.op.f64_convert_i32_s,\n        ],\n    },\n    sign: {\n        args: [encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: [\n            ...encoding_1.op.f64_const(0),\n            ...encoding_1.op.local_get(0),\n            encoding_1.op.f64_lt,\n            ...encoding_1.op.local_get(0),\n            ...encoding_1.op.f64_const(0),\n            encoding_1.op.f64_lt,\n            encoding_1.op.i32_sub,\n            encoding_1.op.f64_convert_i32_s,\n        ],\n    },\n    mod: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        localVariables: [encoding_1.VAL_TYPE.i32],\n        // TODO: Simplify all this type coersion\n        binary: [\n            ...encoding_1.op.local_get(1),\n            encoding_1.op.i32_trunc_f64_s,\n            ...encoding_1.op.local_tee(2),\n            ...encoding_1.op.i32_const(0),\n            encoding_1.op.i32_ne,\n            ...encoding_1.op.if(encoding_1.BLOCK.f64),\n            ...encoding_1.op.local_get(0),\n            encoding_1.op.i32_trunc_f64_s,\n            ...encoding_1.op.local_get(2),\n            encoding_1.op.i32_rem_s,\n            encoding_1.op.f64_convert_i32_s,\n            encoding_1.op.else,\n            ...encoding_1.op.f64_const(0),\n            encoding_1.op.end,\n        ],\n    },\n    bitwiseOr: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: [\n            ...encoding_1.op.local_get(0),\n            encoding_1.op.i64_trunc_s_f64,\n            ...encoding_1.op.local_get(1),\n            encoding_1.op.i64_trunc_s_f64,\n            encoding_1.op.i64_or,\n            encoding_1.op.f64_convert_i64_s,\n        ],\n    },\n    bitwiseAnd: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: [\n            ...encoding_1.op.local_get(0),\n            encoding_1.op.i64_trunc_s_f64,\n            ...encoding_1.op.local_get(1),\n            encoding_1.op.i64_trunc_s_f64,\n            encoding_1.op.i64_and,\n            encoding_1.op.f64_convert_i64_s,\n        ],\n    },\n    div: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        localVariables: [encoding_1.VAL_TYPE.i32],\n        binary: [\n            ...encoding_1.op.local_get(1),\n            ...encoding_1.op.f64_const(0),\n            encoding_1.op.f64_ne,\n            ...encoding_1.op.if(encoding_1.BLOCK.f64),\n            ...encoding_1.op.local_get(0),\n            ...encoding_1.op.local_get(1),\n            encoding_1.op.f64_div,\n            encoding_1.op.else,\n            ...encoding_1.op.f64_const(0),\n            encoding_1.op.end,\n        ],\n    },\n    // Takes a float buffer index and converts it to an int. Values out of range\n    // are returned as `-1`.\n    //\n    // NOTE: There's actually a subtle bug that exists in Milkdrop's Eel\n    // implementation, which we reproduce here.\n    //\n    // Wasm's `trunc()` rounds towards zero. This means that for index `-1` we\n    // will return zero, since: `roundTowardZero(-1 + EPSILON) == 0`\n    //\n    // A subsequent check handles negative indexes, so negative indexes > than\n    // `-1` are not affected.\n    _getBufferIndex: {\n        args: [encoding_1.VAL_TYPE.f64 /* 0: $index */],\n        returns: [encoding_1.VAL_TYPE.i32 /* $noramlizedIndex */],\n        localVariables: [\n            encoding_1.VAL_TYPE.f64,\n            encoding_1.VAL_TYPE.i32,\n        ],\n        binary: [\n            ...encoding_1.op.f64_const(encoding_1.EPSILON),\n            ...encoding_1.op.local_get(0),\n            encoding_1.op.f64_add,\n            // STACK: [$i + EPSILON]\n            ...encoding_1.op.local_tee(1),\n            encoding_1.op.i32_trunc_f64_s,\n            // TODO We could probably make this a tee and get rid of the next get if we swap the final condition\n            ...encoding_1.op.local_set(2),\n            // STACK: []\n            ...encoding_1.op.i32_const(-1),\n            ...encoding_1.op.local_get(2),\n            // STACK: [-1, $truncated]\n            ...encoding_1.op.i32_const(8),\n            encoding_1.op.i32_mul,\n            // STACK: [-1, $truncated * 8]\n            ...encoding_1.op.local_get(2),\n            ...encoding_1.op.i32_const(0),\n            // STACK: [-1, $truncated * 8, $truncated, 0]\n            encoding_1.op.i32_lt_s,\n            // STACK: [-1, $truncated * 8, <is index less than 0>]\n            ...encoding_1.op.local_get(2),\n            ...encoding_1.op.i32_const(constants_1.BUFFER_SIZE - 1),\n            encoding_1.op.i32_gt_s,\n            // STACK: [-1, $truncated * 8, <is index less than 0>, <is index more than MAX>]\n            encoding_1.op.i32_or,\n            // STACK: [-1, $truncated * 8, <is index out of range>]\n            encoding_1.op.select,\n        ],\n    },\n};\n//# sourceMappingURL=wasmFunctions.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(__webpack_require__.s = 55);\n"],"names":["root","factory","exports","module","define","amd","self","baseVals","gammaadj","wave_g","mv_x","warpscale","brighten","mv_y","wave_scale","echo_alpha","additivewave","sx","sy","warp","red_blue","wave_mode","wave_brighten","wrap","zoomexp","fshader","wave_r","echo_zoom","wave_smoothing","warpanimspeed","wave_dots","wave_x","wave_y","zoom","solarize","modwavealphabyvolume","dx","cx","dy","darken_center","cy","invert","bmotionvectorson","rot","modwavealphaend","wave_mystery","decay","wave_a","wave_b","rating","modwavealphastart","darken","echo_orient","ib_r","ib_g","ib_b","ib_a","ib_size","ob_r","ob_g","ob_b","ob_a","ob_size","mv_dx","mv_dy","mv_a","mv_r","mv_g","mv_b","mv_l","init_eqs","frame_eqs","m","rkeys","treb_att","bass_att","pixel_eqs","rad","waves","a","enabled","b","g","scaling","samples","additive","usedots","spectrum","r","smoothing","thick","sep","point_eqs","shapes","r2","tex_ang","thickoutline","textured","g2","tex_zoom","border_a","border_b","b2","a2","border_g","x","y","ang","sides","border_r","comp","ID_OFFSET","SIZE_OFFSET","ARRAYBUFFER_ID","STRING_ID","ARRAYBUFFERVIEW","ARRAY","STATICARRAY","VAL_ALIGN_OFFSET","VAL_SIGNED","VAL_FLOAT","VAL_MANAGED","ARRAYBUFFERVIEW_BUFFER_OFFSET","ARRAYBUFFERVIEW_DATASTART_OFFSET","ARRAYBUFFERVIEW_DATALENGTH_OFFSET","ARRAYBUFFERVIEW_SIZE","ARRAY_LENGTH_OFFSET","ARRAY_SIZE","BIGINT","BigUint64Array","THIS","Symbol","STRING_DECODE_THRESHOLD","decoder","TextDecoder","getStringImpl","buffer","ptr","len","Uint32Array","arr","Uint16Array","String","fromCharCode","apply","decode","preInstantiate","imports","extendedExports","getString","memory","env","abort","msg","file","line","colm","Error","trace","n","args","console","log","slice","join","seed","Date","now","Math","postInstantiate","instance","table","__new","__retain","__rtti_base","getArrayInfo","id","info","U32","getInfo","getBase","getValueAlign","clz32","getView","alignLog2","signed","float","Float32Array","Float64Array","Int8Array","Uint8Array","Int16Array","Int32Array","BigInt64Array","__getArrayView","align","buf","length","subarray","getTypedArray","Type","getTypedArrayView","bufPtr","attachTypedArrayFunctions","ctor","name","bind","__newString","str","U16","i","p","charCodeAt","__getString","__newArray","values","result","view","set","__getArray","input","out","Array","__getArrayBuffer","Uint8ClampedArray","forEach","BYTES_PER_ELEMENT","__instanceof","baseId","demangle","isResponse","src","Response","isModule","WebAssembly","Module","async","instantiate","source","instantiateStreaming","compile","extended","arrayBuffer","setArgumentsLength","value","internalName","Object","prototype","hasOwnProperty","call","elem","parts","split","curr","part","shift","hash","indexOf","className","substring","classElem","constructor","valueOf","this","thisValue","create","writable","getOwnPropertyNames","defineProperty","getOwnPropertyDescriptor","test","getter","replace","setter","get","enumerable","original","instantiateSync","Instance","FFT","samplesIn","samplesOut","equalize","arguments","undefined","NFREQ","initEqualizeTable","initBitRevTable","initCosSinTable","equalizeArr","invHalfNFREQ","bitrevtable","j","temp","dftsize","tabsize","cossintable","theta","PI","cos","sin","timeToFrequencyDomain","waveDataIn","real","imag","idx","t","wpr","wpi","wr","wi","hdftsize","tempr","tempi","wtemp","spectralDataOut","sqrt","AudioProcessor","context","numSamps","fftSize","fft","audioContext","audible","createDelay","analyser","createAnalyser","smoothingTimeConstant","connect","analyserL","analyserR","splitter","createChannelSplitter","timeByteArray","timeByteArrayL","timeByteArrayR","timeArray","timeByteArraySignedL","timeByteArraySignedR","tempTimeArrayL","tempTimeArrayR","timeArrayL","timeArrayR","sampleAudio","getByteTimeDomainData","processAudio","updateAudio","lastIdx","freqArray","freqArrayL","freqArrayR","connectAudio","audionode","disconnectAudio","disconnect","AudioLevels","audio","sampleRate","bucketHz","bassLow","clamp","round","bassHigh","midHigh","trebHigh","starts","stops","val","imm","att","avg","longAvg","fill","bass","mid","mid_att","treb","isFiniteNumber","num","Number","isFinite","isNaN","adjustRateToFPS","rate","baseFPS","FPS","updateAudioLevels","fps","frame","effectiveFPS","Utils","atan2","cloneVars","vars","assign","range","start","end","keys","from","_","pick","obj","newObj","key","omit","setWasm","wasmGlobals","pickWasm","PresetEquationRunner","preset","globalVars","opts","texsizeX","texsizeY","mesh_width","mesh_height","aspectx","aspecty","invAspectx","invAspecty","qs","map","ts","regs","initializeEquations","runVertEQs","mdVSQInit","mdVSRegs","mdVSFrame","mdVSUserKeys","mdVSFrameMap","mdVSShapes","mdVSUserKeysShapes","mdVSFrameMapShapes","mdVSWaves","mdVSUserKeysWaves","mdVSFrameMapWaves","mdVSQAfterFrame","gmegabuf","mdVSBase","time","meshx","meshy","pixelsx","pixelsy","mdVS","megabuf","rand_start","random","rand_preset","nonUserKeys","concat","mdVSAfterInit","initUserVars","mdVSTWaveInits","wave","mdVSWave","nonUserWaveKeys","push","mdVSTShapeInits","shape","mdVSShape","nonUserShapeKeys","updatePreset","updateGlobals","runFrameEquations","runPixelEquations","mdVSVertex","runShapeFrameEquations","shapeIdx","runWaveFrameEquations","waveIdx","runWavePointEquations","mdVSWaveFrame","PresetEquationRunnerWASM","globalKeys","frameKeys","waveFrameKeys","waveFrameInputKeys","getQVars","pool","globalPools","getTVars","perFrame","save_qs","lineMatcher","samplerMatcher","ShaderUtils","getShaderParts","sbIndex","beforeShaderBody","afterShaderBody","firstCurly","lastCurly","lastIndexOf","getFragmentFloatPrecision","gl","getShaderPrecisionFormat","FRAGMENT_SHADER","HIGH_FLOAT","precision","MEDIUM_FLOAT","getUserSamplers","text","samplers","lineMatches","match","samplerMatches","sampler","WaveUtils","smoothWave","positions","positionsSmoothed","nVertsIn","zCoord","iAbove","iBelow","iAbove2","min","k","smoothWaveAndColor","colors","colorsSmoothed","BasicWaveform","numAudioSamples","positions2","oldPositions","oldPositions2","smoothedPositions","smoothedPositions2","color","floatPrecision","createShader","vertexBuf","createBuffer","shaderProgram","createProgram","vertShader","VERTEX_SHADER","shaderSource","trim","compileShader","fragShader","attachShader","linkProgram","aPosLoc","getAttribLocation","colorLoc","getUniformLocation","thickOffsetLoc","processWaveform","waveform","scale","smooth","smooth2","generateWaveform","blending","blendProgress","alpha","vol","waveL","waveR","newWaveMode","floor","oldWaveMode","old_wave_mode","wavePosX","wavePosY","numVert","oldNumVert","its","it","waveMode","fWaveParam2","abs","alphaDiff","numVertInv","sampleOffset","mix","w1","w2","cosRot","sinRot","ioff","x0","y0","edgex","edgey","bClip","dxi","dyi","ang2","perpDx","perpDy","sample","oldAlpha","mix2","maxc","max","fIdx","nIdx","halfNumVert","smoothedNumVert","drawBasicWaveform","useProgram","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniform4fv","instances","wave_thick","blendFunc","SRC_ALPHA","ONE","ONE_MINUS_SRC_ALPHA","drawMode","POINTS","LINE_STRIP","offset","uniform2fv","drawArrays","CustomWaveform","index","pointsData","maxSamples","smoothedColors","positionVertexBuf","colorVertexBuf","aPosLocation","aColorLocation","sizeLoc","presetEquationRunner","waveEqs","alphaMult","useWASM","frameR","frameG","frameB","frameA","waveScale","useSpectrum","pointsLeft","pointsRight","j0","j1","mix1","left","right","varPool","value1","value2","mdvsUserKeysWave","mdVSNewFrameMapWave","drawCustomWaveform","waveUseDots","waveThick","waveAdditive","numVerts","uniform1f","CustomShape","uvs","borderPositions","uvVertexBuf","borderPositionVertexBuf","createBorderShader","mainSampler","createSampler","samplerParameteri","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","aUvLocation","texturedLoc","textureLoc","borderShaderProgram","aBorderPosLoc","uBorderColorLoc","drawCustomShape","shapeEqs","prevTexture","setupShapeBuffers","restore_qs","save_ts","frame_eqs_save","numInst","num_inst","frame_eqs_restore","restore_ts","borderR","borderG","borderB","borderA","borderColor","texZoom","texAng","hasBorder","isTextured","isBorderThick","isAdditive","quarterPi","pTwoPi","angSum","texAngSum","drawCustomShapeInstance","frame_eqs_str","mdVSShapeFrame","mdVSUserKeysShape","mdVSNewFrameMapShape","DYNAMIC_DRAW","wrapping","CLAMP_TO_EDGE","bufferSubData","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","bindSampler","uniform1i","TRIANGLE_FAN","Border","addTriangle","point1","point2","point3","generateBorder","borderSize","prevBorderSize","width","height","widthHalf","heightHalf","prevBorderWidth","borderWidth","prevBorderWidthWidth","prevBorderWidthHeight","borderWidthWidth","borderWidthHeight","point4","drawBorder","TRIANGLES","generatePositions","drawDarkenCenter","MotionVectors","maxX","maxY","getMotionDir","warpUVs","fx","fy","x1","y1","gridX1","fx2","fy2","generateMotionVectors","mvA","nX","nY","dx2","dy2","lenMult","minLen","numVecVerts","fx2arr","fdist","vx1","vy1","vx2","vy2","drawMotionVectors","lineWidth","LINES","WarpShader","noise","image","buildPositions","indexBuf","warpUvVertexBuf","warpColorVertexBuf","mainSamplerFW","mainSamplerFC","mainSamplerPW","mainSamplerPC","NEAREST_MIPMAP_NEAREST","NEAREST","gridX","gridY","gridY1","segmentWidth","segmentHeight","vertices","iy","ix","indices","c","d","fragShaderText","fragShaderHeaderText","shaderText","shaderParts","userTextures","positionLocation","warpUvLocation","warpColorLocation","textureFWLoc","textureFCLoc","texturePWLoc","texturePCLoc","blurTexture1Loc","blurTexture2Loc","blurTexture3Loc","noiseLQLoc","noiseMQLoc","noiseHQLoc","noiseLQLiteLoc","noisePointLQLoc","noiseVolLQLoc","noiseVolHQLoc","decayLoc","texsizeLoc","texsizeNoiseLQLoc","texsizeNoiseMQLoc","texsizeNoiseHQLoc","texsizeNoiseLQLiteLoc","texsizeNoiseVolLQLoc","texsizeNoiseVolHQLoc","resolutionLoc","aspectLoc","bassLoc","midLoc","trebLoc","volLoc","bassAttLoc","midAttLoc","trebAttLoc","volAttLoc","timeLoc","frameLoc","fpsLoc","blur1MinLoc","blur1MaxLoc","blur2MinLoc","blur2MaxLoc","blur3MinLoc","blur3MaxLoc","scale1Loc","scale2Loc","scale3Loc","bias1Loc","bias2Loc","bias3Loc","randPresetLoc","randFrameLoc","qaLoc","qbLoc","qcLoc","qdLoc","qeLoc","qfLoc","qgLoc","qhLoc","slowRoamCosLoc","roamCosLoc","slowRoamSinLoc","roamSinLoc","userTexture","updateShader","bindBlurVals","blurMins","blurMaxs","blurMin1","blurMin2","blurMin3","blurMax1","blurMax2","blurMax3","scale1","bias1","scale2","bias2","scale3","bias3","renderQuadTexture","texture","blurTexture1","blurTexture2","blurTexture3","mdVSQs","warpColor","ELEMENT_ARRAY_BUFFER","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","noiseTexLQ","TEXTURE9","noiseTexMQ","TEXTURE10","noiseTexHQ","TEXTURE11","noiseTexLQLite","TEXTURE12","noiseTexPointLQ","TEXTURE13","TEXTURE_3D","noiseTexVolLQ","TEXTURE14","noiseTexVolHQ","TEXTURE15","getTexture","q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15","q16","q17","q18","q19","q20","q21","q22","q23","q24","q25","q26","q27","q28","q29","q30","q31","q32","disable","BLEND","drawElements","UNSIGNED_SHORT","enable","CompShader","compWidth","compHeight","compColorVertexBuf","compColorLocation","gammaAdjLoc","echoZoomLoc","echoAlphaLoc","echoOrientationLoc","invertLoc","brightenLoc","darkenLoc","solarizeLoc","fShaderLoc","generateHueBase","hueBase","maxshade","generateCompColors","compColor","offsetColor","col","nx","ny","compColors","OutputShader","textureRatio","useFXAA","createFXAAShader","deleteProgram","TRIANGLE_STRIP","ResampleShader","generateMipmap","BlurVertical","blurLevel","w","w1V","w2V","d1V","d2V","wds","wDiv","texsizeLocation","ed1Loc","ed2Loc","ed3Loc","wdsLocation","wdivLoc","srcTexsize","b1ed","BlurHorizontal","w1H","w2H","w3H","w4H","d1H","d2H","d3H","d4H","ws","ds","scaleLoc","biasLoc","wsLoc","dsLocation","getScaleAndBias","bias","tempMin","tempMax","BlurShader","blurRatios","anisoExt","getExtension","blurHorizontalFrameBuffer","createFramebuffer","blurVerticalFrameBuffer","blurHorizontalTexture","createTexture","blurVerticalTexture","setupFrameBufferTextures","blurHorizontal","blurVertical","getTextureSize","sizeRatio","sizeX","sizeY","srcBlurRatios","dstBlurRatios","srcTexsizeHorizontal","dstTexsizeHorizontal","bindFrameBufferTexture","srcTexsizeVertical","dstTexsizeVertical","horizontalTexsizes","verticalTexsizes","bindFrambufferAndSetViewport","fb","texsize","bindFramebuffer","FRAMEBUFFER","viewport","targetFrameBuffer","targetTexture","pixelStorei","UNPACK_ALIGNMENT","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","getParameter","MAX_TEXTURE_MAX_ANISOTROPY_EXT","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","framebufferTexture2D","COLOR_ATTACHMENT0","renderBlurTexture","Noise","nTexArrLQ","createNoiseTex","nTexArrLQLite","nTexArrMQ","nTexArrHQ","nTexArrVolLQ","createNoiseVolTex","nTexArrVolHQ","bindTexture3D","data","depth","texImage3D","TEXTURE_WRAP_R","fCubicInterpolate","y2","y3","t2","a0","dwCubicInterpolate","ret","f","noiseSize","nsize","texArr","texRange","halfTexRange","wordsPerSlice","wordsPerLine","z","baseX","baseY","baseZ","ImageTextures","empty","loadExtraImages","imageData","imageName","Image","onload","TitleText","textTexture","window","OffscreenCanvas","canvas","document","createElement","context2D","getContext","generateTitleTexture","clearRect","fontSize","font","titleText","textLength","measureText","percentToKeep","fillStyle","fillText","getImageData","UNPACK_FLIP_Y_WEBGL","uvLocation","textColorLoc","generateUvs","progress","flip","renderTitle","progressUvs","BlendPattern","vertInfoA","vertInfoC","createBlendPattern","resizeMatrixValues","oldMat","oldWidth","oldHeight","newWidth","newHeight","newMat","nVert","val00","val01","val10","val11","oldMeshWidth","oldMeshHeight","genPlasma","dt","midx","midy","t00","t01","t10","t11","mixType","vx","vy","band","invBand","minc","mult","dir","Renderer","frameNum","presetTime","lastTime","performance","timeHist","timeHistMax","blendStartTime","blendDuration","meshWidth","meshHeight","pixelRatio","devicePixelRatio","outputFXAA","audioLevels","prevFrameBuffer","compFrameBuffer","compTexture","params","warpShader","compShader","outputShader","prevWarpShader","prevCompShader","numBlurPasses","blurShader1","blurShader2","blurShader3","basicWaveform","customWaveforms","customShapes","prevCustomWaveforms","prevCustomShapes","darkenCenter","DarkenCenter","innerBorder","outerBorder","motionVectors","blendPattern","resampleShader","supertext","startTime","clearColor","blankPreset","prevPreset","prevPresetEquationRunner","regVars","createCanvas","getHighestBlur","loadPreset","blendTime","pixel_eqs_initialize_array","tmpWarpShader","tmpCompShader","warpText","compText","setRendererSize","oldTexsizeX","oldTexsizeY","targetTextureNew","renderToScreen","setInternalMeshSize","setOutputAA","useAA","calcTimeAndFPS","elapsedTime","elapsed","newTime","newHistTime","newFPS","damping","gridZ","gridZ1","warpTimeV","warpScaleInv","warpf0","warpf1","warpf2","warpf3","texelOffsetX","texelOffsetY","perVertex","pixel_eqs_wasm","newWarpUVs","pixel_eqs_get_array","iz","u","v","zoomExp","zoom2Inv","u2","v2","mixFrameEquations","mdVSFramePrev","snapPoint","mixedFrame","b1n","b2n","b3n","b1x","b2x","b3x","getBlurValues","fMinDist","render","prevGlobalVars","mdVSFrameMixed","prevMDVSFrame","swapTexture","swapFrameBuffer","clear","COLOR_BUFFER_BIT","blendEquation","FUNC_ADD","outerColor","innerColor","duration","launchSongTitleAnim","toDataURL","readPixels","createImageData","putImageData","deleteTexture","deleteFramebuffer","warpBufferToDataURL","Visualizer","vizWidth","vizHeight","reuseCanvas","internalCanvas","antialias","stencil","premultipliedAlpha","outputGl","baseValsDefaults","shapeBaseValsDefaults","waveBaseValsDefaults","globalPerFrameVars","globalPerPixelVars","globalShapeVars","shapeBaseVars","globalWaveVars","renderer","loseGLContext","loseContext","audioNode","overrideDefaultVars","combinedVals","createQVars","wasmVars","Global","mutable","createTVars","createPerFramePool","createPerPixelPool","createCustomShapePerFramePool","createCustomWavePerFramePool","makeShapeResetPool","variables","reduce","acc","variable","base64ToArrayBuffer","base64","binaryString","atob","bytes","presetMap","JSON","parse","stringify","forceJS","useJS","onlyUseWASM","loadWASMPreset","warn","loadJSPreset","qWasmVars","tWasmVars","wasmVarPools","wasmFunctions","presetInit","code","init_eqs_eel","frame_eqs_eel","pixel_eqs_eel","perPixel","point_eqs_eel","mod","loadModule","pools","functions","eelVersion","version","handleEmptyFunction","presetFunctionsMod","ascLoader","loadPresetFunctionsBuffer","pixelEqs","perPixelEqs","pixelVarPool","qVarPool","tVarPool","shapePool0","shapePool1","shapePool2","shapePool3","logi","logf","saveQs","restoreQs","saveTs","restoreTs","arrPtr","createFloat32Array","pixel_eqs_array","__getFloat32ArrayView","_len","_key","Function","init_eqs_str","pixel_eqs_str","point_eqs_str","setCanvas","renderOutput","drawImage","Butterchurn","createVisualizer","EPSILON","sqr","log10","LOG10E","sign","rand","xf","randint","bnot","pow","div","bitor","bitand","sigmoid","exp","bor","equal","above","below","ifcond","memcpy","dst","destOffset","srcOffset","copyLen","copyWithin","defineMath","assignment","configurable","f32A","inLow","inHigh","outLow","outHigh","NaN","Infinity","lower","upper","degrees","DEG_PER_RAD","radians","RAD_PER_DEG","parser","o","l","$V0","$V1","$V2","$V3","$V4","$V5","$V6","$V7","$V8","$V9","$Va","$Vb","$Vc","$Vd","$Ve","$Vf","$Vg","$Vh","$Vi","$Vj","$Vk","$Vl","$Vm","$Vn","$Vo","$Vp","$Vq","$Vr","$Vs","$Vt","yy","symbols_","terminals_","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","type","body","loc","$","toLowerCase","callee","operator","defaultActions","parseError","recoverable","error","stack","vstack","lstack","recovering","lexer","sharedState","setInput","yylloc","yyloc","token","ranges","options","getPrototypeOf","symbol","preErrorSymbol","state","action","newState","expected","yyval","lex","errStr","showPosition","first_line","last_line","first_column","last_column","EOF","_input","_more","_backtrack","done","matched","conditionStack","ch","unput","lines","substr","oldLines","more","reject","backtrack_lexer","less","pastInput","past","upcomingInput","next","pre","test_match","indexed_rule","backup","matches","tempMatch","rules","_currentRules","flex","begin","condition","popState","pop","conditions","topState","pushState","stateStackSize","yy_","$avoiding_name_collisions","YY_START","Parser","main","process","argv","CHILDREN","ASSIGNMENT_EXPRESSION","SCRIPT","EXPRESSION_BLOCK","UNARY_EXPRESSION","NUMBER_LITERAL","IDENTIFIER","CALL_EXPRESSION","BINARY_EXPRESSION","LOGICAL_EXPRESSION","mapAst","ast","cb","children","newAst","child","orignalChild","newChild","orignalChildren","newChildren","originalChild","childrenHaveChanged","some","__importDefault","__esModule","__importStar","parser_1","emitter_1","encoding_1","shims_1","wasmFunctions_1","constants_1","compileModule","funcs","preParsed","includes","importedVars","entries","poolName","variableName","varResolver","ScopedIdMap","functionImports","default","func","VAL_TYPE","f64","returns","localFuncOrder","moduleFuncs","poolsList","formatList","localVariables","resolveVar","resolveLocal","resolveFunc","shimdex","findIndex","op","f64_floor","localFuncMap","rawSource","binary","emit","exportName","localFuncs","getSignatureKey","types","typeIndexByKey","Map","getTypeIndex","typeIndex","has","FUNCTION_TYPE","encodeFlatVector","namespace","encodeString","GLOBAL_TYPE","MUTABILITY","var","TYPE_IDX","unsignedLEB128","memories","WASM_MEMORY_SIZE","globalCount","size","globals","times","f64_const","xports","funcIndex","EXPORT_TYPE","FUNC","codes","_a","localTypes","encodeNestedVector","MAGIC","WASM_VERSION","encodeSection","SECTION","TYPE","IMPORT","MEMORY","GLOBAL","EXPORT","CODE","MAX_LOOP_COUNT","BUFFER_SIZE","ceil","errorUtils_1","utils_1","_b","_c","statement","drop","flatten","emitExpressionBlock","f64_add","f64_sub","f64_mul","IS_ZEROISH","f64_convert_i32_s","IS_NOT_ZEROISH","f64_lt","f64_gt","f64_le","f64_ge","createCompilerError","functionName","argList","assertArity","arity","createUserError","consiquent","alternate","if","BLOCK","else","emitConditional","expression","iterationCount","i32","i32_const","local_set","loop","void","local_get","i32_add","local_tee","i32_lt_u","i32_and","br_if","emitWhile","count","localIndex","block","i32_trunc_f64_s","i32_le_s","i32_sub","i32_ne","emitLoop","f64_load","emitAddMemoryOffset","variableIdentifier","resolvedName","global_set","global_get","node","f64_abs","f64_sqrt","f64_min","f64_max","f64_ceil","invocation","startsWith","rightCode","mutationCode","operatorCode","f64_div","getAssignmentOperatorMutation","bufferName","addOffset","unnormalizedIndex","rightValue","i32_lt_s","f64_store","inBounds","behavior","comparison","shortCircutValue","f64_neg","statements","arrayJoin","ieee754","encodef64","write","byte","signedLEB128","log2","negative","TABLE","blockType","retType","select","i32_eqz","i32_gt_s","i32_le_u","i32_ge_s","f64_eq","f64_ne","i32_mul","i32_rem_s","i32_or","i64_rem_s","i64_and","i64_or","i32_trunc_f64_u","i64_trunc_s_f64","f64_convert_i64_s","i64","f32","const","MEMORY_IDX","s","subSections","vec","unshift","parserImpl","printLoc","contextLines","firstIndex","lastIndex","annotatedLines","lineNumber","padding","repeat","underline","insertIndex","splice","CompilerError","message","super","sourceContext","UserError","mLen","e","eLen","nBytes","eMax","eBias","rt","LN2","compiler_1","shims","loader_1","compilerPools","Set","importObject","preProcessor_1","envParser_1","astUtils_1","mapLoc","mapper","first","getLoc","last","column","processedCode","preProcess","destCol","previousAnchor","srcCol","srcLine","anchor","remainingColumns","dest","lineStart","inlineComment","blockComment","emitAnchor","char","tan","asin","acos","atan","joiner","newArr","_map","jointKey","list","quoted","bitwiseOr","bitwiseAnd","_getBufferIndex","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","definition","prop","toStringTag","nmd","paths"],"sourceRoot":""}